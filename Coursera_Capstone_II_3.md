
<h3>Add libraries</h3>




```python
import pandas as pd
import requests
import io
from bs4 import BeautifulSoup

!pip install geopy  # uncomment this line if you haven't completed the Foursquare API lab
from geopy.geocoders import Nominatim # convert an address into latitude and longitude values

import requests # library to handle requests
from pandas.io.json import json_normalize # tranform JSON file into a pandas dataframe

# Matplotlib and associated plotting modules
import matplotlib.cm as cm
import matplotlib.colors as colors

# import k-means from clustering stage
from sklearn.cluster import KMeans

!pip install folium  # uncomment this line if you haven't completed the Foursquare API lab
import folium # map rendering library

import numpy as np

print('Libraries imported.')
```

<h3>Read table from Wikipedia in pandas data frame</h3>


```python
url = "https://en.wikipedia.org/wiki/List_of_postal_codes_of_Canada:_M"
res = requests.get(url)
soup = BeautifulSoup(res.content,'lxml')
table = soup.find_all('table')[0] 
df = pd.read_html(str(table))[0]
```

<h3>Clean and amend data frame</h3>
<ol>
  <li>remove not assigned boroughs</li>
  <li>join postcodes with multiple boroughs in one comma seperated row</li>
  <li>copy not assigned neighbourhoods to borough</li>
</ol>


```python
# Clean Not assigned Boroughs  
df = df[~df['Borough'].isin(['Not assigned'])]
# Join grouped Boroughs to one comma seperated line
df =df.groupby(['Postcode','Borough'],as_index=False, sort=False).agg(','.join)
# Boroughs with no neighbourhood get the borough itself as neighbourhood
df.Neighbourhood = df.Borough.where(df.Neighbourhood == 'Not assigned', df.Neighbourhood)
```

<h3>Print head of data frame and shape</h3>


```python
print(df.head())
print(df.shape)
```

      Postcode           Borough                    Neighbourhood
    0      M3A        North York                        Parkwoods
    1      M4A        North York                 Victoria Village
    2      M5A  Downtown Toronto         Harbourfront,Regent Park
    3      M6A        North York  Lawrence Heights,Lawrence Manor
    4      M7A      Queen's Park                     Queen's Park
    (103, 3)


<h3>Load Geospatial data to df</h3>


```python
url="http://cocl.us/Geospatial_data"
s=requests.get(url).content
df2=pd.read_csv(io.StringIO(s.decode('utf-8')))
```

<h3>Inner Join of data frames on Postcode</h3>


```python
df2.rename(columns={'Postal Code': 'Postcode'}, inplace=True)
df =pd.merge(df, df2, on='Postcode', how='inner')

```

<h3>Check head and shape</h3>


```python
print(df.head())
df.shape
```

      Postcode           Borough  ...   Latitude  Longitude
    0      M3A        North York  ...  43.753259 -79.329656
    1      M4A        North York  ...  43.725882 -79.315572
    2      M5A  Downtown Toronto  ...  43.654260 -79.360636
    3      M6A        North York  ...  43.718518 -79.464763
    4      M7A      Queen's Park  ...  43.662301 -79.389494
    
    [5 rows x 5 columns]





    (103, 5)



<h3>Locate Toronto</h3>


```python
address = 'Toronto, TO'

geolocator = Nominatim(user_agent="to_explorer")
location = geolocator.geocode(address)
latitude = location.latitude
longitude = location.longitude
print('The geograpical coordinate of Toronto are {}, {}.'.format(latitude, longitude))
```

    The geograpical coordinate of Toronto are 43.653963, -79.387207.


<h3>Find all Boroughs with Toronto and print to map</h3>


```python
df = df[df['Borough'].str.contains("Toronto")]
map_toronto = folium.Map(location=[latitude, longitude], zoom_start=10)
# add markers to map
for lat, lng, borough, neighborhood in zip(df['Latitude'], df['Longitude'], df['Borough'], df['Neighbourhood']):
    label = '{}, {}'.format(neighborhood, borough)
    label = folium.Popup(label, parse_html=True)
    folium.CircleMarker(
        [lat, lng],
        radius=5,
        popup=label,
        color='blue',
        fill=True,
        fill_color='#3186cc',
        fill_opacity=0.7,
        parse_html=False).add_to(map_toronto)  
    
map_toronto


```




<div style="width:100%;"><div style="position:relative;width:100%;height:0;padding-bottom:60%;"><iframe src="data:text/html;charset=utf-8;base64,PCFET0NUWVBFIGh0bWw+CjxoZWFkPiAgICAKICAgIDxtZXRhIGh0dHAtZXF1aXY9ImNvbnRlbnQtdHlwZSIgY29udGVudD0idGV4dC9odG1sOyBjaGFyc2V0PVVURi04IiAvPgogICAgPHNjcmlwdD5MX1BSRUZFUl9DQU5WQVM9ZmFsc2U7IExfTk9fVE9VQ0g9ZmFsc2U7IExfRElTQUJMRV8zRD1mYWxzZTs8L3NjcmlwdD4KICAgIDxzY3JpcHQgc3JjPSJodHRwczovL2Nkbi5qc2RlbGl2ci5uZXQvbnBtL2xlYWZsZXRAMS40LjAvZGlzdC9sZWFmbGV0LmpzIj48L3NjcmlwdD4KICAgIDxzY3JpcHQgc3JjPSJodHRwczovL2NvZGUuanF1ZXJ5LmNvbS9qcXVlcnktMS4xMi40Lm1pbi5qcyI+PC9zY3JpcHQ+CiAgICA8c2NyaXB0IHNyYz0iaHR0cHM6Ly9tYXhjZG4uYm9vdHN0cmFwY2RuLmNvbS9ib290c3RyYXAvMy4yLjAvanMvYm9vdHN0cmFwLm1pbi5qcyI+PC9zY3JpcHQ+CiAgICA8c2NyaXB0IHNyYz0iaHR0cHM6Ly9jZG5qcy5jbG91ZGZsYXJlLmNvbS9hamF4L2xpYnMvTGVhZmxldC5hd2Vzb21lLW1hcmtlcnMvMi4wLjIvbGVhZmxldC5hd2Vzb21lLW1hcmtlcnMuanMiPjwvc2NyaXB0PgogICAgPGxpbmsgcmVsPSJzdHlsZXNoZWV0IiBocmVmPSJodHRwczovL2Nkbi5qc2RlbGl2ci5uZXQvbnBtL2xlYWZsZXRAMS40LjAvZGlzdC9sZWFmbGV0LmNzcyIvPgogICAgPGxpbmsgcmVsPSJzdHlsZXNoZWV0IiBocmVmPSJodHRwczovL21heGNkbi5ib290c3RyYXBjZG4uY29tL2Jvb3RzdHJhcC8zLjIuMC9jc3MvYm9vdHN0cmFwLm1pbi5jc3MiLz4KICAgIDxsaW5rIHJlbD0ic3R5bGVzaGVldCIgaHJlZj0iaHR0cHM6Ly9tYXhjZG4uYm9vdHN0cmFwY2RuLmNvbS9ib290c3RyYXAvMy4yLjAvY3NzL2Jvb3RzdHJhcC10aGVtZS5taW4uY3NzIi8+CiAgICA8bGluayByZWw9InN0eWxlc2hlZXQiIGhyZWY9Imh0dHBzOi8vbWF4Y2RuLmJvb3RzdHJhcGNkbi5jb20vZm9udC1hd2Vzb21lLzQuNi4zL2Nzcy9mb250LWF3ZXNvbWUubWluLmNzcyIvPgogICAgPGxpbmsgcmVsPSJzdHlsZXNoZWV0IiBocmVmPSJodHRwczovL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy9MZWFmbGV0LmF3ZXNvbWUtbWFya2Vycy8yLjAuMi9sZWFmbGV0LmF3ZXNvbWUtbWFya2Vycy5jc3MiLz4KICAgIDxsaW5rIHJlbD0ic3R5bGVzaGVldCIgaHJlZj0iaHR0cHM6Ly9yYXdjZG4uZ2l0aGFjay5jb20vcHl0aG9uLXZpc3VhbGl6YXRpb24vZm9saXVtL21hc3Rlci9mb2xpdW0vdGVtcGxhdGVzL2xlYWZsZXQuYXdlc29tZS5yb3RhdGUuY3NzIi8+CiAgICA8c3R5bGU+aHRtbCwgYm9keSB7d2lkdGg6IDEwMCU7aGVpZ2h0OiAxMDAlO21hcmdpbjogMDtwYWRkaW5nOiAwO308L3N0eWxlPgogICAgPHN0eWxlPiNtYXAge3Bvc2l0aW9uOmFic29sdXRlO3RvcDowO2JvdHRvbTowO3JpZ2h0OjA7bGVmdDowO308L3N0eWxlPgogICAgCiAgICA8bWV0YSBuYW1lPSJ2aWV3cG9ydCIgY29udGVudD0id2lkdGg9ZGV2aWNlLXdpZHRoLAogICAgICAgIGluaXRpYWwtc2NhbGU9MS4wLCBtYXhpbXVtLXNjYWxlPTEuMCwgdXNlci1zY2FsYWJsZT1ubyIgLz4KICAgIDxzdHlsZT4jbWFwXzJlNDhkMjEyMDAwMjQ1NzY5ZDhmZTRjMzQ4Mjk1NjZiIHsKICAgICAgICBwb3NpdGlvbjogcmVsYXRpdmU7CiAgICAgICAgd2lkdGg6IDEwMC4wJTsKICAgICAgICBoZWlnaHQ6IDEwMC4wJTsKICAgICAgICBsZWZ0OiAwLjAlOwogICAgICAgIHRvcDogMC4wJTsKICAgICAgICB9CiAgICA8L3N0eWxlPgo8L2hlYWQ+Cjxib2R5PiAgICAKICAgIAogICAgPGRpdiBjbGFzcz0iZm9saXVtLW1hcCIgaWQ9Im1hcF8yZTQ4ZDIxMjAwMDI0NTc2OWQ4ZmU0YzM0ODI5NTY2YiIgPjwvZGl2Pgo8L2JvZHk+CjxzY3JpcHQ+ICAgIAogICAgCiAgICAKICAgICAgICB2YXIgYm91bmRzID0gbnVsbDsKICAgIAoKICAgIHZhciBtYXBfMmU0OGQyMTIwMDAyNDU3NjlkOGZlNGMzNDgyOTU2NmIgPSBMLm1hcCgKICAgICAgICAnbWFwXzJlNDhkMjEyMDAwMjQ1NzY5ZDhmZTRjMzQ4Mjk1NjZiJywgewogICAgICAgIGNlbnRlcjogWzQzLjY1Mzk2MywgLTc5LjM4NzIwN10sCiAgICAgICAgem9vbTogMTAsCiAgICAgICAgbWF4Qm91bmRzOiBib3VuZHMsCiAgICAgICAgbGF5ZXJzOiBbXSwKICAgICAgICB3b3JsZENvcHlKdW1wOiBmYWxzZSwKICAgICAgICBjcnM6IEwuQ1JTLkVQU0czODU3LAogICAgICAgIHpvb21Db250cm9sOiB0cnVlLAogICAgICAgIH0pOwoKCiAgICAKICAgIHZhciB0aWxlX2xheWVyXzY5NGE1MWRiNmMwMTQ3OTE4NTExMWQ0MzE2M2ViOTc1ID0gTC50aWxlTGF5ZXIoCiAgICAgICAgJ2h0dHBzOi8ve3N9LnRpbGUub3BlbnN0cmVldG1hcC5vcmcve3p9L3t4fS97eX0ucG5nJywKICAgICAgICB7CiAgICAgICAgImF0dHJpYnV0aW9uIjogbnVsbCwKICAgICAgICAiZGV0ZWN0UmV0aW5hIjogZmFsc2UsCiAgICAgICAgIm1heE5hdGl2ZVpvb20iOiAxOCwKICAgICAgICAibWF4Wm9vbSI6IDE4LAogICAgICAgICJtaW5ab29tIjogMCwKICAgICAgICAibm9XcmFwIjogZmFsc2UsCiAgICAgICAgIm9wYWNpdHkiOiAxLAogICAgICAgICJzdWJkb21haW5zIjogImFiYyIsCiAgICAgICAgInRtcyI6IGZhbHNlCn0pLmFkZFRvKG1hcF8yZTQ4ZDIxMjAwMDI0NTc2OWQ4ZmU0YzM0ODI5NTY2Yik7CiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfOTE5NzkyMzk2MDY5NDVhMWEzZWMyZGZkZDVlYjA3ZGQgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0My42NTQyNTk5LCAtNzkuMzYwNjM1OV0sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICJibHVlIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiIzMxODZjYyIsCiAgImZpbGxPcGFjaXR5IjogMC43LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYWRkVG8obWFwXzJlNDhkMjEyMDAwMjQ1NzY5ZDhmZTRjMzQ4Mjk1NjZiKTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzA5ZDEyYzllOTA1MTRmNWNhNjc0NDlkYTFlM2Y3YWU3ID0gTC5wb3B1cCh7bWF4V2lkdGg6ICcxMDAlJwogICAgICAgICAgICAKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sX2QxMjQ4ZjY2YzEwMDQ1MmY5ZjIyNmQ4YWRiZGQ5N2FhID0gJChgPGRpdiBpZD0iaHRtbF9kMTI0OGY2NmMxMDA0NTJmOWYyMjZkOGFkYmRkOTdhYSIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+SGFyYm91cmZyb250LFJlZ2VudCBQYXJrLCBEb3dudG93biBUb3JvbnRvPC9kaXY+YClbMF07CiAgICAgICAgICAgICAgICBwb3B1cF8wOWQxMmM5ZTkwNTE0ZjVjYTY3NDQ5ZGExZTNmN2FlNy5zZXRDb250ZW50KGh0bWxfZDEyNDhmNjZjMTAwNDUyZjlmMjI2ZDhhZGJkZDk3YWEpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfOTE5NzkyMzk2MDY5NDVhMWEzZWMyZGZkZDVlYjA3ZGQuYmluZFBvcHVwKHBvcHVwXzA5ZDEyYzllOTA1MTRmNWNhNjc0NDlkYTFlM2Y3YWU3KQogICAgICAgICAgICA7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl8yZDdmODI2ZGU5Njk0YmZmOWZhMjdkNThiNjE4ZjExZCA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjY1NzE2MTgsIC03OS4zNzg5MzcwOTk5OTk5OV0sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICJibHVlIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiIzMxODZjYyIsCiAgImZpbGxPcGFjaXR5IjogMC43LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYWRkVG8obWFwXzJlNDhkMjEyMDAwMjQ1NzY5ZDhmZTRjMzQ4Mjk1NjZiKTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzBlYmFkZDY4OGY3NjRkNTVhOTQxYjA5YjI5ODdjZjExID0gTC5wb3B1cCh7bWF4V2lkdGg6ICcxMDAlJwogICAgICAgICAgICAKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzYyYTJhOGM0YTM0OTRiOGFiNWVkZTdmYjU5NDA3MTllID0gJChgPGRpdiBpZD0iaHRtbF82MmEyYThjNGEzNDk0YjhhYjVlZGU3ZmI1OTQwNzE5ZSIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+UnllcnNvbixHYXJkZW4gRGlzdHJpY3QsIERvd250b3duIFRvcm9udG88L2Rpdj5gKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzBlYmFkZDY4OGY3NjRkNTVhOTQxYjA5YjI5ODdjZjExLnNldENvbnRlbnQoaHRtbF82MmEyYThjNGEzNDk0YjhhYjVlZGU3ZmI1OTQwNzE5ZSk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl8yZDdmODI2ZGU5Njk0YmZmOWZhMjdkNThiNjE4ZjExZC5iaW5kUG9wdXAocG9wdXBfMGViYWRkNjg4Zjc2NGQ1NWE5NDFiMDliMjk4N2NmMTEpCiAgICAgICAgICAgIDsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyX2Q0OWFjZTI3NWJhOTQwZDc5NmY1MTIzNmNlNjUwMTA1ID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDMuNjUxNDkzOSwgLTc5LjM3NTQxNzldLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwKICAiY29sb3IiOiAiYmx1ZSIsCiAgImRhc2hBcnJheSI6IG51bGwsCiAgImRhc2hPZmZzZXQiOiBudWxsLAogICJmaWxsIjogdHJ1ZSwKICAiZmlsbENvbG9yIjogIiMzMTg2Y2MiLAogICJmaWxsT3BhY2l0eSI6IDAuNywKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsCiAgImxpbmVDYXAiOiAicm91bmQiLAogICJsaW5lSm9pbiI6ICJyb3VuZCIsCiAgIm9wYWNpdHkiOiAxLjAsCiAgInJhZGl1cyI6IDUsCiAgInN0cm9rZSI6IHRydWUsCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFkZFRvKG1hcF8yZTQ4ZDIxMjAwMDI0NTc2OWQ4ZmU0YzM0ODI5NTY2Yik7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF9mODI0ZGU1MTVkYjQ0OGMzOGQ4ZTk2NDJhMjVhZGZjYiA9IEwucG9wdXAoe21heFdpZHRoOiAnMTAwJScKICAgICAgICAgICAgCiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF9lZmJlNGYzMGE2NTA0ZjM2OTJmNjc5YmRkOGQ4NjdhYiA9ICQoYDxkaXYgaWQ9Imh0bWxfZWZiZTRmMzBhNjUwNGYzNjkyZjY3OWJkZDhkODY3YWIiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPlN0LiBKYW1lcyBUb3duLCBEb3dudG93biBUb3JvbnRvPC9kaXY+YClbMF07CiAgICAgICAgICAgICAgICBwb3B1cF9mODI0ZGU1MTVkYjQ0OGMzOGQ4ZTk2NDJhMjVhZGZjYi5zZXRDb250ZW50KGh0bWxfZWZiZTRmMzBhNjUwNGYzNjkyZjY3OWJkZDhkODY3YWIpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfZDQ5YWNlMjc1YmE5NDBkNzk2ZjUxMjM2Y2U2NTAxMDUuYmluZFBvcHVwKHBvcHVwX2Y4MjRkZTUxNWRiNDQ4YzM4ZDhlOTY0MmEyNWFkZmNiKQogICAgICAgICAgICA7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl9mNTQ4MzJjZDk1MTk0NTc1ODY1OTEwNjhiMzcxOTBiZSA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjY3NjM1NzM5OTk5OTk5LCAtNzkuMjkzMDMxMl0sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICJibHVlIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiIzMxODZjYyIsCiAgImZpbGxPcGFjaXR5IjogMC43LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYWRkVG8obWFwXzJlNDhkMjEyMDAwMjQ1NzY5ZDhmZTRjMzQ4Mjk1NjZiKTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzkzNDUzZTIxNWI1OTQ1NmRhN2YxMGRmNDNmNThmNDE4ID0gTC5wb3B1cCh7bWF4V2lkdGg6ICcxMDAlJwogICAgICAgICAgICAKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzc1YjVlMzg2ZWNmYTRmZGM5NWNhOWUyYmEwM2UzY2I1ID0gJChgPGRpdiBpZD0iaHRtbF83NWI1ZTM4NmVjZmE0ZmRjOTVjYTllMmJhMDNlM2NiNSIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+VGhlIEJlYWNoZXMsIEVhc3QgVG9yb250bzwvZGl2PmApWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfOTM0NTNlMjE1YjU5NDU2ZGE3ZjEwZGY0M2Y1OGY0MTguc2V0Q29udGVudChodG1sXzc1YjVlMzg2ZWNmYTRmZGM5NWNhOWUyYmEwM2UzY2I1KTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyX2Y1NDgzMmNkOTUxOTQ1NzU4NjU5MTA2OGIzNzE5MGJlLmJpbmRQb3B1cChwb3B1cF85MzQ1M2UyMTViNTk0NTZkYTdmMTBkZjQzZjU4ZjQxOCkKICAgICAgICAgICAgOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfMDhjNWY0MTAyN2FmNDcyMjllNWE2YmY0ZDRjOGQ0N2IgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0My42NDQ3NzA3OTk5OTk5OTYsIC03OS4zNzMzMDY0XSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogImJsdWUiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICIjMzE4NmNjIiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfMmU0OGQyMTIwMDAyNDU3NjlkOGZlNGMzNDgyOTU2NmIpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfNDdkZTNkYTNjNzZkNDE2NWFmOTc0ZjNhYzdjY2UzMTMgPSBMLnBvcHVwKHttYXhXaWR0aDogJzEwMCUnCiAgICAgICAgICAgIAogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfMTMyY2JlMTRlZDQ1NGVhMTg5ZWUzOWYxOGY0ZmI3MjMgPSAkKGA8ZGl2IGlkPSJodG1sXzEzMmNiZTE0ZWQ0NTRlYTE4OWVlMzlmMThmNGZiNzIzIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5CZXJjenkgUGFyaywgRG93bnRvd24gVG9yb250bzwvZGl2PmApWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfNDdkZTNkYTNjNzZkNDE2NWFmOTc0ZjNhYzdjY2UzMTMuc2V0Q29udGVudChodG1sXzEzMmNiZTE0ZWQ0NTRlYTE4OWVlMzlmMThmNGZiNzIzKTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyXzA4YzVmNDEwMjdhZjQ3MjI5ZTVhNmJmNGQ0YzhkNDdiLmJpbmRQb3B1cChwb3B1cF80N2RlM2RhM2M3NmQ0MTY1YWY5NzRmM2FjN2NjZTMxMykKICAgICAgICAgICAgOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfYTI0OTNjZGU4ZmM5NDg0NmFjN2QwNDEyOWY1YTMyMzYgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0My42NTc5NTI0LCAtNzkuMzg3MzgyNl0sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICJibHVlIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiIzMxODZjYyIsCiAgImZpbGxPcGFjaXR5IjogMC43LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYWRkVG8obWFwXzJlNDhkMjEyMDAwMjQ1NzY5ZDhmZTRjMzQ4Mjk1NjZiKTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzI1MDI0NjRkYzU2YzRiMmE4Mjg0YjI5ZDVkMjFkMTU4ID0gTC5wb3B1cCh7bWF4V2lkdGg6ICcxMDAlJwogICAgICAgICAgICAKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzA3ZDdkOTI1YjZkYTQ2M2RiNGMyNDg4OGM0YTcyOGU3ID0gJChgPGRpdiBpZD0iaHRtbF8wN2Q3ZDkyNWI2ZGE0NjNkYjRjMjQ4ODhjNGE3MjhlNyIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+Q2VudHJhbCBCYXkgU3RyZWV0LCBEb3dudG93biBUb3JvbnRvPC9kaXY+YClbMF07CiAgICAgICAgICAgICAgICBwb3B1cF8yNTAyNDY0ZGM1NmM0YjJhODI4NGIyOWQ1ZDIxZDE1OC5zZXRDb250ZW50KGh0bWxfMDdkN2Q5MjViNmRhNDYzZGI0YzI0ODg4YzRhNzI4ZTcpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfYTI0OTNjZGU4ZmM5NDg0NmFjN2QwNDEyOWY1YTMyMzYuYmluZFBvcHVwKHBvcHVwXzI1MDI0NjRkYzU2YzRiMmE4Mjg0YjI5ZDVkMjFkMTU4KQogICAgICAgICAgICA7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl8xZGQxNTA5YTBlMGM0ZTdjOWFhYzk2ZDJkMjNjZDZjMSA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjY2OTU0MiwgLTc5LjQyMjU2MzddLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwKICAiY29sb3IiOiAiYmx1ZSIsCiAgImRhc2hBcnJheSI6IG51bGwsCiAgImRhc2hPZmZzZXQiOiBudWxsLAogICJmaWxsIjogdHJ1ZSwKICAiZmlsbENvbG9yIjogIiMzMTg2Y2MiLAogICJmaWxsT3BhY2l0eSI6IDAuNywKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsCiAgImxpbmVDYXAiOiAicm91bmQiLAogICJsaW5lSm9pbiI6ICJyb3VuZCIsCiAgIm9wYWNpdHkiOiAxLjAsCiAgInJhZGl1cyI6IDUsCiAgInN0cm9rZSI6IHRydWUsCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFkZFRvKG1hcF8yZTQ4ZDIxMjAwMDI0NTc2OWQ4ZmU0YzM0ODI5NTY2Yik7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF80YTU1NWZhNTViNDI0OWY3OWYyMjc5ZWQ0MGViNDA4YyA9IEwucG9wdXAoe21heFdpZHRoOiAnMTAwJScKICAgICAgICAgICAgCiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF80MGQ1YzJkM2NhYTk0YjEwODEzNjFhMWFlZTA1MTFjNCA9ICQoYDxkaXYgaWQ9Imh0bWxfNDBkNWMyZDNjYWE5NGIxMDgxMzYxYTFhZWUwNTExYzQiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPkNocmlzdGllLCBEb3dudG93biBUb3JvbnRvPC9kaXY+YClbMF07CiAgICAgICAgICAgICAgICBwb3B1cF80YTU1NWZhNTViNDI0OWY3OWYyMjc5ZWQ0MGViNDA4Yy5zZXRDb250ZW50KGh0bWxfNDBkNWMyZDNjYWE5NGIxMDgxMzYxYTFhZWUwNTExYzQpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfMWRkMTUwOWEwZTBjNGU3YzlhYWM5NmQyZDIzY2Q2YzEuYmluZFBvcHVwKHBvcHVwXzRhNTU1ZmE1NWI0MjQ5Zjc5ZjIyNzllZDQwZWI0MDhjKQogICAgICAgICAgICA7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl81NjI0NTI0YTAwYTY0YzNmYjQ3YzFmNzUwOTc2N2Q4NCA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjY1MDU3MTIwMDAwMDAxLCAtNzkuMzg0NTY3NV0sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICJibHVlIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiIzMxODZjYyIsCiAgImZpbGxPcGFjaXR5IjogMC43LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYWRkVG8obWFwXzJlNDhkMjEyMDAwMjQ1NzY5ZDhmZTRjMzQ4Mjk1NjZiKTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwX2NjYWRjZTc2ODYwYzQ4MDRhNzEwMDQ0ODJhMmFkMWNlID0gTC5wb3B1cCh7bWF4V2lkdGg6ICcxMDAlJwogICAgICAgICAgICAKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzdlMDExMzllMjQ1MTRiODFiMzdjZWQwMzRkNmY4ZTMzID0gJChgPGRpdiBpZD0iaHRtbF83ZTAxMTM5ZTI0NTE0YjgxYjM3Y2VkMDM0ZDZmOGUzMyIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+QWRlbGFpZGUsS2luZyxSaWNobW9uZCwgRG93bnRvd24gVG9yb250bzwvZGl2PmApWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfY2NhZGNlNzY4NjBjNDgwNGE3MTAwNDQ4MmEyYWQxY2Uuc2V0Q29udGVudChodG1sXzdlMDExMzllMjQ1MTRiODFiMzdjZWQwMzRkNmY4ZTMzKTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyXzU2MjQ1MjRhMDBhNjRjM2ZiNDdjMWY3NTA5NzY3ZDg0LmJpbmRQb3B1cChwb3B1cF9jY2FkY2U3Njg2MGM0ODA0YTcxMDA0NDgyYTJhZDFjZSkKICAgICAgICAgICAgOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfMjU4YTc0ODk3MWM1NGQxNjkxNGY4MDA5YWU3M2RiMWQgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0My42NjkwMDUxMDAwMDAwMSwgLTc5LjQ0MjI1OTNdLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwKICAiY29sb3IiOiAiYmx1ZSIsCiAgImRhc2hBcnJheSI6IG51bGwsCiAgImRhc2hPZmZzZXQiOiBudWxsLAogICJmaWxsIjogdHJ1ZSwKICAiZmlsbENvbG9yIjogIiMzMTg2Y2MiLAogICJmaWxsT3BhY2l0eSI6IDAuNywKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsCiAgImxpbmVDYXAiOiAicm91bmQiLAogICJsaW5lSm9pbiI6ICJyb3VuZCIsCiAgIm9wYWNpdHkiOiAxLjAsCiAgInJhZGl1cyI6IDUsCiAgInN0cm9rZSI6IHRydWUsCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFkZFRvKG1hcF8yZTQ4ZDIxMjAwMDI0NTc2OWQ4ZmU0YzM0ODI5NTY2Yik7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF8xMWIxZWQxYmQwYmQ0OTYzYjEwOWE3ODY0OTg4OTg1YyA9IEwucG9wdXAoe21heFdpZHRoOiAnMTAwJScKICAgICAgICAgICAgCiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF9kMmFhYWYyOWNlYjU0N2E3Yjk2NzEzY2I3NDk1Y2EzNyA9ICQoYDxkaXYgaWQ9Imh0bWxfZDJhYWFmMjljZWI1NDdhN2I5NjcxM2NiNzQ5NWNhMzciIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPkRvdmVyY291cnQgVmlsbGFnZSxEdWZmZXJpbiwgV2VzdCBUb3JvbnRvPC9kaXY+YClbMF07CiAgICAgICAgICAgICAgICBwb3B1cF8xMWIxZWQxYmQwYmQ0OTYzYjEwOWE3ODY0OTg4OTg1Yy5zZXRDb250ZW50KGh0bWxfZDJhYWFmMjljZWI1NDdhN2I5NjcxM2NiNzQ5NWNhMzcpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfMjU4YTc0ODk3MWM1NGQxNjkxNGY4MDA5YWU3M2RiMWQuYmluZFBvcHVwKHBvcHVwXzExYjFlZDFiZDBiZDQ5NjNiMTA5YTc4NjQ5ODg5ODVjKQogICAgICAgICAgICA7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl9lMTk4YTk3YjRmYzI0ZjNhYjQ4MTA4Mzk4YTFhOGQxMSA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjY0MDgxNTcsIC03OS4zODE3NTIyOTk5OTk5OV0sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICJibHVlIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiIzMxODZjYyIsCiAgImZpbGxPcGFjaXR5IjogMC43LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYWRkVG8obWFwXzJlNDhkMjEyMDAwMjQ1NzY5ZDhmZTRjMzQ4Mjk1NjZiKTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzI3ZTI5MDJlYzlhYTRiYjJiZmNjYTQzMmI3MjA5MjVhID0gTC5wb3B1cCh7bWF4V2lkdGg6ICcxMDAlJwogICAgICAgICAgICAKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzU0ODJhNTM3ODYxOTQ2NTg5ZjViZTBkZGZkM2U5NmY3ID0gJChgPGRpdiBpZD0iaHRtbF81NDgyYTUzNzg2MTk0NjU4OWY1YmUwZGRmZDNlOTZmNyIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+SGFyYm91cmZyb250IEVhc3QsVG9yb250byBJc2xhbmRzLFVuaW9uIFN0YXRpb24sIERvd250b3duIFRvcm9udG88L2Rpdj5gKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzI3ZTI5MDJlYzlhYTRiYjJiZmNjYTQzMmI3MjA5MjVhLnNldENvbnRlbnQoaHRtbF81NDgyYTUzNzg2MTk0NjU4OWY1YmUwZGRmZDNlOTZmNyk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl9lMTk4YTk3YjRmYzI0ZjNhYjQ4MTA4Mzk4YTFhOGQxMS5iaW5kUG9wdXAocG9wdXBfMjdlMjkwMmVjOWFhNGJiMmJmY2NhNDMyYjcyMDkyNWEpCiAgICAgICAgICAgIDsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyXzAwODk3YzcwMzUwYTQ5OTBiMGY2ZmE4ZTdhMjgzMGYyID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDMuNjQ3OTI2NzAwMDAwMDA2LCAtNzkuNDE5NzQ5N10sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICJibHVlIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiIzMxODZjYyIsCiAgImZpbGxPcGFjaXR5IjogMC43LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYWRkVG8obWFwXzJlNDhkMjEyMDAwMjQ1NzY5ZDhmZTRjMzQ4Mjk1NjZiKTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzU1N2NjNjc1ZmYwMTRkODViNDk5ZDNlYzE1MjQwZTAwID0gTC5wb3B1cCh7bWF4V2lkdGg6ICcxMDAlJwogICAgICAgICAgICAKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzZhMDg3Mjg0MTQxMjRmMjVhYWRjMGNjMGE4MjlkNWU4ID0gJChgPGRpdiBpZD0iaHRtbF82YTA4NzI4NDE0MTI0ZjI1YWFkYzBjYzBhODI5ZDVlOCIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+TGl0dGxlIFBvcnR1Z2FsLFRyaW5pdHksIFdlc3QgVG9yb250bzwvZGl2PmApWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfNTU3Y2M2NzVmZjAxNGQ4NWI0OTlkM2VjMTUyNDBlMDAuc2V0Q29udGVudChodG1sXzZhMDg3Mjg0MTQxMjRmMjVhYWRjMGNjMGE4MjlkNWU4KTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyXzAwODk3YzcwMzUwYTQ5OTBiMGY2ZmE4ZTdhMjgzMGYyLmJpbmRQb3B1cChwb3B1cF81NTdjYzY3NWZmMDE0ZDg1YjQ5OWQzZWMxNTI0MGUwMCkKICAgICAgICAgICAgOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfYjdmNjQwYWU1M2VmNDk0Y2E0NGQwMmU3MmEzNDYwNDUgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0My42Nzk1NTcxLCAtNzkuMzUyMTg4XSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogImJsdWUiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICIjMzE4NmNjIiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfMmU0OGQyMTIwMDAyNDU3NjlkOGZlNGMzNDgyOTU2NmIpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfYjg4Y2QwZmYxOTg2NDAxN2FjNzA5YjAxMTdjNjEzYTEgPSBMLnBvcHVwKHttYXhXaWR0aDogJzEwMCUnCiAgICAgICAgICAgIAogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfMTZmM2Q1MGU3ZTc4NDBiODk4M2UyNTg0NGExODY5MjQgPSAkKGA8ZGl2IGlkPSJodG1sXzE2ZjNkNTBlN2U3ODQwYjg5ODNlMjU4NDRhMTg2OTI0IiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5UaGUgRGFuZm9ydGggV2VzdCxSaXZlcmRhbGUsIEVhc3QgVG9yb250bzwvZGl2PmApWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfYjg4Y2QwZmYxOTg2NDAxN2FjNzA5YjAxMTdjNjEzYTEuc2V0Q29udGVudChodG1sXzE2ZjNkNTBlN2U3ODQwYjg5ODNlMjU4NDRhMTg2OTI0KTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyX2I3ZjY0MGFlNTNlZjQ5NGNhNDRkMDJlNzJhMzQ2MDQ1LmJpbmRQb3B1cChwb3B1cF9iODhjZDBmZjE5ODY0MDE3YWM3MDliMDExN2M2MTNhMSkKICAgICAgICAgICAgOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfMTE0NzNjYTVlNjAzNDQ4OWE0Y2M2NWI0OWM2YTAyZTYgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0My42NDcxNzY4LCAtNzkuMzgxNTc2NDAwMDAwMDFdLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwKICAiY29sb3IiOiAiYmx1ZSIsCiAgImRhc2hBcnJheSI6IG51bGwsCiAgImRhc2hPZmZzZXQiOiBudWxsLAogICJmaWxsIjogdHJ1ZSwKICAiZmlsbENvbG9yIjogIiMzMTg2Y2MiLAogICJmaWxsT3BhY2l0eSI6IDAuNywKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsCiAgImxpbmVDYXAiOiAicm91bmQiLAogICJsaW5lSm9pbiI6ICJyb3VuZCIsCiAgIm9wYWNpdHkiOiAxLjAsCiAgInJhZGl1cyI6IDUsCiAgInN0cm9rZSI6IHRydWUsCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFkZFRvKG1hcF8yZTQ4ZDIxMjAwMDI0NTc2OWQ4ZmU0YzM0ODI5NTY2Yik7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF8xNTM1M2RkODg4ZDg0MjJkYThmNDYyYWMzNGUwYzgyMCA9IEwucG9wdXAoe21heFdpZHRoOiAnMTAwJScKICAgICAgICAgICAgCiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF9kOTEzMzFiYmU1ZDE0NWEwODE5NGM5OGEzZDkwOGQwNSA9ICQoYDxkaXYgaWQ9Imh0bWxfZDkxMzMxYmJlNWQxNDVhMDgxOTRjOThhM2Q5MDhkMDUiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPkRlc2lnbiBFeGNoYW5nZSxUb3JvbnRvIERvbWluaW9uIENlbnRyZSwgRG93bnRvd24gVG9yb250bzwvZGl2PmApWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfMTUzNTNkZDg4OGQ4NDIyZGE4ZjQ2MmFjMzRlMGM4MjAuc2V0Q29udGVudChodG1sX2Q5MTMzMWJiZTVkMTQ1YTA4MTk0Yzk4YTNkOTA4ZDA1KTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyXzExNDczY2E1ZTYwMzQ0ODlhNGNjNjViNDljNmEwMmU2LmJpbmRQb3B1cChwb3B1cF8xNTM1M2RkODg4ZDg0MjJkYThmNDYyYWMzNGUwYzgyMCkKICAgICAgICAgICAgOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfMjcyY2JmMWFhYmI3NDliZWI4MmViMDZlYWE4NWQyM2QgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0My42MzY4NDcyLCAtNzkuNDI4MTkxNDAwMDAwMDJdLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwKICAiY29sb3IiOiAiYmx1ZSIsCiAgImRhc2hBcnJheSI6IG51bGwsCiAgImRhc2hPZmZzZXQiOiBudWxsLAogICJmaWxsIjogdHJ1ZSwKICAiZmlsbENvbG9yIjogIiMzMTg2Y2MiLAogICJmaWxsT3BhY2l0eSI6IDAuNywKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsCiAgImxpbmVDYXAiOiAicm91bmQiLAogICJsaW5lSm9pbiI6ICJyb3VuZCIsCiAgIm9wYWNpdHkiOiAxLjAsCiAgInJhZGl1cyI6IDUsCiAgInN0cm9rZSI6IHRydWUsCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFkZFRvKG1hcF8yZTQ4ZDIxMjAwMDI0NTc2OWQ4ZmU0YzM0ODI5NTY2Yik7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF9lOWU1YWI0ZWI2NTI0OTgyYTA3MWY3OGJkNWZhZDc2YyA9IEwucG9wdXAoe21heFdpZHRoOiAnMTAwJScKICAgICAgICAgICAgCiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF85MTAwMDA2MGZhYjg0Y2RhYjNlMTRmYWFiZGU3M2IyNSA9ICQoYDxkaXYgaWQ9Imh0bWxfOTEwMDAwNjBmYWI4NGNkYWIzZTE0ZmFhYmRlNzNiMjUiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPkJyb2NrdG9uLEV4aGliaXRpb24gUGxhY2UsUGFya2RhbGUgVmlsbGFnZSwgV2VzdCBUb3JvbnRvPC9kaXY+YClbMF07CiAgICAgICAgICAgICAgICBwb3B1cF9lOWU1YWI0ZWI2NTI0OTgyYTA3MWY3OGJkNWZhZDc2Yy5zZXRDb250ZW50KGh0bWxfOTEwMDAwNjBmYWI4NGNkYWIzZTE0ZmFhYmRlNzNiMjUpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfMjcyY2JmMWFhYmI3NDliZWI4MmViMDZlYWE4NWQyM2QuYmluZFBvcHVwKHBvcHVwX2U5ZTVhYjRlYjY1MjQ5ODJhMDcxZjc4YmQ1ZmFkNzZjKQogICAgICAgICAgICA7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl85Zjk0NDk4ZjExZjc0MWRiYTgwNGI4MzZmMjA5ZTk1ZiA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjY2ODk5ODUsIC03OS4zMTU1NzE1OTk5OTk5OF0sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICJibHVlIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiIzMxODZjYyIsCiAgImZpbGxPcGFjaXR5IjogMC43LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYWRkVG8obWFwXzJlNDhkMjEyMDAwMjQ1NzY5ZDhmZTRjMzQ4Mjk1NjZiKTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzZkYzFhZTdlNmFiMDRjNjM4Mjg3NTc2ZDE3MzYzOWQyID0gTC5wb3B1cCh7bWF4V2lkdGg6ICcxMDAlJwogICAgICAgICAgICAKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sX2NkZTU0N2IyNzU0MzQ5Y2RiOWFhMzBhMDhlMWZhYzc1ID0gJChgPGRpdiBpZD0iaHRtbF9jZGU1NDdiMjc1NDM0OWNkYjlhYTMwYTA4ZTFmYWM3NSIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+VGhlIEJlYWNoZXMgV2VzdCxJbmRpYSBCYXphYXIsIEVhc3QgVG9yb250bzwvZGl2PmApWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfNmRjMWFlN2U2YWIwNGM2MzgyODc1NzZkMTczNjM5ZDIuc2V0Q29udGVudChodG1sX2NkZTU0N2IyNzU0MzQ5Y2RiOWFhMzBhMDhlMWZhYzc1KTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyXzlmOTQ0OThmMTFmNzQxZGJhODA0YjgzNmYyMDllOTVmLmJpbmRQb3B1cChwb3B1cF82ZGMxYWU3ZTZhYjA0YzYzODI4NzU3NmQxNzM2MzlkMikKICAgICAgICAgICAgOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfNmFiMWY1NmQ4N2IwNGVjZGIwNTg2NjIyMTZlZjA2MTQgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0My42NDgxOTg1LCAtNzkuMzc5ODE2OTAwMDAwMDFdLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwKICAiY29sb3IiOiAiYmx1ZSIsCiAgImRhc2hBcnJheSI6IG51bGwsCiAgImRhc2hPZmZzZXQiOiBudWxsLAogICJmaWxsIjogdHJ1ZSwKICAiZmlsbENvbG9yIjogIiMzMTg2Y2MiLAogICJmaWxsT3BhY2l0eSI6IDAuNywKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsCiAgImxpbmVDYXAiOiAicm91bmQiLAogICJsaW5lSm9pbiI6ICJyb3VuZCIsCiAgIm9wYWNpdHkiOiAxLjAsCiAgInJhZGl1cyI6IDUsCiAgInN0cm9rZSI6IHRydWUsCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFkZFRvKG1hcF8yZTQ4ZDIxMjAwMDI0NTc2OWQ4ZmU0YzM0ODI5NTY2Yik7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF8xYmY1NGQ1MjczYTM0OGNhYTdjODk1MmQ2NzM0Mzc3NiA9IEwucG9wdXAoe21heFdpZHRoOiAnMTAwJScKICAgICAgICAgICAgCiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF9kMDg3NzVmYmFkODA0OWJiYWFiMWVmYjgwNTY2ZGZiOSA9ICQoYDxkaXYgaWQ9Imh0bWxfZDA4Nzc1ZmJhZDgwNDliYmFhYjFlZmI4MDU2NmRmYjkiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPkNvbW1lcmNlIENvdXJ0LFZpY3RvcmlhIEhvdGVsLCBEb3dudG93biBUb3JvbnRvPC9kaXY+YClbMF07CiAgICAgICAgICAgICAgICBwb3B1cF8xYmY1NGQ1MjczYTM0OGNhYTdjODk1MmQ2NzM0Mzc3Ni5zZXRDb250ZW50KGh0bWxfZDA4Nzc1ZmJhZDgwNDliYmFhYjFlZmI4MDU2NmRmYjkpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfNmFiMWY1NmQ4N2IwNGVjZGIwNTg2NjIyMTZlZjA2MTQuYmluZFBvcHVwKHBvcHVwXzFiZjU0ZDUyNzNhMzQ4Y2FhN2M4OTUyZDY3MzQzNzc2KQogICAgICAgICAgICA7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl9lZWFmYTg4ZTkwM2Q0YjgzYjQ1MzMxY2U3NDJmMDBjYyA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjY1OTUyNTUsIC03OS4zNDA5MjNdLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwKICAiY29sb3IiOiAiYmx1ZSIsCiAgImRhc2hBcnJheSI6IG51bGwsCiAgImRhc2hPZmZzZXQiOiBudWxsLAogICJmaWxsIjogdHJ1ZSwKICAiZmlsbENvbG9yIjogIiMzMTg2Y2MiLAogICJmaWxsT3BhY2l0eSI6IDAuNywKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsCiAgImxpbmVDYXAiOiAicm91bmQiLAogICJsaW5lSm9pbiI6ICJyb3VuZCIsCiAgIm9wYWNpdHkiOiAxLjAsCiAgInJhZGl1cyI6IDUsCiAgInN0cm9rZSI6IHRydWUsCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFkZFRvKG1hcF8yZTQ4ZDIxMjAwMDI0NTc2OWQ4ZmU0YzM0ODI5NTY2Yik7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF83Yzc0ODI0OWRlODM0MTQxYWVhMjJjYTYyZTNjZDdkNyA9IEwucG9wdXAoe21heFdpZHRoOiAnMTAwJScKICAgICAgICAgICAgCiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF81YmE2YmM5OTM3OWE0ZWE4YmQ5YTRiNWY1ZWE3OTc0YSA9ICQoYDxkaXYgaWQ9Imh0bWxfNWJhNmJjOTkzNzlhNGVhOGJkOWE0YjVmNWVhNzk3NGEiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPlN0dWRpbyBEaXN0cmljdCwgRWFzdCBUb3JvbnRvPC9kaXY+YClbMF07CiAgICAgICAgICAgICAgICBwb3B1cF83Yzc0ODI0OWRlODM0MTQxYWVhMjJjYTYyZTNjZDdkNy5zZXRDb250ZW50KGh0bWxfNWJhNmJjOTkzNzlhNGVhOGJkOWE0YjVmNWVhNzk3NGEpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfZWVhZmE4OGU5MDNkNGI4M2I0NTMzMWNlNzQyZjAwY2MuYmluZFBvcHVwKHBvcHVwXzdjNzQ4MjQ5ZGU4MzQxNDFhZWEyMmNhNjJlM2NkN2Q3KQogICAgICAgICAgICA7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl9hYWJmOGIwMjI2NzI0NWI1ODFjMzgwODNkM2Y0M2VhYyA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjcyODAyMDUsIC03OS4zODg3OTAxXSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogImJsdWUiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICIjMzE4NmNjIiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfMmU0OGQyMTIwMDAyNDU3NjlkOGZlNGMzNDgyOTU2NmIpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfMmRhZjMzMGE5YjIyNDQ1MmFhZGIxYTVhMmY5ZDQ1OGUgPSBMLnBvcHVwKHttYXhXaWR0aDogJzEwMCUnCiAgICAgICAgICAgIAogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfOTdhMzZiNjIzYmI4NGMyMmJkOTQxZDY0OThmMWI4YzQgPSAkKGA8ZGl2IGlkPSJodG1sXzk3YTM2YjYyM2JiODRjMjJiZDk0MWQ2NDk4ZjFiOGM0IiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5MYXdyZW5jZSBQYXJrLCBDZW50cmFsIFRvcm9udG88L2Rpdj5gKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzJkYWYzMzBhOWIyMjQ0NTJhYWRiMWE1YTJmOWQ0NThlLnNldENvbnRlbnQoaHRtbF85N2EzNmI2MjNiYjg0YzIyYmQ5NDFkNjQ5OGYxYjhjNCk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl9hYWJmOGIwMjI2NzI0NWI1ODFjMzgwODNkM2Y0M2VhYy5iaW5kUG9wdXAocG9wdXBfMmRhZjMzMGE5YjIyNDQ1MmFhZGIxYTVhMmY5ZDQ1OGUpCiAgICAgICAgICAgIDsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyXzhmOGIzMjA2MzQ2ZTQ5YWM4MWU2M2E5MzY1MjIzYmU4ID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDMuNzExNjk0OCwgLTc5LjQxNjkzNTU5OTk5OTk5XSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogImJsdWUiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICIjMzE4NmNjIiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfMmU0OGQyMTIwMDAyNDU3NjlkOGZlNGMzNDgyOTU2NmIpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfNmU4NTU1NTI4OGY4NDU1NDhmNzRkODY5ZDBlNDcxMjAgPSBMLnBvcHVwKHttYXhXaWR0aDogJzEwMCUnCiAgICAgICAgICAgIAogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfOTllODI1MGU1YjdiNDRmMzg3YWFhMDkyY2ZkY2YzMGUgPSAkKGA8ZGl2IGlkPSJodG1sXzk5ZTgyNTBlNWI3YjQ0ZjM4N2FhYTA5MmNmZGNmMzBlIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5Sb3NlbGF3biwgQ2VudHJhbCBUb3JvbnRvPC9kaXY+YClbMF07CiAgICAgICAgICAgICAgICBwb3B1cF82ZTg1NTU1Mjg4Zjg0NTU0OGY3NGQ4NjlkMGU0NzEyMC5zZXRDb250ZW50KGh0bWxfOTllODI1MGU1YjdiNDRmMzg3YWFhMDkyY2ZkY2YzMGUpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfOGY4YjMyMDYzNDZlNDlhYzgxZTYzYTkzNjUyMjNiZTguYmluZFBvcHVwKHBvcHVwXzZlODU1NTUyODhmODQ1NTQ4Zjc0ZDg2OWQwZTQ3MTIwKQogICAgICAgICAgICA7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl8yMTdmMDI3YWI3MTg0MTcwYmY3ODBlMTU2NWRiZTE4OSA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjcxMjc1MTEsIC03OS4zOTAxOTc1XSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogImJsdWUiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICIjMzE4NmNjIiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfMmU0OGQyMTIwMDAyNDU3NjlkOGZlNGMzNDgyOTU2NmIpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfNDExNmY2MTc3MDM0NDQ3NDlhODM5NDM4MTZhOWVlNmIgPSBMLnBvcHVwKHttYXhXaWR0aDogJzEwMCUnCiAgICAgICAgICAgIAogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfNTZmYjU4OTdmOWFkNDQ5ODg1NTExNzBjMDFlMWUwOTggPSAkKGA8ZGl2IGlkPSJodG1sXzU2ZmI1ODk3ZjlhZDQ0OTg4NTUxMTcwYzAxZTFlMDk4IiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5EYXZpc3ZpbGxlIE5vcnRoLCBDZW50cmFsIFRvcm9udG88L2Rpdj5gKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzQxMTZmNjE3NzAzNDQ0NzQ5YTgzOTQzODE2YTllZTZiLnNldENvbnRlbnQoaHRtbF81NmZiNTg5N2Y5YWQ0NDk4ODU1MTE3MGMwMWUxZTA5OCk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl8yMTdmMDI3YWI3MTg0MTcwYmY3ODBlMTU2NWRiZTE4OS5iaW5kUG9wdXAocG9wdXBfNDExNmY2MTc3MDM0NDQ3NDlhODM5NDM4MTZhOWVlNmIpCiAgICAgICAgICAgIDsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyX2NiMmFmNDUyYzlhYjQxZjI4MzVmNDhhOGFmNmMyMGQyID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDMuNjk2OTQ3NiwgLTc5LjQxMTMwNzIwMDAwMDAxXSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogImJsdWUiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICIjMzE4NmNjIiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfMmU0OGQyMTIwMDAyNDU3NjlkOGZlNGMzNDgyOTU2NmIpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfZmVlMmFjYTkzOGIzNDFmN2JjZTQ3ODFlZjdjY2QwYTcgPSBMLnBvcHVwKHttYXhXaWR0aDogJzEwMCUnCiAgICAgICAgICAgIAogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfNDQzNjU0YjBiNmEwNDEwZGE0MzZlZGUwZDJkODczMDQgPSAkKGA8ZGl2IGlkPSJodG1sXzQ0MzY1NGIwYjZhMDQxMGRhNDM2ZWRlMGQyZDg3MzA0IiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5Gb3Jlc3QgSGlsbCBOb3J0aCxGb3Jlc3QgSGlsbCBXZXN0LCBDZW50cmFsIFRvcm9udG88L2Rpdj5gKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwX2ZlZTJhY2E5MzhiMzQxZjdiY2U0NzgxZWY3Y2NkMGE3LnNldENvbnRlbnQoaHRtbF80NDM2NTRiMGI2YTA0MTBkYTQzNmVkZTBkMmQ4NzMwNCk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl9jYjJhZjQ1MmM5YWI0MWYyODM1ZjQ4YThhZjZjMjBkMi5iaW5kUG9wdXAocG9wdXBfZmVlMmFjYTkzOGIzNDFmN2JjZTQ3ODFlZjdjY2QwYTcpCiAgICAgICAgICAgIDsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyXzFjNmFkNGUxMjY5MzQxNGI4YzdmMzRhOWM2MDlmMDc3ID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDMuNjYxNjA4MywgLTc5LjQ2NDc2MzI5OTk5OTk5XSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogImJsdWUiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICIjMzE4NmNjIiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfMmU0OGQyMTIwMDAyNDU3NjlkOGZlNGMzNDgyOTU2NmIpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfMWJkNDFhNDFkYmZiNDlmZDgxNDgwZmIyODk5MjgwZmUgPSBMLnBvcHVwKHttYXhXaWR0aDogJzEwMCUnCiAgICAgICAgICAgIAogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfODMyOTNkYjI5NDIzNDM5MWI2OGI1MmZkNWZhMmNhODIgPSAkKGA8ZGl2IGlkPSJodG1sXzgzMjkzZGIyOTQyMzQzOTFiNjhiNTJmZDVmYTJjYTgyIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5IaWdoIFBhcmssVGhlIEp1bmN0aW9uIFNvdXRoLCBXZXN0IFRvcm9udG88L2Rpdj5gKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzFiZDQxYTQxZGJmYjQ5ZmQ4MTQ4MGZiMjg5OTI4MGZlLnNldENvbnRlbnQoaHRtbF84MzI5M2RiMjk0MjM0MzkxYjY4YjUyZmQ1ZmEyY2E4Mik7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl8xYzZhZDRlMTI2OTM0MTRiOGM3ZjM0YTljNjA5ZjA3Ny5iaW5kUG9wdXAocG9wdXBfMWJkNDFhNDFkYmZiNDlmZDgxNDgwZmIyODk5MjgwZmUpCiAgICAgICAgICAgIDsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyXzYwYzczMWVmNzI0NjRkOThiZjQ5NTM4MzVjMGM1NTBlID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDMuNzE1MzgzNCwgLTc5LjQwNTY3ODQwMDAwMDAxXSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogImJsdWUiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICIjMzE4NmNjIiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfMmU0OGQyMTIwMDAyNDU3NjlkOGZlNGMzNDgyOTU2NmIpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfYTRkM2RkMWVkZTVhNGE0NWFmZGRjMTVhOWJmZTA4MjMgPSBMLnBvcHVwKHttYXhXaWR0aDogJzEwMCUnCiAgICAgICAgICAgIAogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfMjlkNmRjZTc0NzkyNDIwNzhmNjcyOTIzM2YyMjY1YzggPSAkKGA8ZGl2IGlkPSJodG1sXzI5ZDZkY2U3NDc5MjQyMDc4ZjY3MjkyMzNmMjI2NWM4IiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5Ob3J0aCBUb3JvbnRvIFdlc3QsIENlbnRyYWwgVG9yb250bzwvZGl2PmApWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfYTRkM2RkMWVkZTVhNGE0NWFmZGRjMTVhOWJmZTA4MjMuc2V0Q29udGVudChodG1sXzI5ZDZkY2U3NDc5MjQyMDc4ZjY3MjkyMzNmMjI2NWM4KTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyXzYwYzczMWVmNzI0NjRkOThiZjQ5NTM4MzVjMGM1NTBlLmJpbmRQb3B1cChwb3B1cF9hNGQzZGQxZWRlNWE0YTQ1YWZkZGMxNWE5YmZlMDgyMykKICAgICAgICAgICAgOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfNzVjMzQwZWRlYmRiNGM5ZGFmYmQ3NjcyYjUwZDA0NWMgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0My42NzI3MDk3LCAtNzkuNDA1Njc4NDAwMDAwMDFdLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwKICAiY29sb3IiOiAiYmx1ZSIsCiAgImRhc2hBcnJheSI6IG51bGwsCiAgImRhc2hPZmZzZXQiOiBudWxsLAogICJmaWxsIjogdHJ1ZSwKICAiZmlsbENvbG9yIjogIiMzMTg2Y2MiLAogICJmaWxsT3BhY2l0eSI6IDAuNywKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsCiAgImxpbmVDYXAiOiAicm91bmQiLAogICJsaW5lSm9pbiI6ICJyb3VuZCIsCiAgIm9wYWNpdHkiOiAxLjAsCiAgInJhZGl1cyI6IDUsCiAgInN0cm9rZSI6IHRydWUsCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFkZFRvKG1hcF8yZTQ4ZDIxMjAwMDI0NTc2OWQ4ZmU0YzM0ODI5NTY2Yik7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF84YjQxMjYwYjEwMDI0ODYxOGQ2NDg2ODY2MTliNDEwZSA9IEwucG9wdXAoe21heFdpZHRoOiAnMTAwJScKICAgICAgICAgICAgCiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF9hOGZkNzg2YjhlMGQ0ZWYyODIzYTU2M2M4YjVlYzBhMiA9ICQoYDxkaXYgaWQ9Imh0bWxfYThmZDc4NmI4ZTBkNGVmMjgyM2E1NjNjOGI1ZWMwYTIiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPlRoZSBBbm5leCxOb3J0aCBNaWR0b3duLFlvcmt2aWxsZSwgQ2VudHJhbCBUb3JvbnRvPC9kaXY+YClbMF07CiAgICAgICAgICAgICAgICBwb3B1cF84YjQxMjYwYjEwMDI0ODYxOGQ2NDg2ODY2MTliNDEwZS5zZXRDb250ZW50KGh0bWxfYThmZDc4NmI4ZTBkNGVmMjgyM2E1NjNjOGI1ZWMwYTIpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfNzVjMzQwZWRlYmRiNGM5ZGFmYmQ3NjcyYjUwZDA0NWMuYmluZFBvcHVwKHBvcHVwXzhiNDEyNjBiMTAwMjQ4NjE4ZDY0ODY4NjYxOWI0MTBlKQogICAgICAgICAgICA7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl9mZWZiYjhkOTZhMWM0YTliYjkxMWM4MTU2M2UzOTg2ZCA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjY0ODk1OTcsIC03OS40NTYzMjVdLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwKICAiY29sb3IiOiAiYmx1ZSIsCiAgImRhc2hBcnJheSI6IG51bGwsCiAgImRhc2hPZmZzZXQiOiBudWxsLAogICJmaWxsIjogdHJ1ZSwKICAiZmlsbENvbG9yIjogIiMzMTg2Y2MiLAogICJmaWxsT3BhY2l0eSI6IDAuNywKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsCiAgImxpbmVDYXAiOiAicm91bmQiLAogICJsaW5lSm9pbiI6ICJyb3VuZCIsCiAgIm9wYWNpdHkiOiAxLjAsCiAgInJhZGl1cyI6IDUsCiAgInN0cm9rZSI6IHRydWUsCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFkZFRvKG1hcF8yZTQ4ZDIxMjAwMDI0NTc2OWQ4ZmU0YzM0ODI5NTY2Yik7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF84Y2RmZjQ1NTIzY2M0OWZjOTg2MmY0ZmE1YWJhMmZhNCA9IEwucG9wdXAoe21heFdpZHRoOiAnMTAwJScKICAgICAgICAgICAgCiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF8yNTI3YjlkNTJlZTQ0M2Y5ODcyZTBmNDlmOWJhYWI4YSA9ICQoYDxkaXYgaWQ9Imh0bWxfMjUyN2I5ZDUyZWU0NDNmOTg3MmUwZjQ5ZjliYWFiOGEiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPlBhcmtkYWxlLFJvbmNlc3ZhbGxlcywgV2VzdCBUb3JvbnRvPC9kaXY+YClbMF07CiAgICAgICAgICAgICAgICBwb3B1cF84Y2RmZjQ1NTIzY2M0OWZjOTg2MmY0ZmE1YWJhMmZhNC5zZXRDb250ZW50KGh0bWxfMjUyN2I5ZDUyZWU0NDNmOTg3MmUwZjQ5ZjliYWFiOGEpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfZmVmYmI4ZDk2YTFjNGE5YmI5MTFjODE1NjNlMzk4NmQuYmluZFBvcHVwKHBvcHVwXzhjZGZmNDU1MjNjYzQ5ZmM5ODYyZjRmYTVhYmEyZmE0KQogICAgICAgICAgICA7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl9hMmQ3NjdiMDk3Yjc0NjkyODU1ZWI1ZDViYzlmNzA4YyA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjcwNDMyNDQsIC03OS4zODg3OTAxXSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogImJsdWUiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICIjMzE4NmNjIiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfMmU0OGQyMTIwMDAyNDU3NjlkOGZlNGMzNDgyOTU2NmIpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfZDZiYzMzYWY3MTI0NDNkNmIwZTI4ZTkyOWJiZjZlZGEgPSBMLnBvcHVwKHttYXhXaWR0aDogJzEwMCUnCiAgICAgICAgICAgIAogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfYTA1ZGEyNzJkNTUzNDg0ZGEwNGVkY2YyMDE5NGUzZjEgPSAkKGA8ZGl2IGlkPSJodG1sX2EwNWRhMjcyZDU1MzQ4NGRhMDRlZGNmMjAxOTRlM2YxIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5EYXZpc3ZpbGxlLCBDZW50cmFsIFRvcm9udG88L2Rpdj5gKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwX2Q2YmMzM2FmNzEyNDQzZDZiMGUyOGU5MjliYmY2ZWRhLnNldENvbnRlbnQoaHRtbF9hMDVkYTI3MmQ1NTM0ODRkYTA0ZWRjZjIwMTk0ZTNmMSk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl9hMmQ3NjdiMDk3Yjc0NjkyODU1ZWI1ZDViYzlmNzA4Yy5iaW5kUG9wdXAocG9wdXBfZDZiYzMzYWY3MTI0NDNkNmIwZTI4ZTkyOWJiZjZlZGEpCiAgICAgICAgICAgIDsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyX2JkYTQ1OWM0ZDlhYTQ5ZTQ5ZDhjOTIwYzNlZTIwNmQ4ID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDMuNjYyNjk1NiwgLTc5LjQwMDA0OTNdLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwKICAiY29sb3IiOiAiYmx1ZSIsCiAgImRhc2hBcnJheSI6IG51bGwsCiAgImRhc2hPZmZzZXQiOiBudWxsLAogICJmaWxsIjogdHJ1ZSwKICAiZmlsbENvbG9yIjogIiMzMTg2Y2MiLAogICJmaWxsT3BhY2l0eSI6IDAuNywKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsCiAgImxpbmVDYXAiOiAicm91bmQiLAogICJsaW5lSm9pbiI6ICJyb3VuZCIsCiAgIm9wYWNpdHkiOiAxLjAsCiAgInJhZGl1cyI6IDUsCiAgInN0cm9rZSI6IHRydWUsCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFkZFRvKG1hcF8yZTQ4ZDIxMjAwMDI0NTc2OWQ4ZmU0YzM0ODI5NTY2Yik7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF82ZTgwMmU0Y2ZkOWI0YjE1YWNiZTA4NWZjZTNiMzNiZCA9IEwucG9wdXAoe21heFdpZHRoOiAnMTAwJScKICAgICAgICAgICAgCiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF8yMjFjOTg1MThjM2I0NDZkYTY0ZmFhZDNmZGIwZjY5OSA9ICQoYDxkaXYgaWQ9Imh0bWxfMjIxYzk4NTE4YzNiNDQ2ZGE2NGZhYWQzZmRiMGY2OTkiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPkhhcmJvcmQsVW5pdmVyc2l0eSBvZiBUb3JvbnRvLCBEb3dudG93biBUb3JvbnRvPC9kaXY+YClbMF07CiAgICAgICAgICAgICAgICBwb3B1cF82ZTgwMmU0Y2ZkOWI0YjE1YWNiZTA4NWZjZTNiMzNiZC5zZXRDb250ZW50KGh0bWxfMjIxYzk4NTE4YzNiNDQ2ZGE2NGZhYWQzZmRiMGY2OTkpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfYmRhNDU5YzRkOWFhNDllNDlkOGM5MjBjM2VlMjA2ZDguYmluZFBvcHVwKHBvcHVwXzZlODAyZTRjZmQ5YjRiMTVhY2JlMDg1ZmNlM2IzM2JkKQogICAgICAgICAgICA7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl84ZmYwNjE0OTAxMGI0NzAxODVhMDcyZjI2M2JjMTdlMCA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjY1MTU3MDYsIC03OS40ODQ0NDk5XSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogImJsdWUiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICIjMzE4NmNjIiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfMmU0OGQyMTIwMDAyNDU3NjlkOGZlNGMzNDgyOTU2NmIpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfZGJjOTlmODcyZTMzNGNlMThiNjFlNjdhMmYxNGFjZWUgPSBMLnBvcHVwKHttYXhXaWR0aDogJzEwMCUnCiAgICAgICAgICAgIAogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfNmZmNGIxZGUwYzhkNDU2Zjk0ZWFkZDFiZDk3ZWE4OWIgPSAkKGA8ZGl2IGlkPSJodG1sXzZmZjRiMWRlMGM4ZDQ1NmY5NGVhZGQxYmQ5N2VhODliIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5SdW5ueW1lZGUsU3dhbnNlYSwgV2VzdCBUb3JvbnRvPC9kaXY+YClbMF07CiAgICAgICAgICAgICAgICBwb3B1cF9kYmM5OWY4NzJlMzM0Y2UxOGI2MWU2N2EyZjE0YWNlZS5zZXRDb250ZW50KGh0bWxfNmZmNGIxZGUwYzhkNDU2Zjk0ZWFkZDFiZDk3ZWE4OWIpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfOGZmMDYxNDkwMTBiNDcwMTg1YTA3MmYyNjNiYzE3ZTAuYmluZFBvcHVwKHBvcHVwX2RiYzk5Zjg3MmUzMzRjZTE4YjYxZTY3YTJmMTRhY2VlKQogICAgICAgICAgICA7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl8wOGMxOWNmZGZkYWU0ZTYzYTQ4YTU4ZDk1MmFiZjc0OSA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjY4OTU3NDMsIC03OS4zODMxNTk5MDAwMDAwMV0sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICJibHVlIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiIzMxODZjYyIsCiAgImZpbGxPcGFjaXR5IjogMC43LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYWRkVG8obWFwXzJlNDhkMjEyMDAwMjQ1NzY5ZDhmZTRjMzQ4Mjk1NjZiKTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzNkMDZkZjdlZGI0ODRkMmY4NmViZmM1NGM0OTY3ZmU2ID0gTC5wb3B1cCh7bWF4V2lkdGg6ICcxMDAlJwogICAgICAgICAgICAKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sX2JmNzQyMmI0NjI0ODRkMTlhNzg4ZmJhYmNmMzFjNjYzID0gJChgPGRpdiBpZD0iaHRtbF9iZjc0MjJiNDYyNDg0ZDE5YTc4OGZiYWJjZjMxYzY2MyIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+TW9vcmUgUGFyayxTdW1tZXJoaWxsIEVhc3QsIENlbnRyYWwgVG9yb250bzwvZGl2PmApWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfM2QwNmRmN2VkYjQ4NGQyZjg2ZWJmYzU0YzQ5NjdmZTYuc2V0Q29udGVudChodG1sX2JmNzQyMmI0NjI0ODRkMTlhNzg4ZmJhYmNmMzFjNjYzKTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyXzA4YzE5Y2ZkZmRhZTRlNjNhNDhhNThkOTUyYWJmNzQ5LmJpbmRQb3B1cChwb3B1cF8zZDA2ZGY3ZWRiNDg0ZDJmODZlYmZjNTRjNDk2N2ZlNikKICAgICAgICAgICAgOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfMTkxMDc0YTcyNTMyNDA0ZjllNjYyZWUxZTVkNjk3YmUgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0My42NTMyMDU3LCAtNzkuNDAwMDQ5M10sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICJibHVlIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiIzMxODZjYyIsCiAgImZpbGxPcGFjaXR5IjogMC43LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYWRkVG8obWFwXzJlNDhkMjEyMDAwMjQ1NzY5ZDhmZTRjMzQ4Mjk1NjZiKTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwX2I4Y2ZiNTdlZjNiODQ4ZjQ4OWNiZTg0NTdiZGY1ODU4ID0gTC5wb3B1cCh7bWF4V2lkdGg6ICcxMDAlJwogICAgICAgICAgICAKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzgwMDFkZGIzZTYwMzQwZjFiZDY2ZDQxZTFiZDM0ZjZlID0gJChgPGRpdiBpZD0iaHRtbF84MDAxZGRiM2U2MDM0MGYxYmQ2NmQ0MWUxYmQzNGY2ZSIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+Q2hpbmF0b3duLEdyYW5nZSBQYXJrLEtlbnNpbmd0b24gTWFya2V0LCBEb3dudG93biBUb3JvbnRvPC9kaXY+YClbMF07CiAgICAgICAgICAgICAgICBwb3B1cF9iOGNmYjU3ZWYzYjg0OGY0ODljYmU4NDU3YmRmNTg1OC5zZXRDb250ZW50KGh0bWxfODAwMWRkYjNlNjAzNDBmMWJkNjZkNDFlMWJkMzRmNmUpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfMTkxMDc0YTcyNTMyNDA0ZjllNjYyZWUxZTVkNjk3YmUuYmluZFBvcHVwKHBvcHVwX2I4Y2ZiNTdlZjNiODQ4ZjQ4OWNiZTg0NTdiZGY1ODU4KQogICAgICAgICAgICA7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl8xMGM0YTg0OWM1NTg0YjYzYmEwMWZhOTE1ZjM0ZDY0MiA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjY4NjQxMjI5OTk5OTk5LCAtNzkuNDAwMDQ5M10sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICJibHVlIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiIzMxODZjYyIsCiAgImZpbGxPcGFjaXR5IjogMC43LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYWRkVG8obWFwXzJlNDhkMjEyMDAwMjQ1NzY5ZDhmZTRjMzQ4Mjk1NjZiKTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwX2FjYjVhMjQ1YzAzMDRiMzBhOWQxOTdmYTBmM2RmYjE4ID0gTC5wb3B1cCh7bWF4V2lkdGg6ICcxMDAlJwogICAgICAgICAgICAKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzFmM2VlNjNjOTdjYzQxOTVhNjg4NDAwZDBhNTJlZTFmID0gJChgPGRpdiBpZD0iaHRtbF8xZjNlZTYzYzk3Y2M0MTk1YTY4ODQwMGQwYTUyZWUxZiIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+RGVlciBQYXJrLEZvcmVzdCBIaWxsIFNFLFJhdGhuZWxseSxTb3V0aCBIaWxsLFN1bW1lcmhpbGwgV2VzdCwgQ2VudHJhbCBUb3JvbnRvPC9kaXY+YClbMF07CiAgICAgICAgICAgICAgICBwb3B1cF9hY2I1YTI0NWMwMzA0YjMwYTlkMTk3ZmEwZjNkZmIxOC5zZXRDb250ZW50KGh0bWxfMWYzZWU2M2M5N2NjNDE5NWE2ODg0MDBkMGE1MmVlMWYpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfMTBjNGE4NDljNTU4NGI2M2JhMDFmYTkxNWYzNGQ2NDIuYmluZFBvcHVwKHBvcHVwX2FjYjVhMjQ1YzAzMDRiMzBhOWQxOTdmYTBmM2RmYjE4KQogICAgICAgICAgICA7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl82MGZiNDFiZDUwODc0ZjEyYjU1NjAyNTExZjJiMzEyMyA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjYyODk0NjcsIC03OS4zOTQ0MTk5XSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogImJsdWUiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICIjMzE4NmNjIiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfMmU0OGQyMTIwMDAyNDU3NjlkOGZlNGMzNDgyOTU2NmIpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfM2JlMjJlYmFiM2ZhNGEwNWI1YzIzMTQ2N2RmYWNjMzMgPSBMLnBvcHVwKHttYXhXaWR0aDogJzEwMCUnCiAgICAgICAgICAgIAogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfNjA0ZjEwMmU2M2U2NGY3ZTljYzA4NWM2ODJhYzY4MTcgPSAkKGA8ZGl2IGlkPSJodG1sXzYwNGYxMDJlNjNlNjRmN2U5Y2MwODVjNjgyYWM2ODE3IiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5DTiBUb3dlcixCYXRodXJzdCBRdWF5LElzbGFuZCBhaXJwb3J0LEhhcmJvdXJmcm9udCBXZXN0LEtpbmcgYW5kIFNwYWRpbmEsUmFpbHdheSBMYW5kcyxTb3V0aCBOaWFnYXJhLCBEb3dudG93biBUb3JvbnRvPC9kaXY+YClbMF07CiAgICAgICAgICAgICAgICBwb3B1cF8zYmUyMmViYWIzZmE0YTA1YjVjMjMxNDY3ZGZhY2MzMy5zZXRDb250ZW50KGh0bWxfNjA0ZjEwMmU2M2U2NGY3ZTljYzA4NWM2ODJhYzY4MTcpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfNjBmYjQxYmQ1MDg3NGYxMmI1NTYwMjUxMWYyYjMxMjMuYmluZFBvcHVwKHBvcHVwXzNiZTIyZWJhYjNmYTRhMDViNWMyMzE0NjdkZmFjYzMzKQogICAgICAgICAgICA7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl84ZDg0OGE1NzBiODM0MzU2YjMxYTM1ZWNmNjBkNTZlNyA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjY3OTU2MjYsIC03OS4zNzc1Mjk0MDAwMDAwMV0sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICJibHVlIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiIzMxODZjYyIsCiAgImZpbGxPcGFjaXR5IjogMC43LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYWRkVG8obWFwXzJlNDhkMjEyMDAwMjQ1NzY5ZDhmZTRjMzQ4Mjk1NjZiKTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwX2ZkYjU5NjhhNTU1YTQ4ZDdiNzZiOGZmN2I1YTJkMzBjID0gTC5wb3B1cCh7bWF4V2lkdGg6ICcxMDAlJwogICAgICAgICAgICAKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzlmMzIwZWJmNWIyZjRmNTQ5NjFjMDVkYmYzMGQ3N2Y2ID0gJChgPGRpdiBpZD0iaHRtbF85ZjMyMGViZjViMmY0ZjU0OTYxYzA1ZGJmMzBkNzdmNiIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+Um9zZWRhbGUsIERvd250b3duIFRvcm9udG88L2Rpdj5gKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwX2ZkYjU5NjhhNTU1YTQ4ZDdiNzZiOGZmN2I1YTJkMzBjLnNldENvbnRlbnQoaHRtbF85ZjMyMGViZjViMmY0ZjU0OTYxYzA1ZGJmMzBkNzdmNik7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl84ZDg0OGE1NzBiODM0MzU2YjMxYTM1ZWNmNjBkNTZlNy5iaW5kUG9wdXAocG9wdXBfZmRiNTk2OGE1NTVhNDhkN2I3NmI4ZmY3YjVhMmQzMGMpCiAgICAgICAgICAgIDsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyXzEzMGVhZTcxNDQ5NDQwMjk4ZWRiMGEyNTcxN2JkNzc4ID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDMuNjQ2NDM1MiwgLTc5LjM3NDg0NTk5OTk5OTk5XSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogImJsdWUiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICIjMzE4NmNjIiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfMmU0OGQyMTIwMDAyNDU3NjlkOGZlNGMzNDgyOTU2NmIpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfNzVkYTJjYjdjYzY5NDU5ZmEzNWVjNWJjODY5MmRjZDkgPSBMLnBvcHVwKHttYXhXaWR0aDogJzEwMCUnCiAgICAgICAgICAgIAogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfZDRhMTcyNTQ1OWExNDExOThmYzI2OTA4MzczMjMzY2UgPSAkKGA8ZGl2IGlkPSJodG1sX2Q0YTE3MjU0NTlhMTQxMTk4ZmMyNjkwODM3MzIzM2NlIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5TdG4gQSBQTyBCb3hlcyAyNSBUaGUgRXNwbGFuYWRlLCBEb3dudG93biBUb3JvbnRvPC9kaXY+YClbMF07CiAgICAgICAgICAgICAgICBwb3B1cF83NWRhMmNiN2NjNjk0NTlmYTM1ZWM1YmM4NjkyZGNkOS5zZXRDb250ZW50KGh0bWxfZDRhMTcyNTQ1OWExNDExOThmYzI2OTA4MzczMjMzY2UpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfMTMwZWFlNzE0NDk0NDAyOThlZGIwYTI1NzE3YmQ3NzguYmluZFBvcHVwKHBvcHVwXzc1ZGEyY2I3Y2M2OTQ1OWZhMzVlYzViYzg2OTJkY2Q5KQogICAgICAgICAgICA7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl9iZDQ5M2JkYTZmZDY0NGE0OTQxN2JkZDA5ZWQyYTJmOCA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjY2Nzk2NywgLTc5LjM2NzY3NTNdLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwKICAiY29sb3IiOiAiYmx1ZSIsCiAgImRhc2hBcnJheSI6IG51bGwsCiAgImRhc2hPZmZzZXQiOiBudWxsLAogICJmaWxsIjogdHJ1ZSwKICAiZmlsbENvbG9yIjogIiMzMTg2Y2MiLAogICJmaWxsT3BhY2l0eSI6IDAuNywKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsCiAgImxpbmVDYXAiOiAicm91bmQiLAogICJsaW5lSm9pbiI6ICJyb3VuZCIsCiAgIm9wYWNpdHkiOiAxLjAsCiAgInJhZGl1cyI6IDUsCiAgInN0cm9rZSI6IHRydWUsCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFkZFRvKG1hcF8yZTQ4ZDIxMjAwMDI0NTc2OWQ4ZmU0YzM0ODI5NTY2Yik7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF9jYWY2YWZiMzM3MGY0YTRiYjIzNDI1NWEyNzIxYTIxZCA9IEwucG9wdXAoe21heFdpZHRoOiAnMTAwJScKICAgICAgICAgICAgCiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF9kZDgwMTNiZTdmYTA0ZmQ4ODRjNmI1ZDJjNTI3NTY1ZSA9ICQoYDxkaXYgaWQ9Imh0bWxfZGQ4MDEzYmU3ZmEwNGZkODg0YzZiNWQyYzUyNzU2NWUiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPkNhYmJhZ2V0b3duLFN0LiBKYW1lcyBUb3duLCBEb3dudG93biBUb3JvbnRvPC9kaXY+YClbMF07CiAgICAgICAgICAgICAgICBwb3B1cF9jYWY2YWZiMzM3MGY0YTRiYjIzNDI1NWEyNzIxYTIxZC5zZXRDb250ZW50KGh0bWxfZGQ4MDEzYmU3ZmEwNGZkODg0YzZiNWQyYzUyNzU2NWUpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfYmQ0OTNiZGE2ZmQ2NDRhNDk0MTdiZGQwOWVkMmEyZjguYmluZFBvcHVwKHBvcHVwX2NhZjZhZmIzMzcwZjRhNGJiMjM0MjU1YTI3MjFhMjFkKQogICAgICAgICAgICA7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl84MTI1ZjFkZjY1ODA0NjQ0YWZlODMzMTYzYzA2YmEwOSA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjY0ODQyOTIsIC03OS4zODIyODAyXSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogImJsdWUiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICIjMzE4NmNjIiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfMmU0OGQyMTIwMDAyNDU3NjlkOGZlNGMzNDgyOTU2NmIpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfNTA2ODRmYTY5MmJiNDc2ZGIyZGE2ZjYxZDAzMDhhZGUgPSBMLnBvcHVwKHttYXhXaWR0aDogJzEwMCUnCiAgICAgICAgICAgIAogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfNmZmYjBlZDQ1NWEyNDUxZWI0ZjQ1OTdlZGJhMjIyN2QgPSAkKGA8ZGl2IGlkPSJodG1sXzZmZmIwZWQ0NTVhMjQ1MWViNGY0NTk3ZWRiYTIyMjdkIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5GaXJzdCBDYW5hZGlhbiBQbGFjZSxVbmRlcmdyb3VuZCBjaXR5LCBEb3dudG93biBUb3JvbnRvPC9kaXY+YClbMF07CiAgICAgICAgICAgICAgICBwb3B1cF81MDY4NGZhNjkyYmI0NzZkYjJkYTZmNjFkMDMwOGFkZS5zZXRDb250ZW50KGh0bWxfNmZmYjBlZDQ1NWEyNDUxZWI0ZjQ1OTdlZGJhMjIyN2QpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfODEyNWYxZGY2NTgwNDY0NGFmZTgzMzE2M2MwNmJhMDkuYmluZFBvcHVwKHBvcHVwXzUwNjg0ZmE2OTJiYjQ3NmRiMmRhNmY2MWQwMzA4YWRlKQogICAgICAgICAgICA7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl82ZjhjYWI4MWRhODc0MzE0ODIzOWFjYzczZDE4MzY5YyA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjY2NTg1OTksIC03OS4zODMxNTk5MDAwMDAwMV0sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICJibHVlIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiIzMxODZjYyIsCiAgImZpbGxPcGFjaXR5IjogMC43LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYWRkVG8obWFwXzJlNDhkMjEyMDAwMjQ1NzY5ZDhmZTRjMzQ4Mjk1NjZiKTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwX2IxNmE4YjM0ODQxYTQ1Njc4NGI4MDhmODAyMGRlMmU0ID0gTC5wb3B1cCh7bWF4V2lkdGg6ICcxMDAlJwogICAgICAgICAgICAKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzJjZGUyZGFmZjM4YjQ2YjdiNDM0NDM4M2FmZWUxMzIyID0gJChgPGRpdiBpZD0iaHRtbF8yY2RlMmRhZmYzOGI0NmI3YjQzNDQzODNhZmVlMTMyMiIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+Q2h1cmNoIGFuZCBXZWxsZXNsZXksIERvd250b3duIFRvcm9udG88L2Rpdj5gKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwX2IxNmE4YjM0ODQxYTQ1Njc4NGI4MDhmODAyMGRlMmU0LnNldENvbnRlbnQoaHRtbF8yY2RlMmRhZmYzOGI0NmI3YjQzNDQzODNhZmVlMTMyMik7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl82ZjhjYWI4MWRhODc0MzE0ODIzOWFjYzczZDE4MzY5Yy5iaW5kUG9wdXAocG9wdXBfYjE2YThiMzQ4NDFhNDU2Nzg0YjgwOGY4MDIwZGUyZTQpCiAgICAgICAgICAgIDsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyXzdkNGMyZjc1N2U0ZDQyOTA4Zjg5ZTQ5ZThiNjJkNTJiID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDMuNjYyNzQzOSwgLTc5LjMyMTU1OF0sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICJibHVlIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiIzMxODZjYyIsCiAgImZpbGxPcGFjaXR5IjogMC43LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYWRkVG8obWFwXzJlNDhkMjEyMDAwMjQ1NzY5ZDhmZTRjMzQ4Mjk1NjZiKTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzE5MzI5NmRjZWU2YzQ3Y2VhYzY0OTEwNTZkY2MyZjlmID0gTC5wb3B1cCh7bWF4V2lkdGg6ICcxMDAlJwogICAgICAgICAgICAKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzM0NGUwMmI3ZjkzYTQxYWE5NzkwMDNlYzJiNGJlMzg1ID0gJChgPGRpdiBpZD0iaHRtbF8zNDRlMDJiN2Y5M2E0MWFhOTc5MDAzZWMyYjRiZTM4NSIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+QnVzaW5lc3MgUmVwbHkgTWFpbCBQcm9jZXNzaW5nIENlbnRyZSA5NjkgRWFzdGVybiwgRWFzdCBUb3JvbnRvPC9kaXY+YClbMF07CiAgICAgICAgICAgICAgICBwb3B1cF8xOTMyOTZkY2VlNmM0N2NlYWM2NDkxMDU2ZGNjMmY5Zi5zZXRDb250ZW50KGh0bWxfMzQ0ZTAyYjdmOTNhNDFhYTk3OTAwM2VjMmI0YmUzODUpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfN2Q0YzJmNzU3ZTRkNDI5MDhmODllNDllOGI2MmQ1MmIuYmluZFBvcHVwKHBvcHVwXzE5MzI5NmRjZWU2YzQ3Y2VhYzY0OTEwNTZkY2MyZjlmKQogICAgICAgICAgICA7CgogICAgICAgICAgICAKICAgICAgICAKPC9zY3JpcHQ+" style="position:absolute;width:100%;height:100%;left:0;top:0;border:none !important;" allowfullscreen webkitallowfullscreen mozallowfullscreen></iframe></div></div>




```python
CLIENT_ID = '' # your Foursquare ID
CLIENT_SECRET = '' # your Foursquare Secret

radius = 500
LIMIT = 100

VERSION = '20180605' # Foursquare API version

print('Your credentails:')
print('CLIENT_ID: ' + CLIENT_ID)
print('CLIENT_SECRET:' + CLIENT_SECRET)
```

<h3>Define function for venues in Boroughs distance 500m and limit 100</h3>


```python
def getNearbyVenues(bs ,names, latitudes, longitudes, radius=500):
    
    venues_list=[]
    for b, name, lat, lng in zip(bs, names, latitudes, longitudes):
        print(name+ " " + b)
            
        # create the API request URL
        url = 'https://api.foursquare.com/v2/venues/explore?&client_id={}&client_secret={}&v={}&ll={},{}&radius={}&limit={}'.format(
            CLIENT_ID, 
            CLIENT_SECRET, 
            VERSION, 
            lat, 
            lng, 
            radius, 
            LIMIT)
            
        # make the GET request
        results = requests.get(url).json()["response"]['groups'][0]['items']
        
        # return only relevant information for each nearby venue
        venues_list.append([(
            name, 
            lat, 
            lng, 
            v['venue']['name'], 
            v['venue']['location']['lat'], 
            v['venue']['location']['lng'],  
            v['venue']['categories'][0]['name']) for v in results])

    nearby_venues = pd.DataFrame([item for venue_list in venues_list for item in venue_list])
    nearby_venues.columns = ['Neighborhood', 
                  'Neighborhood Latitude', 
                  'Neighborhood Longitude', 
                  'Venue', 
                  'Venue Latitude', 
                  'Venue Longitude', 
                  'Venue Category']
    
    return(nearby_venues)
```

<h3>Use function for API calls and add nearby venues</h3>


```python
toronto_venues = getNearbyVenues(bs=df['Borough'],names=df['Neighbourhood'],
                                   latitudes=df['Latitude'],
                                   longitudes=df['Longitude']
                                  )

```

    Harbourfront,Regent Park Downtown Toronto
    Ryerson,Garden District Downtown Toronto
    St. James Town Downtown Toronto
    The Beaches East Toronto
    Berczy Park Downtown Toronto
    Central Bay Street Downtown Toronto
    Christie Downtown Toronto
    Adelaide,King,Richmond Downtown Toronto
    Dovercourt Village,Dufferin West Toronto
    Harbourfront East,Toronto Islands,Union Station Downtown Toronto
    Little Portugal,Trinity West Toronto
    The Danforth West,Riverdale East Toronto
    Design Exchange,Toronto Dominion Centre Downtown Toronto
    Brockton,Exhibition Place,Parkdale Village West Toronto
    The Beaches West,India Bazaar East Toronto
    Commerce Court,Victoria Hotel Downtown Toronto
    Studio District East Toronto
    Lawrence Park Central Toronto
    Roselawn Central Toronto
    Davisville North Central Toronto
    Forest Hill North,Forest Hill West Central Toronto
    High Park,The Junction South West Toronto
    North Toronto West Central Toronto
    The Annex,North Midtown,Yorkville Central Toronto
    Parkdale,Roncesvalles West Toronto
    Davisville Central Toronto
    Harbord,University of Toronto Downtown Toronto
    Runnymede,Swansea West Toronto
    Moore Park,Summerhill East Central Toronto
    Chinatown,Grange Park,Kensington Market Downtown Toronto
    Deer Park,Forest Hill SE,Rathnelly,South Hill,Summerhill West Central Toronto
    CN Tower,Bathurst Quay,Island airport,Harbourfront West,King and Spadina,Railway Lands,South Niagara Downtown Toronto
    Rosedale Downtown Toronto
    Stn A PO Boxes 25 The Esplanade Downtown Toronto
    Cabbagetown,St. James Town Downtown Toronto
    First Canadian Place,Underground city Downtown Toronto
    Church and Wellesley Downtown Toronto
    Business Reply Mail Processing Centre 969 Eastern East Toronto


<h3>check returned DF of venues</h3>


```python
print(toronto_venues.shape)
toronto_venues.head()
```

    (1717, 7)





<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Neighborhood</th>
      <th>Neighborhood Latitude</th>
      <th>Neighborhood Longitude</th>
      <th>Venue</th>
      <th>Venue Latitude</th>
      <th>Venue Longitude</th>
      <th>Venue Category</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Harbourfront,Regent Park</td>
      <td>43.65426</td>
      <td>-79.360636</td>
      <td>Roselle Desserts</td>
      <td>43.653447</td>
      <td>-79.362017</td>
      <td>Bakery</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Harbourfront,Regent Park</td>
      <td>43.65426</td>
      <td>-79.360636</td>
      <td>Tandem Coffee</td>
      <td>43.653559</td>
      <td>-79.361809</td>
      <td>Coffee Shop</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Harbourfront,Regent Park</td>
      <td>43.65426</td>
      <td>-79.360636</td>
      <td>Toronto Cooper Koo Family Cherry St YMCA Centre</td>
      <td>43.653191</td>
      <td>-79.357947</td>
      <td>Gym / Fitness Center</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Harbourfront,Regent Park</td>
      <td>43.65426</td>
      <td>-79.360636</td>
      <td>Body Blitz Spa East</td>
      <td>43.654735</td>
      <td>-79.359874</td>
      <td>Spa</td>
    </tr>
    <tr>
      <th>4</th>
      <td>Harbourfront,Regent Park</td>
      <td>43.65426</td>
      <td>-79.360636</td>
      <td>Impact Kitchen</td>
      <td>43.656369</td>
      <td>-79.356980</td>
      <td>Restaurant</td>
    </tr>
  </tbody>
</table>
</div>



<h3>Print all distinct categories</h3>


```python
print('There are {} uniques categories.'.format(len(toronto_venues['Venue Category'].unique())))
```

    There are 239 uniques categories.


<h3>Pivot Venue category to columns and arrange Columns</h3>


```python
# one hot encoding
toronto_onehot = pd.get_dummies(toronto_venues[['Venue Category']], prefix="", prefix_sep="")
#print(toronto_onehot['Neighborhood'])
# add neighborhood column back to dataframe
toronto_onehot['Neighborhood'] = toronto_venues['Neighborhood'] 

# move neighborhood column to the first column
fixed_columns = [toronto_onehot.columns[-1]] + list(toronto_onehot.columns[:-1])
toronto_onehot = toronto_onehot[fixed_columns]

toronto_onehot.head()
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Yoga Studio</th>
      <th>Accessories Store</th>
      <th>Afghan Restaurant</th>
      <th>Airport</th>
      <th>Airport Food Court</th>
      <th>Airport Gate</th>
      <th>Airport Lounge</th>
      <th>Airport Service</th>
      <th>Airport Terminal</th>
      <th>American Restaurant</th>
      <th>Antique Shop</th>
      <th>Aquarium</th>
      <th>Art Gallery</th>
      <th>Art Museum</th>
      <th>Arts &amp; Crafts Store</th>
      <th>Asian Restaurant</th>
      <th>Athletics &amp; Sports</th>
      <th>Auto Workshop</th>
      <th>BBQ Joint</th>
      <th>Baby Store</th>
      <th>Bagel Shop</th>
      <th>Bakery</th>
      <th>Bank</th>
      <th>Bar</th>
      <th>Baseball Stadium</th>
      <th>Basketball Stadium</th>
      <th>Beach</th>
      <th>Bed &amp; Breakfast</th>
      <th>Beer Bar</th>
      <th>Beer Store</th>
      <th>Belgian Restaurant</th>
      <th>Bistro</th>
      <th>Board Shop</th>
      <th>Boat or Ferry</th>
      <th>Bookstore</th>
      <th>Boutique</th>
      <th>Brazilian Restaurant</th>
      <th>Breakfast Spot</th>
      <th>Brewery</th>
      <th>Bubble Tea Shop</th>
      <th>...</th>
      <th>Shopping Mall</th>
      <th>Skate Park</th>
      <th>Skating Rink</th>
      <th>Smoke Shop</th>
      <th>Smoothie Shop</th>
      <th>Snack Place</th>
      <th>Soup Place</th>
      <th>Southern / Soul Food Restaurant</th>
      <th>Spa</th>
      <th>Speakeasy</th>
      <th>Sporting Goods Shop</th>
      <th>Sports Bar</th>
      <th>Stadium</th>
      <th>Stationery Store</th>
      <th>Steakhouse</th>
      <th>Strip Club</th>
      <th>Supermarket</th>
      <th>Sushi Restaurant</th>
      <th>Swim School</th>
      <th>Taco Place</th>
      <th>Tailor Shop</th>
      <th>Taiwanese Restaurant</th>
      <th>Tanning Salon</th>
      <th>Tapas Restaurant</th>
      <th>Tea Room</th>
      <th>Tennis Court</th>
      <th>Thai Restaurant</th>
      <th>Theater</th>
      <th>Theme Restaurant</th>
      <th>Thrift / Vintage Store</th>
      <th>Toy / Game Store</th>
      <th>Trail</th>
      <th>Train Station</th>
      <th>Transportation Service</th>
      <th>Vegetarian / Vegan Restaurant</th>
      <th>Video Game Store</th>
      <th>Vietnamese Restaurant</th>
      <th>Wine Bar</th>
      <th>Wings Joint</th>
      <th>Women's Store</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>3</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>4</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
  </tbody>
</table>
<p>5 rows  239 columns</p>
</div>



<h3>Statistics for mean as basis for clustering</h3>


```python
toronto_grouped = toronto_onehot.groupby('Neighborhood').mean().reset_index()
toronto_grouped.head()
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Neighborhood</th>
      <th>Yoga Studio</th>
      <th>Accessories Store</th>
      <th>Afghan Restaurant</th>
      <th>Airport</th>
      <th>Airport Food Court</th>
      <th>Airport Gate</th>
      <th>Airport Lounge</th>
      <th>Airport Service</th>
      <th>Airport Terminal</th>
      <th>American Restaurant</th>
      <th>Antique Shop</th>
      <th>Aquarium</th>
      <th>Art Gallery</th>
      <th>Art Museum</th>
      <th>Arts &amp; Crafts Store</th>
      <th>Asian Restaurant</th>
      <th>Athletics &amp; Sports</th>
      <th>Auto Workshop</th>
      <th>BBQ Joint</th>
      <th>Baby Store</th>
      <th>Bagel Shop</th>
      <th>Bakery</th>
      <th>Bank</th>
      <th>Bar</th>
      <th>Baseball Stadium</th>
      <th>Basketball Stadium</th>
      <th>Beach</th>
      <th>Bed &amp; Breakfast</th>
      <th>Beer Bar</th>
      <th>Beer Store</th>
      <th>Belgian Restaurant</th>
      <th>Bistro</th>
      <th>Board Shop</th>
      <th>Boat or Ferry</th>
      <th>Bookstore</th>
      <th>Boutique</th>
      <th>Brazilian Restaurant</th>
      <th>Breakfast Spot</th>
      <th>Brewery</th>
      <th>...</th>
      <th>Shopping Mall</th>
      <th>Skate Park</th>
      <th>Skating Rink</th>
      <th>Smoke Shop</th>
      <th>Smoothie Shop</th>
      <th>Snack Place</th>
      <th>Soup Place</th>
      <th>Southern / Soul Food Restaurant</th>
      <th>Spa</th>
      <th>Speakeasy</th>
      <th>Sporting Goods Shop</th>
      <th>Sports Bar</th>
      <th>Stadium</th>
      <th>Stationery Store</th>
      <th>Steakhouse</th>
      <th>Strip Club</th>
      <th>Supermarket</th>
      <th>Sushi Restaurant</th>
      <th>Swim School</th>
      <th>Taco Place</th>
      <th>Tailor Shop</th>
      <th>Taiwanese Restaurant</th>
      <th>Tanning Salon</th>
      <th>Tapas Restaurant</th>
      <th>Tea Room</th>
      <th>Tennis Court</th>
      <th>Thai Restaurant</th>
      <th>Theater</th>
      <th>Theme Restaurant</th>
      <th>Thrift / Vintage Store</th>
      <th>Toy / Game Store</th>
      <th>Trail</th>
      <th>Train Station</th>
      <th>Transportation Service</th>
      <th>Vegetarian / Vegan Restaurant</th>
      <th>Video Game Store</th>
      <th>Vietnamese Restaurant</th>
      <th>Wine Bar</th>
      <th>Wings Joint</th>
      <th>Women's Store</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Adelaide,King,Richmond</td>
      <td>0.000000</td>
      <td>0.01</td>
      <td>0.0</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.03</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.010000</td>
      <td>0.01</td>
      <td>0.0</td>
      <td>0.03</td>
      <td>0.0</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.0</td>
      <td>0.000000</td>
      <td>0.020000</td>
      <td>0.0</td>
      <td>0.040000</td>
      <td>0.0</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.0</td>
      <td>0.000000</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.000000</td>
      <td>0.0</td>
      <td>0.000000</td>
      <td>0.01</td>
      <td>0.000000</td>
      <td>0.01</td>
      <td>0.020000</td>
      <td>0.000000</td>
      <td>...</td>
      <td>0.010000</td>
      <td>0.000000</td>
      <td>0.0</td>
      <td>0.010000</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.000000</td>
      <td>0.01</td>
      <td>0.000000</td>
      <td>0.0</td>
      <td>0.00</td>
      <td>0.0</td>
      <td>0.030000</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.03</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.000000</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.000000</td>
      <td>0.0</td>
      <td>0.040000</td>
      <td>0.01</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.010000</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.01</td>
      <td>0.0</td>
      <td>0.01</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Berczy Park</td>
      <td>0.000000</td>
      <td>0.00</td>
      <td>0.0</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.00</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.018182</td>
      <td>0.00</td>
      <td>0.0</td>
      <td>0.00</td>
      <td>0.0</td>
      <td>0.000000</td>
      <td>0.018182</td>
      <td>0.0</td>
      <td>0.018182</td>
      <td>0.036364</td>
      <td>0.0</td>
      <td>0.000000</td>
      <td>0.0</td>
      <td>0.018182</td>
      <td>0.018182</td>
      <td>0.0</td>
      <td>0.036364</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.018182</td>
      <td>0.0</td>
      <td>0.000000</td>
      <td>0.00</td>
      <td>0.000000</td>
      <td>0.00</td>
      <td>0.018182</td>
      <td>0.000000</td>
      <td>...</td>
      <td>0.018182</td>
      <td>0.000000</td>
      <td>0.0</td>
      <td>0.000000</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.000000</td>
      <td>0.00</td>
      <td>0.018182</td>
      <td>0.0</td>
      <td>0.00</td>
      <td>0.0</td>
      <td>0.036364</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.00</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.018182</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.018182</td>
      <td>0.0</td>
      <td>0.018182</td>
      <td>0.00</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.018182</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.00</td>
      <td>0.0</td>
      <td>0.00</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Brockton,Exhibition Place,Parkdale Village</td>
      <td>0.040000</td>
      <td>0.00</td>
      <td>0.0</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.00</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.000000</td>
      <td>0.00</td>
      <td>0.0</td>
      <td>0.00</td>
      <td>0.0</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.0</td>
      <td>0.000000</td>
      <td>0.080000</td>
      <td>0.0</td>
      <td>0.040000</td>
      <td>0.0</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.0</td>
      <td>0.000000</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.000000</td>
      <td>0.0</td>
      <td>0.000000</td>
      <td>0.00</td>
      <td>0.000000</td>
      <td>0.00</td>
      <td>0.080000</td>
      <td>0.000000</td>
      <td>...</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.0</td>
      <td>0.000000</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.000000</td>
      <td>0.00</td>
      <td>0.000000</td>
      <td>0.0</td>
      <td>0.04</td>
      <td>0.0</td>
      <td>0.000000</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.00</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.000000</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.000000</td>
      <td>0.0</td>
      <td>0.000000</td>
      <td>0.00</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.000000</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.00</td>
      <td>0.0</td>
      <td>0.00</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Business Reply Mail Processing Centre 969 Eastern</td>
      <td>0.058824</td>
      <td>0.00</td>
      <td>0.0</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.00</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.000000</td>
      <td>0.00</td>
      <td>0.0</td>
      <td>0.00</td>
      <td>0.0</td>
      <td>0.058824</td>
      <td>0.000000</td>
      <td>0.0</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.0</td>
      <td>0.000000</td>
      <td>0.0</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.0</td>
      <td>0.000000</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.000000</td>
      <td>0.0</td>
      <td>0.000000</td>
      <td>0.00</td>
      <td>0.000000</td>
      <td>0.00</td>
      <td>0.000000</td>
      <td>0.058824</td>
      <td>...</td>
      <td>0.000000</td>
      <td>0.058824</td>
      <td>0.0</td>
      <td>0.058824</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.058824</td>
      <td>0.00</td>
      <td>0.000000</td>
      <td>0.0</td>
      <td>0.00</td>
      <td>0.0</td>
      <td>0.000000</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.00</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.000000</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.000000</td>
      <td>0.0</td>
      <td>0.000000</td>
      <td>0.00</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.000000</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.00</td>
      <td>0.0</td>
      <td>0.00</td>
    </tr>
    <tr>
      <th>4</th>
      <td>CN Tower,Bathurst Quay,Island airport,Harbourf...</td>
      <td>0.000000</td>
      <td>0.00</td>
      <td>0.0</td>
      <td>0.071429</td>
      <td>0.071429</td>
      <td>0.071429</td>
      <td>0.142857</td>
      <td>0.142857</td>
      <td>0.071429</td>
      <td>0.00</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.000000</td>
      <td>0.00</td>
      <td>0.0</td>
      <td>0.00</td>
      <td>0.0</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.0</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.0</td>
      <td>0.071429</td>
      <td>0.0</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.0</td>
      <td>0.000000</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.000000</td>
      <td>0.0</td>
      <td>0.071429</td>
      <td>0.00</td>
      <td>0.071429</td>
      <td>0.00</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>...</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.0</td>
      <td>0.000000</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.000000</td>
      <td>0.00</td>
      <td>0.000000</td>
      <td>0.0</td>
      <td>0.00</td>
      <td>0.0</td>
      <td>0.000000</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.00</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.000000</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.000000</td>
      <td>0.0</td>
      <td>0.000000</td>
      <td>0.00</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.000000</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.00</td>
      <td>0.0</td>
      <td>0.00</td>
    </tr>
  </tbody>
</table>
<p>5 rows  239 columns</p>
</div>



<h3>Function for Sorted venues</h3>


```python
def return_most_common_venues(row, num_top_venues):
    row_categories = row.iloc[1:]
    row_categories_sorted = row_categories.sort_values(ascending=False)
    
    return row_categories_sorted.index.values[0:num_top_venues]
```

<h3>Build in descending order of popularity of venues based on mean </h3>


```python
num_top_venues = 10

indicators = ['st', 'nd', 'rd']

# create columns according to number of top venues
columns = ['Neighborhood']
for ind in np.arange(num_top_venues):
    try:
        columns.append('{}{} Most Common Venue'.format(ind+1, indicators[ind]))
    except:
        columns.append('{}th Most Common Venue'.format(ind+1))

# create a new dataframe
neighborhoods_venues_sorted = pd.DataFrame(columns=columns)
neighborhoods_venues_sorted['Neighborhood'] = toronto_grouped['Neighborhood']

for ind in np.arange(toronto_grouped.shape[0]):
    neighborhoods_venues_sorted.iloc[ind, 1:] = return_most_common_venues(toronto_grouped.iloc[ind, :], num_top_venues)

neighborhoods_venues_sorted.head()
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Neighborhood</th>
      <th>1st Most Common Venue</th>
      <th>2nd Most Common Venue</th>
      <th>3rd Most Common Venue</th>
      <th>4th Most Common Venue</th>
      <th>5th Most Common Venue</th>
      <th>6th Most Common Venue</th>
      <th>7th Most Common Venue</th>
      <th>8th Most Common Venue</th>
      <th>9th Most Common Venue</th>
      <th>10th Most Common Venue</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Adelaide,King,Richmond</td>
      <td>Coffee Shop</td>
      <td>Caf</td>
      <td>Bar</td>
      <td>Thai Restaurant</td>
      <td>Asian Restaurant</td>
      <td>Sushi Restaurant</td>
      <td>Restaurant</td>
      <td>American Restaurant</td>
      <td>Hotel</td>
      <td>Steakhouse</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Berczy Park</td>
      <td>Coffee Shop</td>
      <td>Cocktail Bar</td>
      <td>Bakery</td>
      <td>Steakhouse</td>
      <td>Beer Bar</td>
      <td>Cheese Shop</td>
      <td>Farmers Market</td>
      <td>Caf</td>
      <td>Seafood Restaurant</td>
      <td>Park</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Brockton,Exhibition Place,Parkdale Village</td>
      <td>Caf</td>
      <td>Coffee Shop</td>
      <td>Bakery</td>
      <td>Breakfast Spot</td>
      <td>Stadium</td>
      <td>Burrito Place</td>
      <td>Sandwich Place</td>
      <td>Restaurant</td>
      <td>Caribbean Restaurant</td>
      <td>Climbing Gym</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Business Reply Mail Processing Centre 969 Eastern</td>
      <td>Light Rail Station</td>
      <td>Auto Workshop</td>
      <td>Comic Shop</td>
      <td>Pizza Place</td>
      <td>Restaurant</td>
      <td>Burrito Place</td>
      <td>Brewery</td>
      <td>Skate Park</td>
      <td>Smoke Shop</td>
      <td>Spa</td>
    </tr>
    <tr>
      <th>4</th>
      <td>CN Tower,Bathurst Quay,Island airport,Harbourf...</td>
      <td>Airport Service</td>
      <td>Airport Lounge</td>
      <td>Harbor / Marina</td>
      <td>Sculpture Garden</td>
      <td>Boutique</td>
      <td>Boat or Ferry</td>
      <td>Bar</td>
      <td>Airport Terminal</td>
      <td>Coffee Shop</td>
      <td>Airport Gate</td>
    </tr>
  </tbody>
</table>
</div>



<h3>Start clustering with kmeans</h3>


```python
print(toronto_grouped.columns)
# set number of clusters
kclusters = 5

toronto_grouped_clustering = toronto_grouped.drop('Neighborhood', 1)

# run k-means clustering
kmeans = KMeans(n_clusters=kclusters, random_state=0).fit(toronto_grouped_clustering)

# check cluster labels generated for each row in the dataframe
kmeans.labels_[0:10] 
```

    Index(['Neighborhood', 'Yoga Studio', 'Accessories Store', 'Afghan Restaurant',
           'Airport', 'Airport Food Court', 'Airport Gate', 'Airport Lounge',
           'Airport Service', 'Airport Terminal',
           ...
           'Toy / Game Store', 'Trail', 'Train Station', 'Transportation Service',
           'Vegetarian / Vegan Restaurant', 'Video Game Store',
           'Vietnamese Restaurant', 'Wine Bar', 'Wings Joint', 'Women's Store'],
          dtype='object', length=239)





    array([0, 0, 0, 0, 0, 0, 0, 0, 0, 0], dtype=int32)



<h3>Combine labels and cluster and Data</h3>


```python
#add clustering labels
neighborhoods_venues_sorted.insert(0, 'Cluster Labels', kmeans.labels_)
df.rename(columns={'Neighbourhood': 'Neighborhood'}, inplace=True)
toronto_merged = df

# merge toronto_grouped with toronto_data to add latitude/longitude for each neighborhood
toronto_merged = toronto_merged.join(neighborhoods_venues_sorted.set_index('Neighborhood'), on='Neighborhood')

toronto_merged.head() # check the last columns!
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Postcode</th>
      <th>Borough</th>
      <th>Neighborhood</th>
      <th>Latitude</th>
      <th>Longitude</th>
      <th>Cluster Labels</th>
      <th>1st Most Common Venue</th>
      <th>2nd Most Common Venue</th>
      <th>3rd Most Common Venue</th>
      <th>4th Most Common Venue</th>
      <th>5th Most Common Venue</th>
      <th>6th Most Common Venue</th>
      <th>7th Most Common Venue</th>
      <th>8th Most Common Venue</th>
      <th>9th Most Common Venue</th>
      <th>10th Most Common Venue</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2</th>
      <td>M5A</td>
      <td>Downtown Toronto</td>
      <td>Harbourfront,Regent Park</td>
      <td>43.654260</td>
      <td>-79.360636</td>
      <td>0</td>
      <td>Coffee Shop</td>
      <td>Caf</td>
      <td>Bakery</td>
      <td>Pub</td>
      <td>Park</td>
      <td>Mexican Restaurant</td>
      <td>Breakfast Spot</td>
      <td>Restaurant</td>
      <td>Theater</td>
      <td>Yoga Studio</td>
    </tr>
    <tr>
      <th>9</th>
      <td>M5B</td>
      <td>Downtown Toronto</td>
      <td>Ryerson,Garden District</td>
      <td>43.657162</td>
      <td>-79.378937</td>
      <td>0</td>
      <td>Coffee Shop</td>
      <td>Clothing Store</td>
      <td>Cosmetics Shop</td>
      <td>Caf</td>
      <td>Middle Eastern Restaurant</td>
      <td>Theater</td>
      <td>Sporting Goods Shop</td>
      <td>Pizza Place</td>
      <td>Bookstore</td>
      <td>Ramen Restaurant</td>
    </tr>
    <tr>
      <th>15</th>
      <td>M5C</td>
      <td>Downtown Toronto</td>
      <td>St. James Town</td>
      <td>43.651494</td>
      <td>-79.375418</td>
      <td>0</td>
      <td>Coffee Shop</td>
      <td>Hotel</td>
      <td>Restaurant</td>
      <td>Caf</td>
      <td>Clothing Store</td>
      <td>Breakfast Spot</td>
      <td>Cosmetics Shop</td>
      <td>Bakery</td>
      <td>Italian Restaurant</td>
      <td>Beer Bar</td>
    </tr>
    <tr>
      <th>19</th>
      <td>M4E</td>
      <td>East Toronto</td>
      <td>The Beaches</td>
      <td>43.676357</td>
      <td>-79.293031</td>
      <td>0</td>
      <td>Coffee Shop</td>
      <td>Health Food Store</td>
      <td>Pub</td>
      <td>Trail</td>
      <td>Electronics Store</td>
      <td>Eastern European Restaurant</td>
      <td>Dumpling Restaurant</td>
      <td>Donut Shop</td>
      <td>Deli / Bodega</td>
      <td>Ethiopian Restaurant</td>
    </tr>
    <tr>
      <th>20</th>
      <td>M5E</td>
      <td>Downtown Toronto</td>
      <td>Berczy Park</td>
      <td>43.644771</td>
      <td>-79.373306</td>
      <td>0</td>
      <td>Coffee Shop</td>
      <td>Cocktail Bar</td>
      <td>Bakery</td>
      <td>Steakhouse</td>
      <td>Beer Bar</td>
      <td>Cheese Shop</td>
      <td>Farmers Market</td>
      <td>Caf</td>
      <td>Seafood Restaurant</td>
      <td>Park</td>
    </tr>
  </tbody>
</table>
</div>



<h3>Print clusters on map</h3>


```python
# create map
map_clusters = folium.Map(location=[latitude, longitude], zoom_start=11)

# set color scheme for the clusters
x = np.arange(kclusters)
ys = [i + x + (i*x)**2 for i in range(kclusters)]
colors_array = cm.rainbow(np.linspace(0, 1, len(ys)))
rainbow = [colors.rgb2hex(i) for i in colors_array]

# add markers to the map
markers_colors = []
for lat, lon, poi, cluster in zip(toronto_merged['Latitude'], toronto_merged['Longitude'], toronto_merged['Neighborhood'], toronto_merged['Cluster Labels']):
    label = folium.Popup(str(poi) + ' Cluster ' + str(cluster), parse_html=True)
    folium.CircleMarker(
        [lat, lon],
        radius=5,
        popup=label,
        color=rainbow[cluster-1],
        fill=True,
        fill_color=rainbow[cluster-1],
        fill_opacity=0.7).add_to(map_clusters)
       
map_clusters
```




<div style="width:100%;"><div style="position:relative;width:100%;height:0;padding-bottom:60%;"><iframe src="data:text/html;charset=utf-8;base64,PCFET0NUWVBFIGh0bWw+CjxoZWFkPiAgICAKICAgIDxtZXRhIGh0dHAtZXF1aXY9ImNvbnRlbnQtdHlwZSIgY29udGVudD0idGV4dC9odG1sOyBjaGFyc2V0PVVURi04IiAvPgogICAgPHNjcmlwdD5MX1BSRUZFUl9DQU5WQVM9ZmFsc2U7IExfTk9fVE9VQ0g9ZmFsc2U7IExfRElTQUJMRV8zRD1mYWxzZTs8L3NjcmlwdD4KICAgIDxzY3JpcHQgc3JjPSJodHRwczovL2Nkbi5qc2RlbGl2ci5uZXQvbnBtL2xlYWZsZXRAMS40LjAvZGlzdC9sZWFmbGV0LmpzIj48L3NjcmlwdD4KICAgIDxzY3JpcHQgc3JjPSJodHRwczovL2NvZGUuanF1ZXJ5LmNvbS9qcXVlcnktMS4xMi40Lm1pbi5qcyI+PC9zY3JpcHQ+CiAgICA8c2NyaXB0IHNyYz0iaHR0cHM6Ly9tYXhjZG4uYm9vdHN0cmFwY2RuLmNvbS9ib290c3RyYXAvMy4yLjAvanMvYm9vdHN0cmFwLm1pbi5qcyI+PC9zY3JpcHQ+CiAgICA8c2NyaXB0IHNyYz0iaHR0cHM6Ly9jZG5qcy5jbG91ZGZsYXJlLmNvbS9hamF4L2xpYnMvTGVhZmxldC5hd2Vzb21lLW1hcmtlcnMvMi4wLjIvbGVhZmxldC5hd2Vzb21lLW1hcmtlcnMuanMiPjwvc2NyaXB0PgogICAgPGxpbmsgcmVsPSJzdHlsZXNoZWV0IiBocmVmPSJodHRwczovL2Nkbi5qc2RlbGl2ci5uZXQvbnBtL2xlYWZsZXRAMS40LjAvZGlzdC9sZWFmbGV0LmNzcyIvPgogICAgPGxpbmsgcmVsPSJzdHlsZXNoZWV0IiBocmVmPSJodHRwczovL21heGNkbi5ib290c3RyYXBjZG4uY29tL2Jvb3RzdHJhcC8zLjIuMC9jc3MvYm9vdHN0cmFwLm1pbi5jc3MiLz4KICAgIDxsaW5rIHJlbD0ic3R5bGVzaGVldCIgaHJlZj0iaHR0cHM6Ly9tYXhjZG4uYm9vdHN0cmFwY2RuLmNvbS9ib290c3RyYXAvMy4yLjAvY3NzL2Jvb3RzdHJhcC10aGVtZS5taW4uY3NzIi8+CiAgICA8bGluayByZWw9InN0eWxlc2hlZXQiIGhyZWY9Imh0dHBzOi8vbWF4Y2RuLmJvb3RzdHJhcGNkbi5jb20vZm9udC1hd2Vzb21lLzQuNi4zL2Nzcy9mb250LWF3ZXNvbWUubWluLmNzcyIvPgogICAgPGxpbmsgcmVsPSJzdHlsZXNoZWV0IiBocmVmPSJodHRwczovL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy9MZWFmbGV0LmF3ZXNvbWUtbWFya2Vycy8yLjAuMi9sZWFmbGV0LmF3ZXNvbWUtbWFya2Vycy5jc3MiLz4KICAgIDxsaW5rIHJlbD0ic3R5bGVzaGVldCIgaHJlZj0iaHR0cHM6Ly9yYXdjZG4uZ2l0aGFjay5jb20vcHl0aG9uLXZpc3VhbGl6YXRpb24vZm9saXVtL21hc3Rlci9mb2xpdW0vdGVtcGxhdGVzL2xlYWZsZXQuYXdlc29tZS5yb3RhdGUuY3NzIi8+CiAgICA8c3R5bGU+aHRtbCwgYm9keSB7d2lkdGg6IDEwMCU7aGVpZ2h0OiAxMDAlO21hcmdpbjogMDtwYWRkaW5nOiAwO308L3N0eWxlPgogICAgPHN0eWxlPiNtYXAge3Bvc2l0aW9uOmFic29sdXRlO3RvcDowO2JvdHRvbTowO3JpZ2h0OjA7bGVmdDowO308L3N0eWxlPgogICAgCiAgICA8bWV0YSBuYW1lPSJ2aWV3cG9ydCIgY29udGVudD0id2lkdGg9ZGV2aWNlLXdpZHRoLAogICAgICAgIGluaXRpYWwtc2NhbGU9MS4wLCBtYXhpbXVtLXNjYWxlPTEuMCwgdXNlci1zY2FsYWJsZT1ubyIgLz4KICAgIDxzdHlsZT4jbWFwX2UwYzI0MDBiNDY2NzQ0NWQ4ZmQxYzkxYzJhNWJjNjYyIHsKICAgICAgICBwb3NpdGlvbjogcmVsYXRpdmU7CiAgICAgICAgd2lkdGg6IDEwMC4wJTsKICAgICAgICBoZWlnaHQ6IDEwMC4wJTsKICAgICAgICBsZWZ0OiAwLjAlOwogICAgICAgIHRvcDogMC4wJTsKICAgICAgICB9CiAgICA8L3N0eWxlPgo8L2hlYWQ+Cjxib2R5PiAgICAKICAgIAogICAgPGRpdiBjbGFzcz0iZm9saXVtLW1hcCIgaWQ9Im1hcF9lMGMyNDAwYjQ2Njc0NDVkOGZkMWM5MWMyYTViYzY2MiIgPjwvZGl2Pgo8L2JvZHk+CjxzY3JpcHQ+ICAgIAogICAgCiAgICAKICAgICAgICB2YXIgYm91bmRzID0gbnVsbDsKICAgIAoKICAgIHZhciBtYXBfZTBjMjQwMGI0NjY3NDQ1ZDhmZDFjOTFjMmE1YmM2NjIgPSBMLm1hcCgKICAgICAgICAnbWFwX2UwYzI0MDBiNDY2NzQ0NWQ4ZmQxYzkxYzJhNWJjNjYyJywgewogICAgICAgIGNlbnRlcjogWzQzLjY1Mzk2MywgLTc5LjM4NzIwN10sCiAgICAgICAgem9vbTogMTEsCiAgICAgICAgbWF4Qm91bmRzOiBib3VuZHMsCiAgICAgICAgbGF5ZXJzOiBbXSwKICAgICAgICB3b3JsZENvcHlKdW1wOiBmYWxzZSwKICAgICAgICBjcnM6IEwuQ1JTLkVQU0czODU3LAogICAgICAgIHpvb21Db250cm9sOiB0cnVlLAogICAgICAgIH0pOwoKCiAgICAKICAgIHZhciB0aWxlX2xheWVyX2ZmMTk1YTM3ODY2ODQwZGRhY2Y1YzFjMzYxNjUwMjUyID0gTC50aWxlTGF5ZXIoCiAgICAgICAgJ2h0dHBzOi8ve3N9LnRpbGUub3BlbnN0cmVldG1hcC5vcmcve3p9L3t4fS97eX0ucG5nJywKICAgICAgICB7CiAgICAgICAgImF0dHJpYnV0aW9uIjogbnVsbCwKICAgICAgICAiZGV0ZWN0UmV0aW5hIjogZmFsc2UsCiAgICAgICAgIm1heE5hdGl2ZVpvb20iOiAxOCwKICAgICAgICAibWF4Wm9vbSI6IDE4LAogICAgICAgICJtaW5ab29tIjogMCwKICAgICAgICAibm9XcmFwIjogZmFsc2UsCiAgICAgICAgIm9wYWNpdHkiOiAxLAogICAgICAgICJzdWJkb21haW5zIjogImFiYyIsCiAgICAgICAgInRtcyI6IGZhbHNlCn0pLmFkZFRvKG1hcF9lMGMyNDAwYjQ2Njc0NDVkOGZkMWM5MWMyYTViYzY2Mik7CiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfOTVjYTMwNWUxNTA1NGJjMDkzNzdkZTljMjAxMzIwODYgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0My42NTQyNTk5LCAtNzkuMzYwNjM1OV0sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICIjZmYwMDAwIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiI2ZmMDAwMCIsCiAgImZpbGxPcGFjaXR5IjogMC43LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYWRkVG8obWFwX2UwYzI0MDBiNDY2NzQ0NWQ4ZmQxYzkxYzJhNWJjNjYyKTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwX2UwNjE3ZTE4MmU0ODQ3MTI4MDIzODg0YzU3ODk3MWE3ID0gTC5wb3B1cCh7bWF4V2lkdGg6ICcxMDAlJwogICAgICAgICAgICAKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzc4Mzc1OTc5NDI1YTQ5ZDk4NjdhMjhkMzZhNGRlZWJhID0gJChgPGRpdiBpZD0iaHRtbF83ODM3NTk3OTQyNWE0OWQ5ODY3YTI4ZDM2YTRkZWViYSIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+SGFyYm91cmZyb250LFJlZ2VudCBQYXJrIENsdXN0ZXIgMDwvZGl2PmApWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfZTA2MTdlMTgyZTQ4NDcxMjgwMjM4ODRjNTc4OTcxYTcuc2V0Q29udGVudChodG1sXzc4Mzc1OTc5NDI1YTQ5ZDk4NjdhMjhkMzZhNGRlZWJhKTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyXzk1Y2EzMDVlMTUwNTRiYzA5Mzc3ZGU5YzIwMTMyMDg2LmJpbmRQb3B1cChwb3B1cF9lMDYxN2UxODJlNDg0NzEyODAyMzg4NGM1Nzg5NzFhNykKICAgICAgICAgICAgOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfMmU1ZDc0ZmI3NzgwNDk2MjllMzRhM2NkNzAyOGVlMDQgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0My42NTcxNjE4LCAtNzkuMzc4OTM3MDk5OTk5OTldLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwKICAiY29sb3IiOiAiI2ZmMDAwMCIsCiAgImRhc2hBcnJheSI6IG51bGwsCiAgImRhc2hPZmZzZXQiOiBudWxsLAogICJmaWxsIjogdHJ1ZSwKICAiZmlsbENvbG9yIjogIiNmZjAwMDAiLAogICJmaWxsT3BhY2l0eSI6IDAuNywKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsCiAgImxpbmVDYXAiOiAicm91bmQiLAogICJsaW5lSm9pbiI6ICJyb3VuZCIsCiAgIm9wYWNpdHkiOiAxLjAsCiAgInJhZGl1cyI6IDUsCiAgInN0cm9rZSI6IHRydWUsCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFkZFRvKG1hcF9lMGMyNDAwYjQ2Njc0NDVkOGZkMWM5MWMyYTViYzY2Mik7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF9iMjgwMmY3Y2RhNDI0YzM5ODVkYjM3ODU1YjZlY2ZjYiA9IEwucG9wdXAoe21heFdpZHRoOiAnMTAwJScKICAgICAgICAgICAgCiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF80MzdhZDEyMDg1YzM0YzQ4YjI5NWE2MTkzODQ0YjJmNSA9ICQoYDxkaXYgaWQ9Imh0bWxfNDM3YWQxMjA4NWMzNGM0OGIyOTVhNjE5Mzg0NGIyZjUiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPlJ5ZXJzb24sR2FyZGVuIERpc3RyaWN0IENsdXN0ZXIgMDwvZGl2PmApWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfYjI4MDJmN2NkYTQyNGMzOTg1ZGIzNzg1NWI2ZWNmY2Iuc2V0Q29udGVudChodG1sXzQzN2FkMTIwODVjMzRjNDhiMjk1YTYxOTM4NDRiMmY1KTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyXzJlNWQ3NGZiNzc4MDQ5NjI5ZTM0YTNjZDcwMjhlZTA0LmJpbmRQb3B1cChwb3B1cF9iMjgwMmY3Y2RhNDI0YzM5ODVkYjM3ODU1YjZlY2ZjYikKICAgICAgICAgICAgOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfZTEzNTMzNzFkOTMyNDQ4Yjg3YmYxZWY5MTRmZTA4MTIgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0My42NTE0OTM5LCAtNzkuMzc1NDE3OV0sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICIjZmYwMDAwIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiI2ZmMDAwMCIsCiAgImZpbGxPcGFjaXR5IjogMC43LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYWRkVG8obWFwX2UwYzI0MDBiNDY2NzQ0NWQ4ZmQxYzkxYzJhNWJjNjYyKTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzczMzliNjJkMDQwODQ2MWU4NmE3YzFiZmE3YzU1ZWY3ID0gTC5wb3B1cCh7bWF4V2lkdGg6ICcxMDAlJwogICAgICAgICAgICAKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzkzOTU5NDBiZmYyOTRlYTM5NjhjOTkzNmM2YWQyOWU4ID0gJChgPGRpdiBpZD0iaHRtbF85Mzk1OTQwYmZmMjk0ZWEzOTY4Yzk5MzZjNmFkMjllOCIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+U3QuIEphbWVzIFRvd24gQ2x1c3RlciAwPC9kaXY+YClbMF07CiAgICAgICAgICAgICAgICBwb3B1cF83MzM5YjYyZDA0MDg0NjFlODZhN2MxYmZhN2M1NWVmNy5zZXRDb250ZW50KGh0bWxfOTM5NTk0MGJmZjI5NGVhMzk2OGM5OTM2YzZhZDI5ZTgpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfZTEzNTMzNzFkOTMyNDQ4Yjg3YmYxZWY5MTRmZTA4MTIuYmluZFBvcHVwKHBvcHVwXzczMzliNjJkMDQwODQ2MWU4NmE3YzFiZmE3YzU1ZWY3KQogICAgICAgICAgICA7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl8yNTQwNjY1OWFmNmI0ZDA4YTdiYzY3ZDUwMDY3MTIzMSA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjY3NjM1NzM5OTk5OTk5LCAtNzkuMjkzMDMxMl0sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICIjZmYwMDAwIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiI2ZmMDAwMCIsCiAgImZpbGxPcGFjaXR5IjogMC43LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYWRkVG8obWFwX2UwYzI0MDBiNDY2NzQ0NWQ4ZmQxYzkxYzJhNWJjNjYyKTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzQyYmMzZmQzOGYxYTQ1MGM5YzdmZWU2OWEzNjYyZjcyID0gTC5wb3B1cCh7bWF4V2lkdGg6ICcxMDAlJwogICAgICAgICAgICAKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzE2MjhhMzJjZjc0YjRkNjc5OGNmMmQ3N2VmNTViNDcxID0gJChgPGRpdiBpZD0iaHRtbF8xNjI4YTMyY2Y3NGI0ZDY3OThjZjJkNzdlZjU1YjQ3MSIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+VGhlIEJlYWNoZXMgQ2x1c3RlciAwPC9kaXY+YClbMF07CiAgICAgICAgICAgICAgICBwb3B1cF80MmJjM2ZkMzhmMWE0NTBjOWM3ZmVlNjlhMzY2MmY3Mi5zZXRDb250ZW50KGh0bWxfMTYyOGEzMmNmNzRiNGQ2Nzk4Y2YyZDc3ZWY1NWI0NzEpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfMjU0MDY2NTlhZjZiNGQwOGE3YmM2N2Q1MDA2NzEyMzEuYmluZFBvcHVwKHBvcHVwXzQyYmMzZmQzOGYxYTQ1MGM5YzdmZWU2OWEzNjYyZjcyKQogICAgICAgICAgICA7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl8yMTJjZmMxOGQ5NGI0NDcwYTYwYjllZjQzODgwZmE0NSA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjY0NDc3MDc5OTk5OTk5NiwgLTc5LjM3MzMwNjRdLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwKICAiY29sb3IiOiAiI2ZmMDAwMCIsCiAgImRhc2hBcnJheSI6IG51bGwsCiAgImRhc2hPZmZzZXQiOiBudWxsLAogICJmaWxsIjogdHJ1ZSwKICAiZmlsbENvbG9yIjogIiNmZjAwMDAiLAogICJmaWxsT3BhY2l0eSI6IDAuNywKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsCiAgImxpbmVDYXAiOiAicm91bmQiLAogICJsaW5lSm9pbiI6ICJyb3VuZCIsCiAgIm9wYWNpdHkiOiAxLjAsCiAgInJhZGl1cyI6IDUsCiAgInN0cm9rZSI6IHRydWUsCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFkZFRvKG1hcF9lMGMyNDAwYjQ2Njc0NDVkOGZkMWM5MWMyYTViYzY2Mik7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF82ODBjZTUxM2ExMTA0OWE3YmVjN2I1YTg5MTYyMWNiZiA9IEwucG9wdXAoe21heFdpZHRoOiAnMTAwJScKICAgICAgICAgICAgCiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF8yOTJjYTgyZmEyNzk0MDQzOGIxYmQ5NTIyNmFmOGUwMSA9ICQoYDxkaXYgaWQ9Imh0bWxfMjkyY2E4MmZhMjc5NDA0MzhiMWJkOTUyMjZhZjhlMDEiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPkJlcmN6eSBQYXJrIENsdXN0ZXIgMDwvZGl2PmApWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfNjgwY2U1MTNhMTEwNDlhN2JlYzdiNWE4OTE2MjFjYmYuc2V0Q29udGVudChodG1sXzI5MmNhODJmYTI3OTQwNDM4YjFiZDk1MjI2YWY4ZTAxKTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyXzIxMmNmYzE4ZDk0YjQ0NzBhNjBiOWVmNDM4ODBmYTQ1LmJpbmRQb3B1cChwb3B1cF82ODBjZTUxM2ExMTA0OWE3YmVjN2I1YTg5MTYyMWNiZikKICAgICAgICAgICAgOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfYTdkNjY3ZGNkMThmNGNiYTg0MGEyOTY2NDVkZGQ3ZWQgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0My42NTc5NTI0LCAtNzkuMzg3MzgyNl0sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICIjZmYwMDAwIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiI2ZmMDAwMCIsCiAgImZpbGxPcGFjaXR5IjogMC43LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYWRkVG8obWFwX2UwYzI0MDBiNDY2NzQ0NWQ4ZmQxYzkxYzJhNWJjNjYyKTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzk5NzYxMjJmZGMxYTQ4MmRhNjVmMzI3YTg0NTdjN2YyID0gTC5wb3B1cCh7bWF4V2lkdGg6ICcxMDAlJwogICAgICAgICAgICAKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sX2NhOTI2MzQ4YWU4OTQyYmU4YjgzYWI4YmZkNTI4YzQ3ID0gJChgPGRpdiBpZD0iaHRtbF9jYTkyNjM0OGFlODk0MmJlOGI4M2FiOGJmZDUyOGM0NyIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+Q2VudHJhbCBCYXkgU3RyZWV0IENsdXN0ZXIgMDwvZGl2PmApWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfOTk3NjEyMmZkYzFhNDgyZGE2NWYzMjdhODQ1N2M3ZjIuc2V0Q29udGVudChodG1sX2NhOTI2MzQ4YWU4OTQyYmU4YjgzYWI4YmZkNTI4YzQ3KTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyX2E3ZDY2N2RjZDE4ZjRjYmE4NDBhMjk2NjQ1ZGRkN2VkLmJpbmRQb3B1cChwb3B1cF85OTc2MTIyZmRjMWE0ODJkYTY1ZjMyN2E4NDU3YzdmMikKICAgICAgICAgICAgOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfNzVkYTUxYzQ2OGFjNDE4ZmJkMzIzZjgwMmJiNGU3ZDcgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0My42Njk1NDIsIC03OS40MjI1NjM3XSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogIiNmZjAwMDAiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICIjZmYwMDAwIiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfZTBjMjQwMGI0NjY3NDQ1ZDhmZDFjOTFjMmE1YmM2NjIpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfZDJlNjRiNTUzODdkNDE5MDljMmMwNWNiYjYyM2E3MDcgPSBMLnBvcHVwKHttYXhXaWR0aDogJzEwMCUnCiAgICAgICAgICAgIAogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfOWY0YTAwZjJkYzVhNDM2ZGIyN2QyMWFlODkzMGEzYjMgPSAkKGA8ZGl2IGlkPSJodG1sXzlmNGEwMGYyZGM1YTQzNmRiMjdkMjFhZTg5MzBhM2IzIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5DaHJpc3RpZSBDbHVzdGVyIDA8L2Rpdj5gKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwX2QyZTY0YjU1Mzg3ZDQxOTA5YzJjMDVjYmI2MjNhNzA3LnNldENvbnRlbnQoaHRtbF85ZjRhMDBmMmRjNWE0MzZkYjI3ZDIxYWU4OTMwYTNiMyk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl83NWRhNTFjNDY4YWM0MThmYmQzMjNmODAyYmI0ZTdkNy5iaW5kUG9wdXAocG9wdXBfZDJlNjRiNTUzODdkNDE5MDljMmMwNWNiYjYyM2E3MDcpCiAgICAgICAgICAgIDsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyX2FlYzI2Nzc5MDJiNjQ4OTY4MWQyZTgyMzQ4NzBkNTg1ID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDMuNjUwNTcxMjAwMDAwMDEsIC03OS4zODQ1Njc1XSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogIiNmZjAwMDAiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICIjZmYwMDAwIiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfZTBjMjQwMGI0NjY3NDQ1ZDhmZDFjOTFjMmE1YmM2NjIpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfN2RiMTM0MTFhOTdlNDllM2EzYjBhMTE5YzRhNjE0NDIgPSBMLnBvcHVwKHttYXhXaWR0aDogJzEwMCUnCiAgICAgICAgICAgIAogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfMzcyNTM5NzFlMTc4NDE1NWI1NGQ2NTRkZDJiYmM1MTMgPSAkKGA8ZGl2IGlkPSJodG1sXzM3MjUzOTcxZTE3ODQxNTViNTRkNjU0ZGQyYmJjNTEzIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5BZGVsYWlkZSxLaW5nLFJpY2htb25kIENsdXN0ZXIgMDwvZGl2PmApWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfN2RiMTM0MTFhOTdlNDllM2EzYjBhMTE5YzRhNjE0NDIuc2V0Q29udGVudChodG1sXzM3MjUzOTcxZTE3ODQxNTViNTRkNjU0ZGQyYmJjNTEzKTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyX2FlYzI2Nzc5MDJiNjQ4OTY4MWQyZTgyMzQ4NzBkNTg1LmJpbmRQb3B1cChwb3B1cF83ZGIxMzQxMWE5N2U0OWUzYTNiMGExMTljNGE2MTQ0MikKICAgICAgICAgICAgOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfMGFlZGI5OGM5ODE1NDJmMGJhODQzMGEwY2FkYTY1YTIgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0My42NjkwMDUxMDAwMDAwMSwgLTc5LjQ0MjI1OTNdLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwKICAiY29sb3IiOiAiI2ZmMDAwMCIsCiAgImRhc2hBcnJheSI6IG51bGwsCiAgImRhc2hPZmZzZXQiOiBudWxsLAogICJmaWxsIjogdHJ1ZSwKICAiZmlsbENvbG9yIjogIiNmZjAwMDAiLAogICJmaWxsT3BhY2l0eSI6IDAuNywKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsCiAgImxpbmVDYXAiOiAicm91bmQiLAogICJsaW5lSm9pbiI6ICJyb3VuZCIsCiAgIm9wYWNpdHkiOiAxLjAsCiAgInJhZGl1cyI6IDUsCiAgInN0cm9rZSI6IHRydWUsCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFkZFRvKG1hcF9lMGMyNDAwYjQ2Njc0NDVkOGZkMWM5MWMyYTViYzY2Mik7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF8wOWIwNWIyOWUxOTY0MWI5YWNhZmI2ODZkOGZiNzFiNiA9IEwucG9wdXAoe21heFdpZHRoOiAnMTAwJScKICAgICAgICAgICAgCiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF80ZGRjNmM2N2VmMWE0ZTM5YWJhNjNlNjc4N2UxZjVkYiA9ICQoYDxkaXYgaWQ9Imh0bWxfNGRkYzZjNjdlZjFhNGUzOWFiYTYzZTY3ODdlMWY1ZGIiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPkRvdmVyY291cnQgVmlsbGFnZSxEdWZmZXJpbiBDbHVzdGVyIDA8L2Rpdj5gKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzA5YjA1YjI5ZTE5NjQxYjlhY2FmYjY4NmQ4ZmI3MWI2LnNldENvbnRlbnQoaHRtbF80ZGRjNmM2N2VmMWE0ZTM5YWJhNjNlNjc4N2UxZjVkYik7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl8wYWVkYjk4Yzk4MTU0MmYwYmE4NDMwYTBjYWRhNjVhMi5iaW5kUG9wdXAocG9wdXBfMDliMDViMjllMTk2NDFiOWFjYWZiNjg2ZDhmYjcxYjYpCiAgICAgICAgICAgIDsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyX2M2YWQ5NDMyODNkYzRkYTE5MTgwMDU3YTdkNTk5ZDJlID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDMuNjQwODE1NywgLTc5LjM4MTc1MjI5OTk5OTk5XSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogIiNmZjAwMDAiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICIjZmYwMDAwIiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfZTBjMjQwMGI0NjY3NDQ1ZDhmZDFjOTFjMmE1YmM2NjIpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfMmVkMDFmMDc0MDM2NDczMDhmMTBkYTAxYzMwMjdjYjYgPSBMLnBvcHVwKHttYXhXaWR0aDogJzEwMCUnCiAgICAgICAgICAgIAogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfYjEyOGI2MTcxOGZkNGYxMjg5MTZlZWUxMTViNmI0ZmUgPSAkKGA8ZGl2IGlkPSJodG1sX2IxMjhiNjE3MThmZDRmMTI4OTE2ZWVlMTE1YjZiNGZlIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5IYXJib3VyZnJvbnQgRWFzdCxUb3JvbnRvIElzbGFuZHMsVW5pb24gU3RhdGlvbiBDbHVzdGVyIDA8L2Rpdj5gKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzJlZDAxZjA3NDAzNjQ3MzA4ZjEwZGEwMWMzMDI3Y2I2LnNldENvbnRlbnQoaHRtbF9iMTI4YjYxNzE4ZmQ0ZjEyODkxNmVlZTExNWI2YjRmZSk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl9jNmFkOTQzMjgzZGM0ZGExOTE4MDA1N2E3ZDU5OWQyZS5iaW5kUG9wdXAocG9wdXBfMmVkMDFmMDc0MDM2NDczMDhmMTBkYTAxYzMwMjdjYjYpCiAgICAgICAgICAgIDsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyXzI0NzdiMmI1YTdmNTQ2N2I4MzJhMzFkMDZhOGM2OWU5ID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDMuNjQ3OTI2NzAwMDAwMDA2LCAtNzkuNDE5NzQ5N10sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICIjZmYwMDAwIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiI2ZmMDAwMCIsCiAgImZpbGxPcGFjaXR5IjogMC43LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYWRkVG8obWFwX2UwYzI0MDBiNDY2NzQ0NWQ4ZmQxYzkxYzJhNWJjNjYyKTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzZiZjU0N2RlZWEyZDRlZDc4N2IwOTUwMTU4NzRiNmFlID0gTC5wb3B1cCh7bWF4V2lkdGg6ICcxMDAlJwogICAgICAgICAgICAKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzA4MzA0NGMwODk1NjQzY2ViYzkzOGUyNDQzYmQzNDM4ID0gJChgPGRpdiBpZD0iaHRtbF8wODMwNDRjMDg5NTY0M2NlYmM5MzhlMjQ0M2JkMzQzOCIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+TGl0dGxlIFBvcnR1Z2FsLFRyaW5pdHkgQ2x1c3RlciAwPC9kaXY+YClbMF07CiAgICAgICAgICAgICAgICBwb3B1cF82YmY1NDdkZWVhMmQ0ZWQ3ODdiMDk1MDE1ODc0YjZhZS5zZXRDb250ZW50KGh0bWxfMDgzMDQ0YzA4OTU2NDNjZWJjOTM4ZTI0NDNiZDM0MzgpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfMjQ3N2IyYjVhN2Y1NDY3YjgzMmEzMWQwNmE4YzY5ZTkuYmluZFBvcHVwKHBvcHVwXzZiZjU0N2RlZWEyZDRlZDc4N2IwOTUwMTU4NzRiNmFlKQogICAgICAgICAgICA7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl9hN2Y5OGU5OTk5ZDQ0NjUxOWExMzBkNjJmNTk3N2ZlZSA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjY3OTU1NzEsIC03OS4zNTIxODhdLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwKICAiY29sb3IiOiAiI2ZmMDAwMCIsCiAgImRhc2hBcnJheSI6IG51bGwsCiAgImRhc2hPZmZzZXQiOiBudWxsLAogICJmaWxsIjogdHJ1ZSwKICAiZmlsbENvbG9yIjogIiNmZjAwMDAiLAogICJmaWxsT3BhY2l0eSI6IDAuNywKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsCiAgImxpbmVDYXAiOiAicm91bmQiLAogICJsaW5lSm9pbiI6ICJyb3VuZCIsCiAgIm9wYWNpdHkiOiAxLjAsCiAgInJhZGl1cyI6IDUsCiAgInN0cm9rZSI6IHRydWUsCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFkZFRvKG1hcF9lMGMyNDAwYjQ2Njc0NDVkOGZkMWM5MWMyYTViYzY2Mik7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF9kMjUzY2I5NzBkOWU0ZDRkOWFmNDUyYzI1NWJkZDhmMSA9IEwucG9wdXAoe21heFdpZHRoOiAnMTAwJScKICAgICAgICAgICAgCiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF85M2QzM2RjZDhiY2E0NjQ4YWNkYWU0ZjhmYTVlOTBkYyA9ICQoYDxkaXYgaWQ9Imh0bWxfOTNkMzNkY2Q4YmNhNDY0OGFjZGFlNGY4ZmE1ZTkwZGMiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPlRoZSBEYW5mb3J0aCBXZXN0LFJpdmVyZGFsZSBDbHVzdGVyIDA8L2Rpdj5gKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwX2QyNTNjYjk3MGQ5ZTRkNGQ5YWY0NTJjMjU1YmRkOGYxLnNldENvbnRlbnQoaHRtbF85M2QzM2RjZDhiY2E0NjQ4YWNkYWU0ZjhmYTVlOTBkYyk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl9hN2Y5OGU5OTk5ZDQ0NjUxOWExMzBkNjJmNTk3N2ZlZS5iaW5kUG9wdXAocG9wdXBfZDI1M2NiOTcwZDllNGQ0ZDlhZjQ1MmMyNTViZGQ4ZjEpCiAgICAgICAgICAgIDsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyXzljODE1MTI5N2ViNzQwNmZhYTM5YzdlMWIzN2ZlMTEzID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDMuNjQ3MTc2OCwgLTc5LjM4MTU3NjQwMDAwMDAxXSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogIiNmZjAwMDAiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICIjZmYwMDAwIiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfZTBjMjQwMGI0NjY3NDQ1ZDhmZDFjOTFjMmE1YmM2NjIpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfNjJhZTk4MjYwNGZmNDc5YWE5ZTFkNzA2MDU2NjM4ZTMgPSBMLnBvcHVwKHttYXhXaWR0aDogJzEwMCUnCiAgICAgICAgICAgIAogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfNmE1ODExNzZiYzZmNGU1ZjliMmI4ZWU0ZGI0OWRlOTggPSAkKGA8ZGl2IGlkPSJodG1sXzZhNTgxMTc2YmM2ZjRlNWY5YjJiOGVlNGRiNDlkZTk4IiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5EZXNpZ24gRXhjaGFuZ2UsVG9yb250byBEb21pbmlvbiBDZW50cmUgQ2x1c3RlciAwPC9kaXY+YClbMF07CiAgICAgICAgICAgICAgICBwb3B1cF82MmFlOTgyNjA0ZmY0NzlhYTllMWQ3MDYwNTY2MzhlMy5zZXRDb250ZW50KGh0bWxfNmE1ODExNzZiYzZmNGU1ZjliMmI4ZWU0ZGI0OWRlOTgpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfOWM4MTUxMjk3ZWI3NDA2ZmFhMzljN2UxYjM3ZmUxMTMuYmluZFBvcHVwKHBvcHVwXzYyYWU5ODI2MDRmZjQ3OWFhOWUxZDcwNjA1NjYzOGUzKQogICAgICAgICAgICA7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl9mMjk2MDJiNDBkY2Q0Njg3ODU1ZTJiMmYzYmFmYWIzZSA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjYzNjg0NzIsIC03OS40MjgxOTE0MDAwMDAwMl0sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICIjZmYwMDAwIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiI2ZmMDAwMCIsCiAgImZpbGxPcGFjaXR5IjogMC43LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYWRkVG8obWFwX2UwYzI0MDBiNDY2NzQ0NWQ4ZmQxYzkxYzJhNWJjNjYyKTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzBiZWZlNDJjYzlmOTRhM2NiMmQ0MGFkNGQ1NGEyOGM2ID0gTC5wb3B1cCh7bWF4V2lkdGg6ICcxMDAlJwogICAgICAgICAgICAKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sX2Q0NDEyZjAxZmNjNTQ2NjhiNjM4ZmZiNTRhYTk4YmM3ID0gJChgPGRpdiBpZD0iaHRtbF9kNDQxMmYwMWZjYzU0NjY4YjYzOGZmYjU0YWE5OGJjNyIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+QnJvY2t0b24sRXhoaWJpdGlvbiBQbGFjZSxQYXJrZGFsZSBWaWxsYWdlIENsdXN0ZXIgMDwvZGl2PmApWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfMGJlZmU0MmNjOWY5NGEzY2IyZDQwYWQ0ZDU0YTI4YzYuc2V0Q29udGVudChodG1sX2Q0NDEyZjAxZmNjNTQ2NjhiNjM4ZmZiNTRhYTk4YmM3KTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyX2YyOTYwMmI0MGRjZDQ2ODc4NTVlMmIyZjNiYWZhYjNlLmJpbmRQb3B1cChwb3B1cF8wYmVmZTQyY2M5Zjk0YTNjYjJkNDBhZDRkNTRhMjhjNikKICAgICAgICAgICAgOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfZGVkNDYwYTFmZTRmNDI2ZmJmZmI2YWMzZTk1NWQyOTkgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0My42Njg5OTg1LCAtNzkuMzE1NTcxNTk5OTk5OThdLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwKICAiY29sb3IiOiAiI2ZmMDAwMCIsCiAgImRhc2hBcnJheSI6IG51bGwsCiAgImRhc2hPZmZzZXQiOiBudWxsLAogICJmaWxsIjogdHJ1ZSwKICAiZmlsbENvbG9yIjogIiNmZjAwMDAiLAogICJmaWxsT3BhY2l0eSI6IDAuNywKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsCiAgImxpbmVDYXAiOiAicm91bmQiLAogICJsaW5lSm9pbiI6ICJyb3VuZCIsCiAgIm9wYWNpdHkiOiAxLjAsCiAgInJhZGl1cyI6IDUsCiAgInN0cm9rZSI6IHRydWUsCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFkZFRvKG1hcF9lMGMyNDAwYjQ2Njc0NDVkOGZkMWM5MWMyYTViYzY2Mik7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF8wZjlkOGU3N2NkYTM0MTA0YjNhY2E2N2Q5ZDZiNzM1YiA9IEwucG9wdXAoe21heFdpZHRoOiAnMTAwJScKICAgICAgICAgICAgCiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF81OGQyMTk2ODA3YTM0ZmQ2YjBiNjZiNTdkNWE4Y2U3YSA9ICQoYDxkaXYgaWQ9Imh0bWxfNThkMjE5NjgwN2EzNGZkNmIwYjY2YjU3ZDVhOGNlN2EiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPlRoZSBCZWFjaGVzIFdlc3QsSW5kaWEgQmF6YWFyIENsdXN0ZXIgMDwvZGl2PmApWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfMGY5ZDhlNzdjZGEzNDEwNGIzYWNhNjdkOWQ2YjczNWIuc2V0Q29udGVudChodG1sXzU4ZDIxOTY4MDdhMzRmZDZiMGI2NmI1N2Q1YThjZTdhKTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyX2RlZDQ2MGExZmU0ZjQyNmZiZmZiNmFjM2U5NTVkMjk5LmJpbmRQb3B1cChwb3B1cF8wZjlkOGU3N2NkYTM0MTA0YjNhY2E2N2Q5ZDZiNzM1YikKICAgICAgICAgICAgOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfOWE1NGMyMDc5MDg2NGIyMzk5NzkwMGIyMjkzZThiOGYgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0My42NDgxOTg1LCAtNzkuMzc5ODE2OTAwMDAwMDFdLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwKICAiY29sb3IiOiAiI2ZmMDAwMCIsCiAgImRhc2hBcnJheSI6IG51bGwsCiAgImRhc2hPZmZzZXQiOiBudWxsLAogICJmaWxsIjogdHJ1ZSwKICAiZmlsbENvbG9yIjogIiNmZjAwMDAiLAogICJmaWxsT3BhY2l0eSI6IDAuNywKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsCiAgImxpbmVDYXAiOiAicm91bmQiLAogICJsaW5lSm9pbiI6ICJyb3VuZCIsCiAgIm9wYWNpdHkiOiAxLjAsCiAgInJhZGl1cyI6IDUsCiAgInN0cm9rZSI6IHRydWUsCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFkZFRvKG1hcF9lMGMyNDAwYjQ2Njc0NDVkOGZkMWM5MWMyYTViYzY2Mik7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF8xY2RiMDVlMTQyODU0YWE1YWU4ZTUzNTdhZTYxZjVlYyA9IEwucG9wdXAoe21heFdpZHRoOiAnMTAwJScKICAgICAgICAgICAgCiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF9jNzkyNTNmMDU5ZTE0ODVjODg0NzE5MzdkOGY0OGQ5YSA9ICQoYDxkaXYgaWQ9Imh0bWxfYzc5MjUzZjA1OWUxNDg1Yzg4NDcxOTM3ZDhmNDhkOWEiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPkNvbW1lcmNlIENvdXJ0LFZpY3RvcmlhIEhvdGVsIENsdXN0ZXIgMDwvZGl2PmApWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfMWNkYjA1ZTE0Mjg1NGFhNWFlOGU1MzU3YWU2MWY1ZWMuc2V0Q29udGVudChodG1sX2M3OTI1M2YwNTllMTQ4NWM4ODQ3MTkzN2Q4ZjQ4ZDlhKTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyXzlhNTRjMjA3OTA4NjRiMjM5OTc5MDBiMjI5M2U4YjhmLmJpbmRQb3B1cChwb3B1cF8xY2RiMDVlMTQyODU0YWE1YWU4ZTUzNTdhZTYxZjVlYykKICAgICAgICAgICAgOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfYzkxZWM4YTY1YjM4NDE1ZjgzODIzMzJlNGNlZDJiZTcgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0My42NTk1MjU1LCAtNzkuMzQwOTIzXSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogIiNmZjAwMDAiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICIjZmYwMDAwIiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfZTBjMjQwMGI0NjY3NDQ1ZDhmZDFjOTFjMmE1YmM2NjIpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfNTJiNGM1ZTBlYmRmNDlhYzk1M2FhYmMwNDAxNWU2MGUgPSBMLnBvcHVwKHttYXhXaWR0aDogJzEwMCUnCiAgICAgICAgICAgIAogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfNmVmM2YyZTA5OGViNDAyMWJjZGQwMGYwZDg5ZDZmMmQgPSAkKGA8ZGl2IGlkPSJodG1sXzZlZjNmMmUwOThlYjQwMjFiY2RkMDBmMGQ4OWQ2ZjJkIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5TdHVkaW8gRGlzdHJpY3QgQ2x1c3RlciAwPC9kaXY+YClbMF07CiAgICAgICAgICAgICAgICBwb3B1cF81MmI0YzVlMGViZGY0OWFjOTUzYWFiYzA0MDE1ZTYwZS5zZXRDb250ZW50KGh0bWxfNmVmM2YyZTA5OGViNDAyMWJjZGQwMGYwZDg5ZDZmMmQpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfYzkxZWM4YTY1YjM4NDE1ZjgzODIzMzJlNGNlZDJiZTcuYmluZFBvcHVwKHBvcHVwXzUyYjRjNWUwZWJkZjQ5YWM5NTNhYWJjMDQwMTVlNjBlKQogICAgICAgICAgICA7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl8wODJjOWYyMDU3Yzg0MjBjOTAzOGYwOWM3MjVkMTk1ZiA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjcyODAyMDUsIC03OS4zODg3OTAxXSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogIiNmZmIzNjAiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICIjZmZiMzYwIiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfZTBjMjQwMGI0NjY3NDQ1ZDhmZDFjOTFjMmE1YmM2NjIpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfZjFiN2Y0NWQ1NzI4NDUyNzgyODI3MTE1OTM3OTQ5YTYgPSBMLnBvcHVwKHttYXhXaWR0aDogJzEwMCUnCiAgICAgICAgICAgIAogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfZjQ1MmY5Y2I5ZGIxNGRlNzkyNTc1OGFkNjlhYjkwMjcgPSAkKGA8ZGl2IGlkPSJodG1sX2Y0NTJmOWNiOWRiMTRkZTc5MjU3NThhZDY5YWI5MDI3IiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5MYXdyZW5jZSBQYXJrIENsdXN0ZXIgNDwvZGl2PmApWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfZjFiN2Y0NWQ1NzI4NDUyNzgyODI3MTE1OTM3OTQ5YTYuc2V0Q29udGVudChodG1sX2Y0NTJmOWNiOWRiMTRkZTc5MjU3NThhZDY5YWI5MDI3KTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyXzA4MmM5ZjIwNTdjODQyMGM5MDM4ZjA5YzcyNWQxOTVmLmJpbmRQb3B1cChwb3B1cF9mMWI3ZjQ1ZDU3Mjg0NTI3ODI4MjcxMTU5Mzc5NDlhNikKICAgICAgICAgICAgOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfZDkxOWExZWQ1ZDcxNDhlYTg3YzJkMzhiNTU0NjcxNWEgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0My43MTE2OTQ4LCAtNzkuNDE2OTM1NTk5OTk5OTldLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwKICAiY29sb3IiOiAiIzAwYjVlYiIsCiAgImRhc2hBcnJheSI6IG51bGwsCiAgImRhc2hPZmZzZXQiOiBudWxsLAogICJmaWxsIjogdHJ1ZSwKICAiZmlsbENvbG9yIjogIiMwMGI1ZWIiLAogICJmaWxsT3BhY2l0eSI6IDAuNywKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsCiAgImxpbmVDYXAiOiAicm91bmQiLAogICJsaW5lSm9pbiI6ICJyb3VuZCIsCiAgIm9wYWNpdHkiOiAxLjAsCiAgInJhZGl1cyI6IDUsCiAgInN0cm9rZSI6IHRydWUsCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFkZFRvKG1hcF9lMGMyNDAwYjQ2Njc0NDVkOGZkMWM5MWMyYTViYzY2Mik7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF8wYTBhMWE3MTU2ZjI0YjU2YjQyNDBmOWRmMmE2OTBjNiA9IEwucG9wdXAoe21heFdpZHRoOiAnMTAwJScKICAgICAgICAgICAgCiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF9lOGExOWNiYTc4NmQ0MTliYjEyYTc0ZDEyNTA3YjM4YyA9ICQoYDxkaXYgaWQ9Imh0bWxfZThhMTljYmE3ODZkNDE5YmIxMmE3NGQxMjUwN2IzOGMiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPlJvc2VsYXduIENsdXN0ZXIgMjwvZGl2PmApWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfMGEwYTFhNzE1NmYyNGI1NmI0MjQwZjlkZjJhNjkwYzYuc2V0Q29udGVudChodG1sX2U4YTE5Y2JhNzg2ZDQxOWJiMTJhNzRkMTI1MDdiMzhjKTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyX2Q5MTlhMWVkNWQ3MTQ4ZWE4N2MyZDM4YjU1NDY3MTVhLmJpbmRQb3B1cChwb3B1cF8wYTBhMWE3MTU2ZjI0YjU2YjQyNDBmOWRmMmE2OTBjNikKICAgICAgICAgICAgOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfNGY0OTIwZWI1ZmEyNDA4NTk0Y2VhODNmNDYzYjZlNzggPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0My43MTI3NTExLCAtNzkuMzkwMTk3NV0sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICIjZmYwMDAwIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiI2ZmMDAwMCIsCiAgImZpbGxPcGFjaXR5IjogMC43LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYWRkVG8obWFwX2UwYzI0MDBiNDY2NzQ0NWQ4ZmQxYzkxYzJhNWJjNjYyKTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzJkYWZjZGQ4OWJkZTRlYWU5YzNjYzA5NTg3ZGU0NzI5ID0gTC5wb3B1cCh7bWF4V2lkdGg6ICcxMDAlJwogICAgICAgICAgICAKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzYzZjkxNjIzYTZiYzRlNzRhOGM2NzA3MWJkMjc1NzVkID0gJChgPGRpdiBpZD0iaHRtbF82M2Y5MTYyM2E2YmM0ZTc0YThjNjcwNzFiZDI3NTc1ZCIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+RGF2aXN2aWxsZSBOb3J0aCBDbHVzdGVyIDA8L2Rpdj5gKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzJkYWZjZGQ4OWJkZTRlYWU5YzNjYzA5NTg3ZGU0NzI5LnNldENvbnRlbnQoaHRtbF82M2Y5MTYyM2E2YmM0ZTc0YThjNjcwNzFiZDI3NTc1ZCk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl80ZjQ5MjBlYjVmYTI0MDg1OTRjZWE4M2Y0NjNiNmU3OC5iaW5kUG9wdXAocG9wdXBfMmRhZmNkZDg5YmRlNGVhZTljM2NjMDk1ODdkZTQ3MjkpCiAgICAgICAgICAgIDsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyXzA3NjNkNDU4OTgzOTQ5Y2Y4OGUyNmRkMTg0M2Y2NTc3ID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDMuNjk2OTQ3NiwgLTc5LjQxMTMwNzIwMDAwMDAxXSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogIiM4MDAwZmYiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICIjODAwMGZmIiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfZTBjMjQwMGI0NjY3NDQ1ZDhmZDFjOTFjMmE1YmM2NjIpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfNjUyYTcwODhiYTBkNDUxMWFhNGMwNDhjYzlmZDZkOWEgPSBMLnBvcHVwKHttYXhXaWR0aDogJzEwMCUnCiAgICAgICAgICAgIAogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfZDNhNGRhNmUzNzY2NDZlMDg5MzJkZTBjODVkMzQ2MzUgPSAkKGA8ZGl2IGlkPSJodG1sX2QzYTRkYTZlMzc2NjQ2ZTA4OTMyZGUwYzg1ZDM0NjM1IiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5Gb3Jlc3QgSGlsbCBOb3J0aCxGb3Jlc3QgSGlsbCBXZXN0IENsdXN0ZXIgMTwvZGl2PmApWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfNjUyYTcwODhiYTBkNDUxMWFhNGMwNDhjYzlmZDZkOWEuc2V0Q29udGVudChodG1sX2QzYTRkYTZlMzc2NjQ2ZTA4OTMyZGUwYzg1ZDM0NjM1KTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyXzA3NjNkNDU4OTgzOTQ5Y2Y4OGUyNmRkMTg0M2Y2NTc3LmJpbmRQb3B1cChwb3B1cF82NTJhNzA4OGJhMGQ0NTExYWE0YzA0OGNjOWZkNmQ5YSkKICAgICAgICAgICAgOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfOTk4ODA4MzMxN2MyNDYyODk0OWNhOWQ5OGJlZjQwNTUgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0My42NjE2MDgzLCAtNzkuNDY0NzYzMjk5OTk5OTldLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwKICAiY29sb3IiOiAiI2ZmMDAwMCIsCiAgImRhc2hBcnJheSI6IG51bGwsCiAgImRhc2hPZmZzZXQiOiBudWxsLAogICJmaWxsIjogdHJ1ZSwKICAiZmlsbENvbG9yIjogIiNmZjAwMDAiLAogICJmaWxsT3BhY2l0eSI6IDAuNywKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsCiAgImxpbmVDYXAiOiAicm91bmQiLAogICJsaW5lSm9pbiI6ICJyb3VuZCIsCiAgIm9wYWNpdHkiOiAxLjAsCiAgInJhZGl1cyI6IDUsCiAgInN0cm9rZSI6IHRydWUsCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFkZFRvKG1hcF9lMGMyNDAwYjQ2Njc0NDVkOGZkMWM5MWMyYTViYzY2Mik7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF9iYzZjM2NlNTg0NzQ0YzE2OTFmZDcwNDRjNTVhMTc1NiA9IEwucG9wdXAoe21heFdpZHRoOiAnMTAwJScKICAgICAgICAgICAgCiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF8xY2Y5YmEyZWZkNDA0NjBhODBiMTM0Mjc1NjVhZjIzNSA9ICQoYDxkaXYgaWQ9Imh0bWxfMWNmOWJhMmVmZDQwNDYwYTgwYjEzNDI3NTY1YWYyMzUiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPkhpZ2ggUGFyayxUaGUgSnVuY3Rpb24gU291dGggQ2x1c3RlciAwPC9kaXY+YClbMF07CiAgICAgICAgICAgICAgICBwb3B1cF9iYzZjM2NlNTg0NzQ0YzE2OTFmZDcwNDRjNTVhMTc1Ni5zZXRDb250ZW50KGh0bWxfMWNmOWJhMmVmZDQwNDYwYTgwYjEzNDI3NTY1YWYyMzUpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfOTk4ODA4MzMxN2MyNDYyODk0OWNhOWQ5OGJlZjQwNTUuYmluZFBvcHVwKHBvcHVwX2JjNmMzY2U1ODQ3NDRjMTY5MWZkNzA0NGM1NWExNzU2KQogICAgICAgICAgICA7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl8xMzYzMjI0ZjFiOGU0OWNmYWRkNmVjZjM3OTk1Zjk5YyA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjcxNTM4MzQsIC03OS40MDU2Nzg0MDAwMDAwMV0sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICIjZmYwMDAwIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiI2ZmMDAwMCIsCiAgImZpbGxPcGFjaXR5IjogMC43LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYWRkVG8obWFwX2UwYzI0MDBiNDY2NzQ0NWQ4ZmQxYzkxYzJhNWJjNjYyKTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzRlZDAwYjlmYTY2NzQyMTI4ZTRlYjNhNTk0MWFlMDUyID0gTC5wb3B1cCh7bWF4V2lkdGg6ICcxMDAlJwogICAgICAgICAgICAKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzk5OGFkNTkxNDIyNTRiZDk4YTliNGY1MTI5YzFkNzNmID0gJChgPGRpdiBpZD0iaHRtbF85OThhZDU5MTQyMjU0YmQ5OGE5YjRmNTEyOWMxZDczZiIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+Tm9ydGggVG9yb250byBXZXN0IENsdXN0ZXIgMDwvZGl2PmApWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfNGVkMDBiOWZhNjY3NDIxMjhlNGViM2E1OTQxYWUwNTIuc2V0Q29udGVudChodG1sXzk5OGFkNTkxNDIyNTRiZDk4YTliNGY1MTI5YzFkNzNmKTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyXzEzNjMyMjRmMWI4ZTQ5Y2ZhZGQ2ZWNmMzc5OTVmOTljLmJpbmRQb3B1cChwb3B1cF80ZWQwMGI5ZmE2Njc0MjEyOGU0ZWIzYTU5NDFhZTA1MikKICAgICAgICAgICAgOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfM2Q1OTUxZmM5MDFkNGY4ZDlkN2MxZjE1YmYyMTEwNTkgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0My42NzI3MDk3LCAtNzkuNDA1Njc4NDAwMDAwMDFdLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwKICAiY29sb3IiOiAiI2ZmMDAwMCIsCiAgImRhc2hBcnJheSI6IG51bGwsCiAgImRhc2hPZmZzZXQiOiBudWxsLAogICJmaWxsIjogdHJ1ZSwKICAiZmlsbENvbG9yIjogIiNmZjAwMDAiLAogICJmaWxsT3BhY2l0eSI6IDAuNywKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsCiAgImxpbmVDYXAiOiAicm91bmQiLAogICJsaW5lSm9pbiI6ICJyb3VuZCIsCiAgIm9wYWNpdHkiOiAxLjAsCiAgInJhZGl1cyI6IDUsCiAgInN0cm9rZSI6IHRydWUsCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFkZFRvKG1hcF9lMGMyNDAwYjQ2Njc0NDVkOGZkMWM5MWMyYTViYzY2Mik7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF9jYjQ2ZTgyYzcxMjg0NGU5ODFjYzQ5NGNkZDUwYzM4NiA9IEwucG9wdXAoe21heFdpZHRoOiAnMTAwJScKICAgICAgICAgICAgCiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF85M2UzZjZmYTg3MjE0MTkxOTM2N2NjMTQwMzAwOGIzYiA9ICQoYDxkaXYgaWQ9Imh0bWxfOTNlM2Y2ZmE4NzIxNDE5MTkzNjdjYzE0MDMwMDhiM2IiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPlRoZSBBbm5leCxOb3J0aCBNaWR0b3duLFlvcmt2aWxsZSBDbHVzdGVyIDA8L2Rpdj5gKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwX2NiNDZlODJjNzEyODQ0ZTk4MWNjNDk0Y2RkNTBjMzg2LnNldENvbnRlbnQoaHRtbF85M2UzZjZmYTg3MjE0MTkxOTM2N2NjMTQwMzAwOGIzYik7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl8zZDU5NTFmYzkwMWQ0ZjhkOWQ3YzFmMTViZjIxMTA1OS5iaW5kUG9wdXAocG9wdXBfY2I0NmU4MmM3MTI4NDRlOTgxY2M0OTRjZGQ1MGMzODYpCiAgICAgICAgICAgIDsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyXzVmYjFiYTUwMjNhOTQ1YzM5MDQyZGUyMzY1NzBiNmU5ID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDMuNjQ4OTU5NywgLTc5LjQ1NjMyNV0sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICIjZmYwMDAwIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiI2ZmMDAwMCIsCiAgImZpbGxPcGFjaXR5IjogMC43LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYWRkVG8obWFwX2UwYzI0MDBiNDY2NzQ0NWQ4ZmQxYzkxYzJhNWJjNjYyKTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzkyNTVlY2FlMWQyMDRhYWE4ZGVhZmM4YjUyNjlkYmUyID0gTC5wb3B1cCh7bWF4V2lkdGg6ICcxMDAlJwogICAgICAgICAgICAKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzQ3ZTIxMGQ0OGNkYjQzYjJhNmI4NmUxMjMwNzUwM2I0ID0gJChgPGRpdiBpZD0iaHRtbF80N2UyMTBkNDhjZGI0M2IyYTZiODZlMTIzMDc1MDNiNCIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+UGFya2RhbGUsUm9uY2VzdmFsbGVzIENsdXN0ZXIgMDwvZGl2PmApWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfOTI1NWVjYWUxZDIwNGFhYThkZWFmYzhiNTI2OWRiZTIuc2V0Q29udGVudChodG1sXzQ3ZTIxMGQ0OGNkYjQzYjJhNmI4NmUxMjMwNzUwM2I0KTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyXzVmYjFiYTUwMjNhOTQ1YzM5MDQyZGUyMzY1NzBiNmU5LmJpbmRQb3B1cChwb3B1cF85MjU1ZWNhZTFkMjA0YWFhOGRlYWZjOGI1MjY5ZGJlMikKICAgICAgICAgICAgOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfNmEyMjBlYTJlOWE4NDExN2IzZjA2MzNlZGU3ZjA5NTkgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0My43MDQzMjQ0LCAtNzkuMzg4NzkwMV0sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICIjZmYwMDAwIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiI2ZmMDAwMCIsCiAgImZpbGxPcGFjaXR5IjogMC43LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYWRkVG8obWFwX2UwYzI0MDBiNDY2NzQ0NWQ4ZmQxYzkxYzJhNWJjNjYyKTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzY5ODE3MDE1ZmI5NzRkNDFiYWQ2OWQyZjIzYmIwYTlmID0gTC5wb3B1cCh7bWF4V2lkdGg6ICcxMDAlJwogICAgICAgICAgICAKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzYwMGUwOTdkZjBhNDQyYmI5ZmQ2OTJjYThjN2U4YzU0ID0gJChgPGRpdiBpZD0iaHRtbF82MDBlMDk3ZGYwYTQ0MmJiOWZkNjkyY2E4YzdlOGM1NCIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+RGF2aXN2aWxsZSBDbHVzdGVyIDA8L2Rpdj5gKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzY5ODE3MDE1ZmI5NzRkNDFiYWQ2OWQyZjIzYmIwYTlmLnNldENvbnRlbnQoaHRtbF82MDBlMDk3ZGYwYTQ0MmJiOWZkNjkyY2E4YzdlOGM1NCk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl82YTIyMGVhMmU5YTg0MTE3YjNmMDYzM2VkZTdmMDk1OS5iaW5kUG9wdXAocG9wdXBfNjk4MTcwMTVmYjk3NGQ0MWJhZDY5ZDJmMjNiYjBhOWYpCiAgICAgICAgICAgIDsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyXzJkYWU3OGFjMzJkYTRiMTU5NDZjNzNjMWZhYmQ4Mzg1ID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDMuNjYyNjk1NiwgLTc5LjQwMDA0OTNdLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwKICAiY29sb3IiOiAiI2ZmMDAwMCIsCiAgImRhc2hBcnJheSI6IG51bGwsCiAgImRhc2hPZmZzZXQiOiBudWxsLAogICJmaWxsIjogdHJ1ZSwKICAiZmlsbENvbG9yIjogIiNmZjAwMDAiLAogICJmaWxsT3BhY2l0eSI6IDAuNywKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsCiAgImxpbmVDYXAiOiAicm91bmQiLAogICJsaW5lSm9pbiI6ICJyb3VuZCIsCiAgIm9wYWNpdHkiOiAxLjAsCiAgInJhZGl1cyI6IDUsCiAgInN0cm9rZSI6IHRydWUsCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFkZFRvKG1hcF9lMGMyNDAwYjQ2Njc0NDVkOGZkMWM5MWMyYTViYzY2Mik7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF80MThlODE3MDY0MTU0NDJkOWE5NDA5OTkwYjRjODI2MyA9IEwucG9wdXAoe21heFdpZHRoOiAnMTAwJScKICAgICAgICAgICAgCiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF9mZDg0MzJiOWZiYWE0NzU2OWQzODliZTliYzFlZGI5NyA9ICQoYDxkaXYgaWQ9Imh0bWxfZmQ4NDMyYjlmYmFhNDc1NjlkMzg5YmU5YmMxZWRiOTciIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPkhhcmJvcmQsVW5pdmVyc2l0eSBvZiBUb3JvbnRvIENsdXN0ZXIgMDwvZGl2PmApWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfNDE4ZTgxNzA2NDE1NDQyZDlhOTQwOTk5MGI0YzgyNjMuc2V0Q29udGVudChodG1sX2ZkODQzMmI5ZmJhYTQ3NTY5ZDM4OWJlOWJjMWVkYjk3KTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyXzJkYWU3OGFjMzJkYTRiMTU5NDZjNzNjMWZhYmQ4Mzg1LmJpbmRQb3B1cChwb3B1cF80MThlODE3MDY0MTU0NDJkOWE5NDA5OTkwYjRjODI2MykKICAgICAgICAgICAgOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfNDljNTYzMjMxZDJlNDI5OThjZmIyYTA0Y2JlODc0MjggPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0My42NTE1NzA2LCAtNzkuNDg0NDQ5OV0sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICIjZmYwMDAwIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiI2ZmMDAwMCIsCiAgImZpbGxPcGFjaXR5IjogMC43LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYWRkVG8obWFwX2UwYzI0MDBiNDY2NzQ0NWQ4ZmQxYzkxYzJhNWJjNjYyKTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzZlZDU3YTRmMDljNzQ4ODY5NGVlMDIxYzgyZTkwMDVkID0gTC5wb3B1cCh7bWF4V2lkdGg6ICcxMDAlJwogICAgICAgICAgICAKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sX2UxNDZjMmVhZWNmZjRjMmY5OWY2NmFlYzFhMThjNzc4ID0gJChgPGRpdiBpZD0iaHRtbF9lMTQ2YzJlYWVjZmY0YzJmOTlmNjZhZWMxYTE4Yzc3OCIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+UnVubnltZWRlLFN3YW5zZWEgQ2x1c3RlciAwPC9kaXY+YClbMF07CiAgICAgICAgICAgICAgICBwb3B1cF82ZWQ1N2E0ZjA5Yzc0ODg2OTRlZTAyMWM4MmU5MDA1ZC5zZXRDb250ZW50KGh0bWxfZTE0NmMyZWFlY2ZmNGMyZjk5ZjY2YWVjMWExOGM3NzgpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfNDljNTYzMjMxZDJlNDI5OThjZmIyYTA0Y2JlODc0MjguYmluZFBvcHVwKHBvcHVwXzZlZDU3YTRmMDljNzQ4ODY5NGVlMDIxYzgyZTkwMDVkKQogICAgICAgICAgICA7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl9iODAzMDdhYzBkODY0NGM3YWNlYzIwZWNlZTFmNjdmNSA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjY4OTU3NDMsIC03OS4zODMxNTk5MDAwMDAwMV0sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICIjODBmZmI0IiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiIzgwZmZiNCIsCiAgImZpbGxPcGFjaXR5IjogMC43LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYWRkVG8obWFwX2UwYzI0MDBiNDY2NzQ0NWQ4ZmQxYzkxYzJhNWJjNjYyKTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzEyYjBmMWMwZmUxZjQ1OTZiZDc0MDA1OWU3MjI1Njk1ID0gTC5wb3B1cCh7bWF4V2lkdGg6ICcxMDAlJwogICAgICAgICAgICAKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzhjNDI0NjI4ZmEzMjRkNjBiMGE5OTIwMjA0NzAyNjZjID0gJChgPGRpdiBpZD0iaHRtbF84YzQyNDYyOGZhMzI0ZDYwYjBhOTkyMDIwNDcwMjY2YyIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+TW9vcmUgUGFyayxTdW1tZXJoaWxsIEVhc3QgQ2x1c3RlciAzPC9kaXY+YClbMF07CiAgICAgICAgICAgICAgICBwb3B1cF8xMmIwZjFjMGZlMWY0NTk2YmQ3NDAwNTllNzIyNTY5NS5zZXRDb250ZW50KGh0bWxfOGM0MjQ2MjhmYTMyNGQ2MGIwYTk5MjAyMDQ3MDI2NmMpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfYjgwMzA3YWMwZDg2NDRjN2FjZWMyMGVjZWUxZjY3ZjUuYmluZFBvcHVwKHBvcHVwXzEyYjBmMWMwZmUxZjQ1OTZiZDc0MDA1OWU3MjI1Njk1KQogICAgICAgICAgICA7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl9kMTAzODE2YmZhYjA0NDFkYTFlNjY2ZDBjMGE1ODdlNiA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjY1MzIwNTcsIC03OS40MDAwNDkzXSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogIiNmZjAwMDAiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICIjZmYwMDAwIiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfZTBjMjQwMGI0NjY3NDQ1ZDhmZDFjOTFjMmE1YmM2NjIpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfNGJkMGQwMjc1N2U0NGNmMjkzYWQyMDA2NTNhMzRkYTcgPSBMLnBvcHVwKHttYXhXaWR0aDogJzEwMCUnCiAgICAgICAgICAgIAogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfYzY0NDE1Njc1NzM1NDYyNWI3ZDI3NWNhNzA1NDFmNTMgPSAkKGA8ZGl2IGlkPSJodG1sX2M2NDQxNTY3NTczNTQ2MjViN2QyNzVjYTcwNTQxZjUzIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5DaGluYXRvd24sR3JhbmdlIFBhcmssS2Vuc2luZ3RvbiBNYXJrZXQgQ2x1c3RlciAwPC9kaXY+YClbMF07CiAgICAgICAgICAgICAgICBwb3B1cF80YmQwZDAyNzU3ZTQ0Y2YyOTNhZDIwMDY1M2EzNGRhNy5zZXRDb250ZW50KGh0bWxfYzY0NDE1Njc1NzM1NDYyNWI3ZDI3NWNhNzA1NDFmNTMpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfZDEwMzgxNmJmYWIwNDQxZGExZTY2NmQwYzBhNTg3ZTYuYmluZFBvcHVwKHBvcHVwXzRiZDBkMDI3NTdlNDRjZjI5M2FkMjAwNjUzYTM0ZGE3KQogICAgICAgICAgICA7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl8wNTc3MjNkNzdiNmE0OTVhOGExMTZmMWM1MjJmZmVjNCA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjY4NjQxMjI5OTk5OTk5LCAtNzkuNDAwMDQ5M10sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICIjZmYwMDAwIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiI2ZmMDAwMCIsCiAgImZpbGxPcGFjaXR5IjogMC43LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYWRkVG8obWFwX2UwYzI0MDBiNDY2NzQ0NWQ4ZmQxYzkxYzJhNWJjNjYyKTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzExYzg5ZjhmYWJiMTRhNjFhMWI5YTRmODlhYjQ3ZDQ3ID0gTC5wb3B1cCh7bWF4V2lkdGg6ICcxMDAlJwogICAgICAgICAgICAKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzM3NzQ3OGFiNjdlZDRkNmJhZjE3MWJmYmIzMTM2ZTM0ID0gJChgPGRpdiBpZD0iaHRtbF8zNzc0NzhhYjY3ZWQ0ZDZiYWYxNzFiZmJiMzEzNmUzNCIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+RGVlciBQYXJrLEZvcmVzdCBIaWxsIFNFLFJhdGhuZWxseSxTb3V0aCBIaWxsLFN1bW1lcmhpbGwgV2VzdCBDbHVzdGVyIDA8L2Rpdj5gKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzExYzg5ZjhmYWJiMTRhNjFhMWI5YTRmODlhYjQ3ZDQ3LnNldENvbnRlbnQoaHRtbF8zNzc0NzhhYjY3ZWQ0ZDZiYWYxNzFiZmJiMzEzNmUzNCk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl8wNTc3MjNkNzdiNmE0OTVhOGExMTZmMWM1MjJmZmVjNC5iaW5kUG9wdXAocG9wdXBfMTFjODlmOGZhYmIxNGE2MWExYjlhNGY4OWFiNDdkNDcpCiAgICAgICAgICAgIDsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyXzFmNWQ4ZjU4YTY4NDQxZGNiM2Y4YWNlOTkwMGEyOGIzID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDMuNjI4OTQ2NywgLTc5LjM5NDQxOTldLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwKICAiY29sb3IiOiAiI2ZmMDAwMCIsCiAgImRhc2hBcnJheSI6IG51bGwsCiAgImRhc2hPZmZzZXQiOiBudWxsLAogICJmaWxsIjogdHJ1ZSwKICAiZmlsbENvbG9yIjogIiNmZjAwMDAiLAogICJmaWxsT3BhY2l0eSI6IDAuNywKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsCiAgImxpbmVDYXAiOiAicm91bmQiLAogICJsaW5lSm9pbiI6ICJyb3VuZCIsCiAgIm9wYWNpdHkiOiAxLjAsCiAgInJhZGl1cyI6IDUsCiAgInN0cm9rZSI6IHRydWUsCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFkZFRvKG1hcF9lMGMyNDAwYjQ2Njc0NDVkOGZkMWM5MWMyYTViYzY2Mik7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF82ZTQ3ZmNjNWFiZDU0MDZiOTdjYzU1YmRiMzljN2E3NiA9IEwucG9wdXAoe21heFdpZHRoOiAnMTAwJScKICAgICAgICAgICAgCiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF9jZmU4OTZiNjgyZGM0ZTlhYjRmM2IxMjkwMjRmNmRkYiA9ICQoYDxkaXYgaWQ9Imh0bWxfY2ZlODk2YjY4MmRjNGU5YWI0ZjNiMTI5MDI0ZjZkZGIiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPkNOIFRvd2VyLEJhdGh1cnN0IFF1YXksSXNsYW5kIGFpcnBvcnQsSGFyYm91cmZyb250IFdlc3QsS2luZyBhbmQgU3BhZGluYSxSYWlsd2F5IExhbmRzLFNvdXRoIE5pYWdhcmEgQ2x1c3RlciAwPC9kaXY+YClbMF07CiAgICAgICAgICAgICAgICBwb3B1cF82ZTQ3ZmNjNWFiZDU0MDZiOTdjYzU1YmRiMzljN2E3Ni5zZXRDb250ZW50KGh0bWxfY2ZlODk2YjY4MmRjNGU5YWI0ZjNiMTI5MDI0ZjZkZGIpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfMWY1ZDhmNThhNjg0NDFkY2IzZjhhY2U5OTAwYTI4YjMuYmluZFBvcHVwKHBvcHVwXzZlNDdmY2M1YWJkNTQwNmI5N2NjNTViZGIzOWM3YTc2KQogICAgICAgICAgICA7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl83ODRiY2MyMGI0Y2E0YjJmODM0NDljYmExMWUwZThhYSA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjY3OTU2MjYsIC03OS4zNzc1Mjk0MDAwMDAwMV0sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICIjODAwMGZmIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiIzgwMDBmZiIsCiAgImZpbGxPcGFjaXR5IjogMC43LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYWRkVG8obWFwX2UwYzI0MDBiNDY2NzQ0NWQ4ZmQxYzkxYzJhNWJjNjYyKTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzU4MmE1NzA4ODRhZjQ3ZDQ5OWNhODM4YjQyOGFkMDEwID0gTC5wb3B1cCh7bWF4V2lkdGg6ICcxMDAlJwogICAgICAgICAgICAKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzEwNDVhZmJhMWU1ZTQxOGZhNTUxM2JjYThlNzgxODZjID0gJChgPGRpdiBpZD0iaHRtbF8xMDQ1YWZiYTFlNWU0MThmYTU1MTNiY2E4ZTc4MTg2YyIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+Um9zZWRhbGUgQ2x1c3RlciAxPC9kaXY+YClbMF07CiAgICAgICAgICAgICAgICBwb3B1cF81ODJhNTcwODg0YWY0N2Q0OTljYTgzOGI0MjhhZDAxMC5zZXRDb250ZW50KGh0bWxfMTA0NWFmYmExZTVlNDE4ZmE1NTEzYmNhOGU3ODE4NmMpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfNzg0YmNjMjBiNGNhNGIyZjgzNDQ5Y2JhMTFlMGU4YWEuYmluZFBvcHVwKHBvcHVwXzU4MmE1NzA4ODRhZjQ3ZDQ5OWNhODM4YjQyOGFkMDEwKQogICAgICAgICAgICA7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl84MzExYjYwNjBmNTI0MWE3OTRhYTI1NDZkMGFlMjhiYiA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjY0NjQzNTIsIC03OS4zNzQ4NDU5OTk5OTk5OV0sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICIjZmYwMDAwIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiI2ZmMDAwMCIsCiAgImZpbGxPcGFjaXR5IjogMC43LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYWRkVG8obWFwX2UwYzI0MDBiNDY2NzQ0NWQ4ZmQxYzkxYzJhNWJjNjYyKTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzFmNmQ4MzBiOTNhNzQxY2U5NmJlMmVjZjFkMTEwODA3ID0gTC5wb3B1cCh7bWF4V2lkdGg6ICcxMDAlJwogICAgICAgICAgICAKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sX2EzMWYwZWQ3MTI4MDRlMjk5ZDg2ZDE4ZGQ0OTI2ZjUwID0gJChgPGRpdiBpZD0iaHRtbF9hMzFmMGVkNzEyODA0ZTI5OWQ4NmQxOGRkNDkyNmY1MCIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+U3RuIEEgUE8gQm94ZXMgMjUgVGhlIEVzcGxhbmFkZSBDbHVzdGVyIDA8L2Rpdj5gKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzFmNmQ4MzBiOTNhNzQxY2U5NmJlMmVjZjFkMTEwODA3LnNldENvbnRlbnQoaHRtbF9hMzFmMGVkNzEyODA0ZTI5OWQ4NmQxOGRkNDkyNmY1MCk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl84MzExYjYwNjBmNTI0MWE3OTRhYTI1NDZkMGFlMjhiYi5iaW5kUG9wdXAocG9wdXBfMWY2ZDgzMGI5M2E3NDFjZTk2YmUyZWNmMWQxMTA4MDcpCiAgICAgICAgICAgIDsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyXzM5YzY0MDhmZjdlZDQxMzY4N2FlYmUzNzZlODUyYTJhID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDMuNjY3OTY3LCAtNzkuMzY3Njc1M10sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICIjZmYwMDAwIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiI2ZmMDAwMCIsCiAgImZpbGxPcGFjaXR5IjogMC43LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYWRkVG8obWFwX2UwYzI0MDBiNDY2NzQ0NWQ4ZmQxYzkxYzJhNWJjNjYyKTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwX2RkZDljZWY0Y2RjMTRlZDJiZmRlMDI5MTc4ZWVjYmEyID0gTC5wb3B1cCh7bWF4V2lkdGg6ICcxMDAlJwogICAgICAgICAgICAKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzBjMDI1MTcwMTUxZjQyN2Y5MDAwNjBlZjI2ZDM4Njc0ID0gJChgPGRpdiBpZD0iaHRtbF8wYzAyNTE3MDE1MWY0MjdmOTAwMDYwZWYyNmQzODY3NCIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+Q2FiYmFnZXRvd24sU3QuIEphbWVzIFRvd24gQ2x1c3RlciAwPC9kaXY+YClbMF07CiAgICAgICAgICAgICAgICBwb3B1cF9kZGQ5Y2VmNGNkYzE0ZWQyYmZkZTAyOTE3OGVlY2JhMi5zZXRDb250ZW50KGh0bWxfMGMwMjUxNzAxNTFmNDI3ZjkwMDA2MGVmMjZkMzg2NzQpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfMzljNjQwOGZmN2VkNDEzNjg3YWViZTM3NmU4NTJhMmEuYmluZFBvcHVwKHBvcHVwX2RkZDljZWY0Y2RjMTRlZDJiZmRlMDI5MTc4ZWVjYmEyKQogICAgICAgICAgICA7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl9iZjA0MThlZTBiOGI0NmJjYTU1YzNiZTAzOTcyN2I3MyA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjY0ODQyOTIsIC03OS4zODIyODAyXSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogIiNmZjAwMDAiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICIjZmYwMDAwIiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfZTBjMjQwMGI0NjY3NDQ1ZDhmZDFjOTFjMmE1YmM2NjIpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfNzIwZWU0ZGMxYzk3NDI0ZmI2Mzg1ODA5OWFkYjA1YTkgPSBMLnBvcHVwKHttYXhXaWR0aDogJzEwMCUnCiAgICAgICAgICAgIAogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfN2M2OGQ2MjI1NDdlNDA2ZWFmYzMwZWFkMjFiNzAxY2UgPSAkKGA8ZGl2IGlkPSJodG1sXzdjNjhkNjIyNTQ3ZTQwNmVhZmMzMGVhZDIxYjcwMWNlIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5GaXJzdCBDYW5hZGlhbiBQbGFjZSxVbmRlcmdyb3VuZCBjaXR5IENsdXN0ZXIgMDwvZGl2PmApWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfNzIwZWU0ZGMxYzk3NDI0ZmI2Mzg1ODA5OWFkYjA1YTkuc2V0Q29udGVudChodG1sXzdjNjhkNjIyNTQ3ZTQwNmVhZmMzMGVhZDIxYjcwMWNlKTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyX2JmMDQxOGVlMGI4YjQ2YmNhNTVjM2JlMDM5NzI3YjczLmJpbmRQb3B1cChwb3B1cF83MjBlZTRkYzFjOTc0MjRmYjYzODU4MDk5YWRiMDVhOSkKICAgICAgICAgICAgOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfNDE4OGY0ZGRhOWY5NDQ1Mzk3MTg2NDUzMjE5ZDE3MTEgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0My42NjU4NTk5LCAtNzkuMzgzMTU5OTAwMDAwMDFdLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwKICAiY29sb3IiOiAiI2ZmMDAwMCIsCiAgImRhc2hBcnJheSI6IG51bGwsCiAgImRhc2hPZmZzZXQiOiBudWxsLAogICJmaWxsIjogdHJ1ZSwKICAiZmlsbENvbG9yIjogIiNmZjAwMDAiLAogICJmaWxsT3BhY2l0eSI6IDAuNywKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsCiAgImxpbmVDYXAiOiAicm91bmQiLAogICJsaW5lSm9pbiI6ICJyb3VuZCIsCiAgIm9wYWNpdHkiOiAxLjAsCiAgInJhZGl1cyI6IDUsCiAgInN0cm9rZSI6IHRydWUsCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFkZFRvKG1hcF9lMGMyNDAwYjQ2Njc0NDVkOGZkMWM5MWMyYTViYzY2Mik7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF9mMDQzMjk5ZWZmNmE0ZjE3YWNlMjEyZjU5NTNjNTg5NiA9IEwucG9wdXAoe21heFdpZHRoOiAnMTAwJScKICAgICAgICAgICAgCiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF8wMjBlMjc5ZTMxZWQ0M2Y3OWQ2MDg4YWQ1ZDM4MGZkYSA9ICQoYDxkaXYgaWQ9Imh0bWxfMDIwZTI3OWUzMWVkNDNmNzlkNjA4OGFkNWQzODBmZGEiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPkNodXJjaCBhbmQgV2VsbGVzbGV5IENsdXN0ZXIgMDwvZGl2PmApWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfZjA0MzI5OWVmZjZhNGYxN2FjZTIxMmY1OTUzYzU4OTYuc2V0Q29udGVudChodG1sXzAyMGUyNzllMzFlZDQzZjc5ZDYwODhhZDVkMzgwZmRhKTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyXzQxODhmNGRkYTlmOTQ0NTM5NzE4NjQ1MzIxOWQxNzExLmJpbmRQb3B1cChwb3B1cF9mMDQzMjk5ZWZmNmE0ZjE3YWNlMjEyZjU5NTNjNTg5NikKICAgICAgICAgICAgOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfZjJkMDBjNDNjOTYwNDg3YjkzNTMxNzkxOGY4Y2FjNTQgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0My42NjI3NDM5LCAtNzkuMzIxNTU4XSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogIiNmZjAwMDAiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICIjZmYwMDAwIiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfZTBjMjQwMGI0NjY3NDQ1ZDhmZDFjOTFjMmE1YmM2NjIpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfMzQ0MzFlMTk1YTgyNGU2ZDhhODEwMjA1ZmRmMGE1OGEgPSBMLnBvcHVwKHttYXhXaWR0aDogJzEwMCUnCiAgICAgICAgICAgIAogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfOTg1MjZhOWMyMTljNGM2NGFmMGJjMzQwZDIyMDZlYjcgPSAkKGA8ZGl2IGlkPSJodG1sXzk4NTI2YTljMjE5YzRjNjRhZjBiYzM0MGQyMjA2ZWI3IiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5CdXNpbmVzcyBSZXBseSBNYWlsIFByb2Nlc3NpbmcgQ2VudHJlIDk2OSBFYXN0ZXJuIENsdXN0ZXIgMDwvZGl2PmApWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfMzQ0MzFlMTk1YTgyNGU2ZDhhODEwMjA1ZmRmMGE1OGEuc2V0Q29udGVudChodG1sXzk4NTI2YTljMjE5YzRjNjRhZjBiYzM0MGQyMjA2ZWI3KTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyX2YyZDAwYzQzYzk2MDQ4N2I5MzUzMTc5MThmOGNhYzU0LmJpbmRQb3B1cChwb3B1cF8zNDQzMWUxOTVhODI0ZTZkOGE4MTAyMDVmZGYwYTU4YSkKICAgICAgICAgICAgOwoKICAgICAgICAgICAgCiAgICAgICAgCjwvc2NyaXB0Pg==" style="position:absolute;width:100%;height:100%;left:0;top:0;border:none !important;" allowfullscreen webkitallowfullscreen mozallowfullscreen></iframe></div></div>



<h3>Examine all 5 Clusters</h3>


```python
toronto_merged.loc[toronto_merged['Cluster Labels'] == 0, toronto_merged.columns[[1] + list(range(5, toronto_merged.shape[1]))]]
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Borough</th>
      <th>Cluster Labels</th>
      <th>1st Most Common Venue</th>
      <th>2nd Most Common Venue</th>
      <th>3rd Most Common Venue</th>
      <th>4th Most Common Venue</th>
      <th>5th Most Common Venue</th>
      <th>6th Most Common Venue</th>
      <th>7th Most Common Venue</th>
      <th>8th Most Common Venue</th>
      <th>9th Most Common Venue</th>
      <th>10th Most Common Venue</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2</th>
      <td>Downtown Toronto</td>
      <td>0</td>
      <td>Coffee Shop</td>
      <td>Caf</td>
      <td>Bakery</td>
      <td>Pub</td>
      <td>Park</td>
      <td>Mexican Restaurant</td>
      <td>Breakfast Spot</td>
      <td>Restaurant</td>
      <td>Theater</td>
      <td>Yoga Studio</td>
    </tr>
    <tr>
      <th>9</th>
      <td>Downtown Toronto</td>
      <td>0</td>
      <td>Coffee Shop</td>
      <td>Clothing Store</td>
      <td>Cosmetics Shop</td>
      <td>Caf</td>
      <td>Middle Eastern Restaurant</td>
      <td>Theater</td>
      <td>Sporting Goods Shop</td>
      <td>Pizza Place</td>
      <td>Bookstore</td>
      <td>Ramen Restaurant</td>
    </tr>
    <tr>
      <th>15</th>
      <td>Downtown Toronto</td>
      <td>0</td>
      <td>Coffee Shop</td>
      <td>Hotel</td>
      <td>Restaurant</td>
      <td>Caf</td>
      <td>Clothing Store</td>
      <td>Breakfast Spot</td>
      <td>Cosmetics Shop</td>
      <td>Bakery</td>
      <td>Italian Restaurant</td>
      <td>Beer Bar</td>
    </tr>
    <tr>
      <th>19</th>
      <td>East Toronto</td>
      <td>0</td>
      <td>Coffee Shop</td>
      <td>Health Food Store</td>
      <td>Pub</td>
      <td>Trail</td>
      <td>Electronics Store</td>
      <td>Eastern European Restaurant</td>
      <td>Dumpling Restaurant</td>
      <td>Donut Shop</td>
      <td>Deli / Bodega</td>
      <td>Ethiopian Restaurant</td>
    </tr>
    <tr>
      <th>20</th>
      <td>Downtown Toronto</td>
      <td>0</td>
      <td>Coffee Shop</td>
      <td>Cocktail Bar</td>
      <td>Bakery</td>
      <td>Steakhouse</td>
      <td>Beer Bar</td>
      <td>Cheese Shop</td>
      <td>Farmers Market</td>
      <td>Caf</td>
      <td>Seafood Restaurant</td>
      <td>Park</td>
    </tr>
    <tr>
      <th>24</th>
      <td>Downtown Toronto</td>
      <td>0</td>
      <td>Coffee Shop</td>
      <td>Caf</td>
      <td>Italian Restaurant</td>
      <td>Ice Cream Shop</td>
      <td>Burger Joint</td>
      <td>Sandwich Place</td>
      <td>Chinese Restaurant</td>
      <td>Juice Bar</td>
      <td>Spa</td>
      <td>Japanese Restaurant</td>
    </tr>
    <tr>
      <th>25</th>
      <td>Downtown Toronto</td>
      <td>0</td>
      <td>Grocery Store</td>
      <td>Caf</td>
      <td>Park</td>
      <td>Restaurant</td>
      <td>Coffee Shop</td>
      <td>Convenience Store</td>
      <td>Athletics &amp; Sports</td>
      <td>Italian Restaurant</td>
      <td>Nightclub</td>
      <td>Diner</td>
    </tr>
    <tr>
      <th>30</th>
      <td>Downtown Toronto</td>
      <td>0</td>
      <td>Coffee Shop</td>
      <td>Caf</td>
      <td>Bar</td>
      <td>Thai Restaurant</td>
      <td>Asian Restaurant</td>
      <td>Sushi Restaurant</td>
      <td>Restaurant</td>
      <td>American Restaurant</td>
      <td>Hotel</td>
      <td>Steakhouse</td>
    </tr>
    <tr>
      <th>31</th>
      <td>West Toronto</td>
      <td>0</td>
      <td>Pharmacy</td>
      <td>Supermarket</td>
      <td>Bakery</td>
      <td>Music Venue</td>
      <td>Park</td>
      <td>Brewery</td>
      <td>Bar</td>
      <td>Bank</td>
      <td>Caf</td>
      <td>Middle Eastern Restaurant</td>
    </tr>
    <tr>
      <th>36</th>
      <td>Downtown Toronto</td>
      <td>0</td>
      <td>Coffee Shop</td>
      <td>Aquarium</td>
      <td>Hotel</td>
      <td>Caf</td>
      <td>Italian Restaurant</td>
      <td>Fried Chicken Joint</td>
      <td>Brewery</td>
      <td>Restaurant</td>
      <td>Scenic Lookout</td>
      <td>History Museum</td>
    </tr>
    <tr>
      <th>37</th>
      <td>West Toronto</td>
      <td>0</td>
      <td>Bar</td>
      <td>Men's Store</td>
      <td>Coffee Shop</td>
      <td>Asian Restaurant</td>
      <td>Vietnamese Restaurant</td>
      <td>Restaurant</td>
      <td>New American Restaurant</td>
      <td>Cocktail Bar</td>
      <td>French Restaurant</td>
      <td>Caf</td>
    </tr>
    <tr>
      <th>41</th>
      <td>East Toronto</td>
      <td>0</td>
      <td>Greek Restaurant</td>
      <td>Coffee Shop</td>
      <td>Ice Cream Shop</td>
      <td>Italian Restaurant</td>
      <td>Furniture / Home Store</td>
      <td>Bubble Tea Shop</td>
      <td>Sports Bar</td>
      <td>Spa</td>
      <td>Bookstore</td>
      <td>Liquor Store</td>
    </tr>
    <tr>
      <th>42</th>
      <td>Downtown Toronto</td>
      <td>0</td>
      <td>Coffee Shop</td>
      <td>Caf</td>
      <td>Hotel</td>
      <td>Restaurant</td>
      <td>Seafood Restaurant</td>
      <td>Italian Restaurant</td>
      <td>Bar</td>
      <td>American Restaurant</td>
      <td>Deli / Bodega</td>
      <td>Gastropub</td>
    </tr>
    <tr>
      <th>43</th>
      <td>West Toronto</td>
      <td>0</td>
      <td>Caf</td>
      <td>Coffee Shop</td>
      <td>Bakery</td>
      <td>Breakfast Spot</td>
      <td>Stadium</td>
      <td>Burrito Place</td>
      <td>Sandwich Place</td>
      <td>Restaurant</td>
      <td>Caribbean Restaurant</td>
      <td>Climbing Gym</td>
    </tr>
    <tr>
      <th>47</th>
      <td>East Toronto</td>
      <td>0</td>
      <td>Park</td>
      <td>Pet Store</td>
      <td>Pub</td>
      <td>Brewery</td>
      <td>Board Shop</td>
      <td>Burger Joint</td>
      <td>Sandwich Place</td>
      <td>Burrito Place</td>
      <td>Fast Food Restaurant</td>
      <td>Fish &amp; Chips Shop</td>
    </tr>
    <tr>
      <th>48</th>
      <td>Downtown Toronto</td>
      <td>0</td>
      <td>Coffee Shop</td>
      <td>Hotel</td>
      <td>Caf</td>
      <td>Restaurant</td>
      <td>American Restaurant</td>
      <td>Deli / Bodega</td>
      <td>Steakhouse</td>
      <td>Seafood Restaurant</td>
      <td>Gym</td>
      <td>Italian Restaurant</td>
    </tr>
    <tr>
      <th>54</th>
      <td>East Toronto</td>
      <td>0</td>
      <td>Caf</td>
      <td>Coffee Shop</td>
      <td>Bakery</td>
      <td>Italian Restaurant</td>
      <td>American Restaurant</td>
      <td>Yoga Studio</td>
      <td>Comfort Food Restaurant</td>
      <td>Bookstore</td>
      <td>Seafood Restaurant</td>
      <td>Brewery</td>
    </tr>
    <tr>
      <th>67</th>
      <td>Central Toronto</td>
      <td>0</td>
      <td>Breakfast Spot</td>
      <td>Clothing Store</td>
      <td>Dance Studio</td>
      <td>Food &amp; Drink Shop</td>
      <td>Hotel</td>
      <td>Sandwich Place</td>
      <td>Park</td>
      <td>Gym</td>
      <td>Eastern European Restaurant</td>
      <td>Dumpling Restaurant</td>
    </tr>
    <tr>
      <th>69</th>
      <td>West Toronto</td>
      <td>0</td>
      <td>Mexican Restaurant</td>
      <td>Caf</td>
      <td>Thai Restaurant</td>
      <td>Fast Food Restaurant</td>
      <td>Arts &amp; Crafts Store</td>
      <td>Discount Store</td>
      <td>Speakeasy</td>
      <td>Diner</td>
      <td>Flea Market</td>
      <td>Bar</td>
    </tr>
    <tr>
      <th>73</th>
      <td>Central Toronto</td>
      <td>0</td>
      <td>Coffee Shop</td>
      <td>Sporting Goods Shop</td>
      <td>Yoga Studio</td>
      <td>Clothing Store</td>
      <td>Burger Joint</td>
      <td>Salon / Barbershop</td>
      <td>Caf</td>
      <td>Restaurant</td>
      <td>Rental Car Location</td>
      <td>Chinese Restaurant</td>
    </tr>
    <tr>
      <th>74</th>
      <td>Central Toronto</td>
      <td>0</td>
      <td>Sandwich Place</td>
      <td>Caf</td>
      <td>Park</td>
      <td>Coffee Shop</td>
      <td>Cosmetics Shop</td>
      <td>History Museum</td>
      <td>Burger Joint</td>
      <td>Jewish Restaurant</td>
      <td>American Restaurant</td>
      <td>Pizza Place</td>
    </tr>
    <tr>
      <th>75</th>
      <td>West Toronto</td>
      <td>0</td>
      <td>Gift Shop</td>
      <td>Breakfast Spot</td>
      <td>Bookstore</td>
      <td>Bar</td>
      <td>Dessert Shop</td>
      <td>Dog Run</td>
      <td>Movie Theater</td>
      <td>Restaurant</td>
      <td>Bank</td>
      <td>Cuban Restaurant</td>
    </tr>
    <tr>
      <th>79</th>
      <td>Central Toronto</td>
      <td>0</td>
      <td>Sandwich Place</td>
      <td>Dessert Shop</td>
      <td>Pizza Place</td>
      <td>Caf</td>
      <td>Coffee Shop</td>
      <td>Italian Restaurant</td>
      <td>Gym</td>
      <td>Sushi Restaurant</td>
      <td>Thai Restaurant</td>
      <td>Pharmacy</td>
    </tr>
    <tr>
      <th>80</th>
      <td>Downtown Toronto</td>
      <td>0</td>
      <td>Caf</td>
      <td>Bookstore</td>
      <td>Restaurant</td>
      <td>Japanese Restaurant</td>
      <td>Italian Restaurant</td>
      <td>Bar</td>
      <td>Bakery</td>
      <td>Nightclub</td>
      <td>Chinese Restaurant</td>
      <td>Sandwich Place</td>
    </tr>
    <tr>
      <th>81</th>
      <td>West Toronto</td>
      <td>0</td>
      <td>Coffee Shop</td>
      <td>Caf</td>
      <td>Pizza Place</td>
      <td>Italian Restaurant</td>
      <td>Sushi Restaurant</td>
      <td>Gourmet Shop</td>
      <td>School</td>
      <td>Fish &amp; Chips Shop</td>
      <td>Bar</td>
      <td>Falafel Restaurant</td>
    </tr>
    <tr>
      <th>84</th>
      <td>Downtown Toronto</td>
      <td>0</td>
      <td>Vegetarian / Vegan Restaurant</td>
      <td>Bar</td>
      <td>Chinese Restaurant</td>
      <td>Caf</td>
      <td>Mexican Restaurant</td>
      <td>Vietnamese Restaurant</td>
      <td>Coffee Shop</td>
      <td>Bakery</td>
      <td>Dumpling Restaurant</td>
      <td>Donut Shop</td>
    </tr>
    <tr>
      <th>86</th>
      <td>Central Toronto</td>
      <td>0</td>
      <td>Coffee Shop</td>
      <td>Pub</td>
      <td>Sushi Restaurant</td>
      <td>Restaurant</td>
      <td>Light Rail Station</td>
      <td>Bagel Shop</td>
      <td>Fried Chicken Joint</td>
      <td>American Restaurant</td>
      <td>Sports Bar</td>
      <td>Pizza Place</td>
    </tr>
    <tr>
      <th>87</th>
      <td>Downtown Toronto</td>
      <td>0</td>
      <td>Airport Service</td>
      <td>Airport Lounge</td>
      <td>Harbor / Marina</td>
      <td>Sculpture Garden</td>
      <td>Boutique</td>
      <td>Boat or Ferry</td>
      <td>Bar</td>
      <td>Airport Terminal</td>
      <td>Coffee Shop</td>
      <td>Airport Gate</td>
    </tr>
    <tr>
      <th>92</th>
      <td>Downtown Toronto</td>
      <td>0</td>
      <td>Coffee Shop</td>
      <td>Caf</td>
      <td>Restaurant</td>
      <td>Cocktail Bar</td>
      <td>Seafood Restaurant</td>
      <td>Hotel</td>
      <td>Beer Bar</td>
      <td>Art Gallery</td>
      <td>Cheese Shop</td>
      <td>Farmers Market</td>
    </tr>
    <tr>
      <th>96</th>
      <td>Downtown Toronto</td>
      <td>0</td>
      <td>Coffee Shop</td>
      <td>Restaurant</td>
      <td>Park</td>
      <td>Caf</td>
      <td>Italian Restaurant</td>
      <td>Pub</td>
      <td>Bakery</td>
      <td>Pizza Place</td>
      <td>Playground</td>
      <td>Japanese Restaurant</td>
    </tr>
    <tr>
      <th>97</th>
      <td>Downtown Toronto</td>
      <td>0</td>
      <td>Coffee Shop</td>
      <td>Caf</td>
      <td>Restaurant</td>
      <td>Steakhouse</td>
      <td>Hotel</td>
      <td>Bar</td>
      <td>Gastropub</td>
      <td>Deli / Bodega</td>
      <td>Gym</td>
      <td>Asian Restaurant</td>
    </tr>
    <tr>
      <th>99</th>
      <td>Downtown Toronto</td>
      <td>0</td>
      <td>Coffee Shop</td>
      <td>Japanese Restaurant</td>
      <td>Sushi Restaurant</td>
      <td>Burger Joint</td>
      <td>Restaurant</td>
      <td>Gay Bar</td>
      <td>Yoga Studio</td>
      <td>Bubble Tea Shop</td>
      <td>Pub</td>
      <td>Hotel</td>
    </tr>
    <tr>
      <th>100</th>
      <td>East Toronto</td>
      <td>0</td>
      <td>Light Rail Station</td>
      <td>Auto Workshop</td>
      <td>Comic Shop</td>
      <td>Pizza Place</td>
      <td>Restaurant</td>
      <td>Burrito Place</td>
      <td>Brewery</td>
      <td>Skate Park</td>
      <td>Smoke Shop</td>
      <td>Spa</td>
    </tr>
  </tbody>
</table>
</div>




```python
toronto_merged.loc[toronto_merged['Cluster Labels'] == 1, toronto_merged.columns[[1] + list(range(5, toronto_merged.shape[1]))]]
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Borough</th>
      <th>Cluster Labels</th>
      <th>1st Most Common Venue</th>
      <th>2nd Most Common Venue</th>
      <th>3rd Most Common Venue</th>
      <th>4th Most Common Venue</th>
      <th>5th Most Common Venue</th>
      <th>6th Most Common Venue</th>
      <th>7th Most Common Venue</th>
      <th>8th Most Common Venue</th>
      <th>9th Most Common Venue</th>
      <th>10th Most Common Venue</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>68</th>
      <td>Central Toronto</td>
      <td>1</td>
      <td>Trail</td>
      <td>Jewelry Store</td>
      <td>Park</td>
      <td>Sushi Restaurant</td>
      <td>Diner</td>
      <td>Discount Store</td>
      <td>Dog Run</td>
      <td>Doner Restaurant</td>
      <td>Donut Shop</td>
      <td>Women's Store</td>
    </tr>
    <tr>
      <th>91</th>
      <td>Downtown Toronto</td>
      <td>1</td>
      <td>Park</td>
      <td>Trail</td>
      <td>Playground</td>
      <td>Doner Restaurant</td>
      <td>Dessert Shop</td>
      <td>Dim Sum Restaurant</td>
      <td>Diner</td>
      <td>Discount Store</td>
      <td>Dog Run</td>
      <td>Women's Store</td>
    </tr>
  </tbody>
</table>
</div>




```python
toronto_merged.loc[toronto_merged['Cluster Labels'] == 2, toronto_merged.columns[[1] + list(range(5, toronto_merged.shape[1]))]]
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Borough</th>
      <th>Cluster Labels</th>
      <th>1st Most Common Venue</th>
      <th>2nd Most Common Venue</th>
      <th>3rd Most Common Venue</th>
      <th>4th Most Common Venue</th>
      <th>5th Most Common Venue</th>
      <th>6th Most Common Venue</th>
      <th>7th Most Common Venue</th>
      <th>8th Most Common Venue</th>
      <th>9th Most Common Venue</th>
      <th>10th Most Common Venue</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>62</th>
      <td>Central Toronto</td>
      <td>2</td>
      <td>Garden</td>
      <td>Music Venue</td>
      <td>Women's Store</td>
      <td>Department Store</td>
      <td>Event Space</td>
      <td>Ethiopian Restaurant</td>
      <td>Electronics Store</td>
      <td>Eastern European Restaurant</td>
      <td>Dumpling Restaurant</td>
      <td>Donut Shop</td>
    </tr>
  </tbody>
</table>
</div>




```python
toronto_merged.loc[toronto_merged['Cluster Labels'] == 3, toronto_merged.columns[[1] + list(range(5, toronto_merged.shape[1]))]]
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Borough</th>
      <th>Cluster Labels</th>
      <th>1st Most Common Venue</th>
      <th>2nd Most Common Venue</th>
      <th>3rd Most Common Venue</th>
      <th>4th Most Common Venue</th>
      <th>5th Most Common Venue</th>
      <th>6th Most Common Venue</th>
      <th>7th Most Common Venue</th>
      <th>8th Most Common Venue</th>
      <th>9th Most Common Venue</th>
      <th>10th Most Common Venue</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>83</th>
      <td>Central Toronto</td>
      <td>3</td>
      <td>Gym</td>
      <td>Playground</td>
      <td>Tennis Court</td>
      <td>Department Store</td>
      <td>Event Space</td>
      <td>Ethiopian Restaurant</td>
      <td>Electronics Store</td>
      <td>Eastern European Restaurant</td>
      <td>Dumpling Restaurant</td>
      <td>Donut Shop</td>
    </tr>
  </tbody>
</table>
</div>




```python
toronto_merged.loc[toronto_merged['Cluster Labels'] == 4, toronto_merged.columns[[1] + list(range(5, toronto_merged.shape[1]))]]
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Borough</th>
      <th>Cluster Labels</th>
      <th>1st Most Common Venue</th>
      <th>2nd Most Common Venue</th>
      <th>3rd Most Common Venue</th>
      <th>4th Most Common Venue</th>
      <th>5th Most Common Venue</th>
      <th>6th Most Common Venue</th>
      <th>7th Most Common Venue</th>
      <th>8th Most Common Venue</th>
      <th>9th Most Common Venue</th>
      <th>10th Most Common Venue</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>61</th>
      <td>Central Toronto</td>
      <td>4</td>
      <td>Bus Line</td>
      <td>Park</td>
      <td>Swim School</td>
      <td>Women's Store</td>
      <td>Event Space</td>
      <td>Ethiopian Restaurant</td>
      <td>Electronics Store</td>
      <td>Eastern European Restaurant</td>
      <td>Dumpling Restaurant</td>
      <td>Donut Shop</td>
    </tr>
  </tbody>
</table>
</div>


